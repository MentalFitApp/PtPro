import{r as o,j as e}from"./react-FJB7Hj_2.js";import{g as p}from"./firebase-CiybzbB3.js";import{D as h,G as u,H as f,B as b}from"./@firebase-D5dUFubL.js";import{d as j}from"./index-C1w-7Ivh.js";import{a as N}from"./react-router-DF4cN2Hx.js";import{m as g}from"./framer-motion-Bo7GrDk8.js";import{A as y,v as D,D as v,Q as S}from"./lucide-react-BYK_Rxhn.js";import"./papaparse-BHXrM2Hc.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./react-dom-BrtcLnxQ.js";import"./scheduler-DYLXRpC5.js";import"./react-router-dom-udQfSOCw.js";import"./@remix-run-CjG9tKj3.js";import"./motion-dom-C8PdgYBP.js";import"./motion-utils-DBsP9okC.js";const w=()=>e.jsx("div",{className:"min-h-screen flex justify-center items-center relative",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-400"})}),z=s=>s&&typeof s.toDate=="function"?s.toDate().toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}):"N/D",$=()=>{const[s,d]=o.useState([]),[m,l]=o.useState(!0),r=N(),n=p().currentUser;return o.useEffect(()=>{if(!n){r("/client-login");return}const t=h(j,`clients/${n.uid}/payments`),a=u(t,f("paymentDate","desc")),x=b(a,i=>{d(i.docs.map(c=>({id:c.id,...c.data()}))),l(!1)},i=>{console.error("Errore nel caricare i pagamenti:",i),l(!1)});return()=>x()},[n,r]),m?e.jsx(w,{}):e.jsx("div",{className:"min-h-screen text-slate-200 p-4 sm:p-8 relative",children:e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-50",children:"Storico Pagamenti"}),e.jsxs("button",{onClick:()=>r("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-zinc-800 hover:bg-zinc-700 text-slate-300 text-sm font-semibold rounded-lg transition-colors",children:[e.jsx(y,{size:16}),e.jsx("span",{children:"Dashboard"})]})]}),e.jsx("main",{className:"bg-zinc-950/60 backdrop-blur-xl rounded-2xl gradient-border p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b border-white/10",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400 flex items-center gap-2",children:[e.jsx(D,{size:16}),"Data"]}),e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400",children:[e.jsx(v,{size:16,className:"inline mr-2"}),"Importo"]}),e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400",children:[e.jsx(S,{size:16,className:"inline mr-2"}),"Durata"]}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-400 hidden sm:table-cell",children:"Metodo"})]})}),e.jsx("tbody",{children:s.length>0?s.map(t=>{var a;return e.jsxs("tr",{className:"border-b border-white/5 last:border-b-0",children:[e.jsx("td",{className:"p-4 text-slate-300",children:z(t.paymentDate)}),e.jsxs("td",{className:"p-4 font-semibold text-cyan-300",children:["€ ",(a=t.amount)==null?void 0:a.toFixed(2)]}),e.jsx("td",{className:"p-4 text-slate-300",children:t.duration}),e.jsx("td",{className:"p-4 text-slate-400 hidden sm:table-cell",children:t.paymentMethod||"Non specificato"})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center text-slate-500 p-8",children:"Non è stato registrato ancora nessun pagamento."})})})]})})})]})})};export{$ as default};
