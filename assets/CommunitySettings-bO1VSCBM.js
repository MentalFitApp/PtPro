import{r as i,j as e,g as p,f as g,e as m,a6 as v,S,b_ as y,bW as N,w as C,bN as k,by as w}from"./.pnpm-C04Ba0Xq.js";import{d as u}from"./index-DdCoIfwr.js";const z=[{key:"general",label:"Generali",icon:e.jsx(S,{size:20})},{key:"onboarding",label:"Onboarding",icon:e.jsx(y,{size:20})},{key:"levels",label:"Livelli",icon:e.jsx(N,{size:20})},{key:"channels",label:"Canali",icon:e.jsx(C,{size:20})},{key:"moderation",label:"Moderazione",icon:e.jsx(k,{size:20})},{key:"chat",label:"Chat",icon:e.jsx(w,{size:20})}];function P(){const[n,a]=i.useState("general"),[s,l]=i.useState(null),[o,d]=i.useState(!0),[x,j]=i.useState(!1);i.useEffect(()=>{(async()=>{d(!0);const r=p().currentUser;if(!r)return d(!1);const f=await g(m(u,"roles/superadmins",r.uid));j(f.exists());const h=await g(m(u,"settings","community"));l(h.exists()?h.data():{}),d(!1)})()},[]);const c=async(t,b)=>{if(!x)return;const r={...s,[t]:b};await v(m(u,"settings","community"),r,{merge:!0}),l(r)};return o?e.jsx("div",{className:"flex items-center justify-center h-96",children:"Caricamento..."}):x?e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsxs("aside",{className:"w-64 bg-white border-r flex flex-col py-8 px-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-8 text-blue-700",children:"Impostazioni Community"}),e.jsx("nav",{className:"flex flex-col gap-2",children:z.map(t=>e.jsxs("button",{className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${n===t.key?"bg-blue-100 text-blue-700 font-semibold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>a(t.key),children:[t.icon,t.label]},t.key))})]}),e.jsxs("main",{className:"flex-1 p-10",children:[n==="general"&&e.jsx(M,{data:s==null?void 0:s.general,onSave:t=>c("general",t)}),n==="onboarding"&&e.jsx(A,{data:s==null?void 0:s.onboarding,onSave:t=>c("onboarding",t)}),n==="levels"&&e.jsx(L,{data:s==null?void 0:s.levels,onSave:t=>c("levels",t)}),n==="channels"&&e.jsx(D,{data:s==null?void 0:s.channels,onSave:t=>c("channels",t)}),n==="moderation"&&e.jsx(E,{data:s==null?void 0:s.moderation,onSave:t=>c("moderation",t)}),n==="chat"&&e.jsx(G,{})]})]}):e.jsx("div",{className:"p-8 text-center text-red-600 font-bold",children:"Accesso negato: solo i SuperAdmin possono gestire le impostazioni della Community."})}function M({data:n,onSave:a}){const[s,l]=i.useState((n==null?void 0:n.welcomeMsg)||"");return e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Impostazioni Generali"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2",children:"Messaggio di benvenuto"}),e.jsx("input",{className:"border rounded px-3 py-2 w-full",value:s,onChange:o=>l(o.target.value)})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>a({welcomeMsg:s}),children:"Salva"})]})}function A({data:n,onSave:a}){const[s,l]=i.useState((n==null?void 0:n.steps)||["Completa il profilo","Presentati"]);return e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Onboarding"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2",children:"Step di onboarding"}),e.jsx("textarea",{className:"border rounded px-3 py-2 w-full",value:s.join(`
`),onChange:o=>l(o.target.value.split(`
`))})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>a({steps:s}),children:"Salva"})]})}function L({data:n,onSave:a}){const[s,l]=i.useState((n==null?void 0:n.levels)||["Newbie","Member","Pro","Mentor","Legend"]);return e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Livelli Community"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2",children:"Livelli"}),e.jsx("textarea",{className:"border rounded px-3 py-2 w-full",value:s.join(`
`),onChange:o=>l(o.target.value.split(`
`))})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>a({levels:s}),children:"Salva"})]})}function D({data:n,onSave:a}){const[s,l]=i.useState((n==null?void 0:n.channels)||["Generale","Allenamento","Alimentazione"]);return e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Canali Community"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2",children:"Canali"}),e.jsx("textarea",{className:"border rounded px-3 py-2 w-full",value:s.join(`
`),onChange:o=>l(o.target.value.split(`
`))})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>a({channels:s}),children:"Salva"})]})}function E({data:n,onSave:a}){const[s,l]=i.useState((n==null?void 0:n.autoModeration)||!1);return e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Moderazione"}),e.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[e.jsx("label",{className:"block font-medium",children:"Auto-moderazione"}),e.jsx("input",{type:"checkbox",checked:s,onChange:o=>l(o.target.checked)})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>a({autoModeration:s}),children:"Salva"})]})}function G(){return e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Chat Community"}),e.jsx("div",{className:"mb-4",children:"Prossimamente: chat moderna stile Skool, con avatar, input fisso, conversazione fluida."})]})}export{P as default};
