import{E as ye,h as Ne,r as i,e as E,f as $,V as h,ax as P,j as e,aC as we,aL as Ce,an as Se,F as ke,bJ as ze,aH as J,b9 as De,q as x,bK as Ee,au as B,bL as X,bb as Pe,bc as Ae,a0 as Re,A as v,a6 as Me,u as Ie,W as G,X as Q,aN as Le,av as Te,aU as W}from"./.pnpm-C04Ba0Xq.js";import{d as p}from"./index-DdCoIfwr.js";import{a as Oe}from"./pdfExport-BSG699br.js";const _e=["Forza","Massa","Definizione","Resistenza","Ricomposizione"],Ue=["Principiante","Intermedio","Avanzato"],U=["Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],$e=()=>{const{clientId:u}=ye(),A=Ne(),[g,m]=i.useState(!0),[j,f]=i.useState(!1),[y,R]=i.useState(""),[M,c]=i.useState([]),[o,n]=i.useState({obiettivo:"",livello:"",note:"",durataSettimane:"",giorni:U.reduce((t,s)=>(t[s]={esercizi:[]},t),{})}),[d,Z]=i.useState("Lunedì"),[K,I]=i.useState(!1),[Y,N]=i.useState(!1),[ee,w]=i.useState(!1),[L,T]=i.useState(""),[F,te]=i.useState([]),[se,C]=i.useState(!1),[b,H]=i.useState(null),[ae,S]=i.useState(!1),[O,le]=i.useState([]);i.useEffect(()=>{re()},[u]);const re=async()=>{try{const t=E(p,"clients",u),s=await $(t);s.exists()&&R(s.data().name||"N/D");const a=h(p,"esercizi"),r=(await P(a)).docs.map(q=>({id:q.id,...q.data()}));c(r);const _=E(p,"schede_allenamento",u),D=await $(_);D.exists()&&n(D.data())}catch(t){console.error("Errore caricamento:",t)}m(!1)},oe=async()=>{f(!0);try{const t=E(p,"schede_allenamento",u);if(await Me(t,{...o,updatedAt:new Date}),await ve(),o.durataSettimane){const s=E(p,"clients",u),a=new Date;a.setDate(a.getDate()+parseInt(o.durataSettimane)*7),await Ie(s,{"schedaAllenamento.scadenza":a})}alert("Scheda salvata con successo!")}catch(t){console.error("Errore salvataggio:",t),alert("Errore nel salvataggio della scheda")}f(!1)},ie=t=>{n(s=>{const a={...s};return a.giorni[d].esercizi.push(t),a})},V=t=>{n(s=>{const a={...s};return a.giorni[d].esercizi.splice(t,1),a})},k=(t,s,a)=>{n(l=>{const r={...l};return r.giorni[d].esercizi[t][s]=a,r})},ne=t=>{t!==0&&n(s=>{const a={...s},l=a.giorni[d].esercizi;return[l[t-1],l[t]]=[l[t],l[t-1]],a})},ce=t=>{const s=o.giorni[d].esercizi;t!==s.length-1&&n(a=>{const l={...a},r=l.giorni[d].esercizi;return[r[t],r[t+1]]=[r[t+1],r[t]],l})},z=t=>{n(s=>{const a={...s};return a.giorni[d].esercizi.push({type:t,isMarker:!0}),a})},de=t=>{const s=JSON.parse(JSON.stringify(o.giorni[d]));n(a=>{const l={...a};return t.forEach(r=>{l.giorni[r]=s}),l})},xe=()=>{confirm("Sei sicuro di voler resettare questo giorno?")&&n(t=>{const s={...t};return s.giorni[d]={esercizi:[]},s})},ue=()=>{Oe(o,y)},pe=async()=>{try{const t=h(p,"preset_allenamento"),s=await P(t),a=[];s.forEach(l=>{a.push({id:l.id,...l.data()})}),te(a)}catch(t){console.error("Errore caricamento preset:",t)}},me=async()=>{if(!L.trim()){alert("Inserisci un nome per il preset");return}try{const t=h(p,"preset_allenamento");await W(t,{name:L,data:o,createdAt:new Date}),alert("Preset salvato con successo!"),N(!1),T("")}catch(t){console.error("Errore salvataggio preset:",t),alert("Errore nel salvataggio del preset")}},be=t=>{confirm(`Importare il preset "${t.name}"? Questo sovrascriverà tutti i dati correnti.`)&&(n(s=>({...s,...t.data})),w(!1))},he=async()=>{try{const t=h(p,"schede_allenamento_storico",u,"history"),s=G(t,Q("savedAt","desc"),Le(1)),a=await P(s);if(a.empty)H(null);else{const l=a.docs[0].data();H(l)}}catch(t){console.error("Errore caricamento scheda precedente:",t)}},ge=()=>{if(!b){alert("Nessuna scheda precedente trovata");return}confirm("Copiare la scheda precedente? Questo sovrascriverà tutti i dati correnti.")&&(n(t=>({...t,...b})),C(!1))},fe=async()=>{try{const t=h(p,"schede_allenamento_storico",u,"history"),s=G(t,Q("savedAt","desc")),a=await P(s),l=[];a.forEach(r=>{l.push({id:r.id,...r.data()})}),le(l)}catch(t){console.error("Errore caricamento storico:",t)}},ve=async()=>{try{const t=h(p,"schede_allenamento_storico",u,"history");await W(t,{...o,savedAt:new Date})}catch(t){console.error("Errore salvataggio storico:",t)}},je=t=>{confirm("Visualizzare questa scheda storica? I dati correnti verranno sostituiti (salva prima se necessario).")&&(n(s=>({...s,...t})),S(!1))};return g?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):e.jsx("div",{className:"min-h-screen p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>A("/alimentazione-allenamento"),className:"flex items-center gap-2 text-slate-400 hover:text-slate-200 transition-colors",children:[e.jsx(we,{size:20}),"Torna indietro"]}),e.jsxs("button",{onClick:oe,disabled:j,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded-lg transition-colors",children:[e.jsx(Ce,{size:18}),j?"Salvataggio...":"Salva Scheda"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:ue,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(Se,{size:16}),"Scarica PDF"]}),e.jsxs("button",{onClick:()=>{N(!0)},className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(ke,{size:16}),"Salva come Preset"]}),e.jsxs("button",{onClick:()=>{pe(),w(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(ze,{size:16}),"Importa Preset"]}),e.jsxs("button",{onClick:()=>{he(),C(!0)},className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(J,{size:16}),"Copia Precedente"]}),e.jsxs("button",{onClick:()=>{fe(),S(!0)},className:"flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(De,{size:16}),"Storico Schede"]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-100 mb-6",children:["Scheda Allenamento - ",y]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Obiettivo"}),e.jsxs("select",{value:o.obiettivo,onChange:t=>n({...o,obiettivo:t.target.value}),className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Seleziona obiettivo"}),_e.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Livello"}),e.jsxs("select",{value:o.livello,onChange:t=>n({...o,livello:t.target.value}),className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Seleziona livello"}),Ue.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Durata (settimane)"}),e.jsx("input",{type:"number",value:o.durataSettimane,onChange:t=>n({...o,durataSettimane:t.target.value}),className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500",placeholder:"Es. 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Note"}),e.jsx("input",{type:"text",value:o.note,onChange:t=>n({...o,note:t.target.value}),className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500",placeholder:"Note generali..."})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:U.map(t=>e.jsx("button",{onClick:()=>Z(t),className:`px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${d===t?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:t},t))}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>{const t=U.filter(s=>s!==d);confirm(`Duplicare ${d} su tutti gli altri giorni?`)&&de(t)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm flex items-center gap-2",children:[e.jsx(J,{size:16}),"Duplica su altri giorni"]}),e.jsxs("button",{onClick:xe,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm flex items-center gap-2",children:[e.jsx(Ee,{size:16}),"Reset giorno"]})]})]}),e.jsx("div",{className:"space-y-4",children:o.giorni[d].esercizi.length===0?e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-8 text-center text-slate-400",children:"Nessun esercizio aggiunto per questo giorno"}):o.giorni[d].esercizi.map((t,s)=>{if(t.isMarker){const a=t.type.includes("circuit"),l=t.type.includes("start"),r=a?"bg-cyan-500":"bg-purple-500",_=a?"bg-cyan-900/30 text-cyan-300 border-cyan-600/50":"bg-purple-900/30 text-purple-300 border-purple-600/50",D=a?l?"▼ INIZIO CIRCUITO":"▲ FINE CIRCUITO":l?"▼ INIZIO SUPERSERIE":"▲ FINE SUPERSERIE";return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex-1 h-px ${r}`}),e.jsx("div",{className:`px-4 py-2 rounded-lg font-semibold border ${_}`,children:D}),e.jsx("div",{className:`flex-1 h-px ${r}`}),e.jsx("button",{onClick:()=>V(s),className:"p-2 text-red-400 hover:text-red-300",children:e.jsx(B,{size:16})})]},s)}return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:t.nome}),t.videoUrl&&e.jsxs("a",{href:t.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-3 py-1 bg-blue-600/20 border border-blue-500/50 text-blue-300 rounded-lg text-sm hover:bg-blue-600/30 transition-colors",children:[e.jsx(X,{size:14}),"Video"]})]}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-900/30 border border-blue-600/30 text-blue-300 rounded",children:t.attrezzo}),e.jsx("span",{className:"px-2 py-1 bg-purple-900/30 border border-purple-600/30 text-purple-300 rounded",children:t.gruppoMuscolare})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ne(s),disabled:s===0,className:"p-2 text-slate-400 hover:text-slate-200 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(Pe,{size:18})}),e.jsx("button",{onClick:()=>ce(s),disabled:s===o.giorni[d].esercizi.length-1,className:"p-2 text-slate-400 hover:text-slate-200 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(Ae,{size:18})}),e.jsx("button",{onClick:()=>V(s),className:"p-2 text-red-400 hover:text-red-300",children:e.jsx(B,{size:18})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Serie"}),e.jsx("input",{type:"number",value:t.serie||"",onChange:a=>k(s,"serie",a.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500",placeholder:"Es. 3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ripetizioni"}),e.jsx("input",{type:"text",value:t.ripetizioni||"",onChange:a=>k(s,"ripetizioni",a.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500",placeholder:"Es. 8-12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Recupero (sec)"}),e.jsx("input",{type:"number",value:t.recupero||"",onChange:a=>k(s,"recupero",a.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500",placeholder:"Es. 60"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Note Esercizio"}),e.jsx("textarea",{value:t.noteEsercizio||"",onChange:a=>k(s,"noteEsercizio",a.target.value),rows:"2",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500",placeholder:"Note tecniche, varianti..."})]})]},s)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsxs("button",{onClick:()=>I(!0),className:"md:col-span-3 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors flex items-center justify-center gap-2 font-semibold",children:[e.jsx(Re,{size:20}),"Aggiungi Esercizio"]}),e.jsx("button",{onClick:()=>z("superset-start"),className:"px-4 py-3 bg-purple-600/20 hover:bg-purple-600/30 border-2 border-purple-500/50 text-purple-300 rounded-xl transition-colors flex items-center justify-center gap-2 font-medium text-sm",children:"Inizio Superserie"}),e.jsx("button",{onClick:()=>z("superset-end"),className:"px-4 py-3 bg-purple-600/20 hover:bg-purple-600/30 border-2 border-purple-500/50 text-purple-300 rounded-xl transition-colors flex items-center justify-center gap-2 font-medium text-sm",children:"Fine Superserie"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>z("circuit-start"),className:"px-4 py-3 bg-cyan-600/20 hover:bg-cyan-600/30 border-2 border-cyan-500/50 text-cyan-300 rounded-xl transition-colors flex items-center justify-center gap-2 font-medium",children:"Inizio Circuito"}),e.jsx("button",{onClick:()=>z("circuit-end"),className:"px-4 py-3 bg-cyan-600/20 hover:bg-cyan-600/30 border-2 border-cyan-500/50 text-cyan-300 rounded-xl transition-colors flex items-center justify-center gap-2 font-medium",children:"Fine Circuito"})]}),e.jsx(v,{children:K&&e.jsx(Fe,{availableExercises:M,onAdd:t=>{ie(t),I(!1)},onCancel:()=>I(!1)})}),e.jsx(v,{children:Y&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Salva come Preset"}),e.jsx("input",{type:"text",value:L,onChange:t=>T(t.target.value),placeholder:"Nome del preset (es. Massa Muscolare)",className:"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-slate-200 mb-4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:me,className:"flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Salva"}),e.jsx("button",{onClick:()=>{N(!1),T("")},className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Annulla"})]})]})})}),e.jsx(v,{children:ee&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>w(!1),children:e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Importa Preset"}),F.length===0?e.jsx("p",{className:"text-slate-400 text-center py-8",children:"Nessun preset disponibile"}):e.jsx("div",{className:"space-y-3",children:F.map(t=>{var s,a,l;return e.jsxs("button",{onClick:()=>be(t),className:"w-full p-4 bg-slate-900 hover:bg-slate-700 border border-slate-700 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-bold text-slate-100",children:t.name}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1",children:["Creato: ",((l=(a=(s=t.createdAt)==null?void 0:s.toDate)==null?void 0:a.call(s))==null?void 0:l.toLocaleDateString("it-IT"))||"N/D"]})]},t.id)})}),e.jsx("button",{onClick:()=>w(!1),className:"w-full mt-4 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Chiudi"})]})})}),e.jsx(v,{children:se&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>C(!1),children:e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Copia Scheda Precedente"}),b?e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-slate-300 mb-2",children:"Scheda trovata:"}),e.jsxs("div",{className:"p-3 bg-slate-900 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-slate-400",children:["Obiettivo: ",b.obiettivo||"N/D"]}),e.jsxs("div",{className:"text-sm text-slate-400",children:["Livello: ",b.livello||"N/D"]}),e.jsxs("div",{className:"text-sm text-slate-400",children:["Durata: ",b.durataSettimane||"N/D"," settimane"]})]})]}):e.jsx("p",{className:"text-slate-400 mb-4",children:"Nessuna scheda precedente trovata"}),e.jsxs("div",{className:"flex gap-3",children:[b&&e.jsx("button",{onClick:ge,className:"flex-1 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:"Copia"}),e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Chiudi"})]})]})})}),e.jsx(v,{children:ae&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>S(!1),children:e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-3xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Storico Schede"}),O.length===0?e.jsx("p",{className:"text-slate-400 text-center py-8",children:"Nessuna scheda nello storico"}):e.jsx("div",{className:"space-y-3",children:O.map((t,s)=>{var a,l,r;return e.jsx("button",{onClick:()=>je(t),className:"w-full p-4 bg-slate-900 hover:bg-slate-700 border border-slate-700 rounded-lg text-left transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-slate-100",children:["Scheda #",O.length-s]}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1",children:["Salvata: ",((r=(l=(a=t.savedAt)==null?void 0:a.toDate)==null?void 0:l.call(a))==null?void 0:r.toLocaleDateString("it-IT"))||"N/D"]}),e.jsxs("div",{className:"text-sm text-slate-400",children:["Obiettivo: ",t.obiettivo||"N/D"," | Livello: ",t.livello||"N/D"]})]}),e.jsx("span",{className:"text-blue-400 text-sm",children:"Visualizza"})]})},t.id)})}),e.jsx("button",{onClick:()=>S(!1),className:"w-full mt-4 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Chiudi"})]})})})]})})},Fe=({availableExercises:u,onAdd:A,onCancel:g})=>{const[m,j]=i.useState(null),[f,y]=i.useState(""),R=u.filter(c=>c.nome.toLowerCase().includes(f.toLowerCase())),M=()=>{if(!m){alert("Seleziona un esercizio");return}A({...m,serie:"",ripetizioni:"",recupero:"",noteEsercizio:""})};return e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:g,className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:c=>c.stopPropagation(),className:"w-full max-w-2xl bg-slate-800 rounded-xl border border-slate-700 p-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100",children:"Seleziona Esercizio"}),e.jsx("button",{onClick:g,className:"text-slate-400 hover:text-slate-200",children:e.jsx(Te,{size:24})})]}),e.jsx("input",{type:"text",placeholder:"Cerca esercizio...",value:f,onChange:c=>y(c.target.value),className:"w-full px-4 py-2 mb-4 bg-slate-700 border border-slate-600 rounded-lg text-slate-200 focus:outline-none focus:border-blue-500"}),e.jsx("div",{className:"space-y-2 mb-4 max-h-96 overflow-y-auto",children:R.map(c=>e.jsxs("button",{onClick:()=>j(c),className:`w-full p-4 rounded-lg text-left transition-colors ${(m==null?void 0:m.id)===c.id?"bg-blue-600 border-2 border-blue-400":"bg-slate-700 border-2 border-transparent hover:border-slate-600"}`,children:[e.jsx("div",{className:"font-semibold text-slate-100 mb-1",children:c.nome}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-900/30 border border-blue-600/30 text-blue-300 rounded",children:c.attrezzo}),e.jsx("span",{className:"px-2 py-0.5 bg-purple-900/30 border border-purple-600/30 text-purple-300 rounded",children:c.gruppoMuscolare}),c.videoUrl&&e.jsxs("span",{className:"px-2 py-0.5 bg-emerald-900/30 border border-emerald-600/30 text-emerald-300 rounded flex items-center gap-1",children:[e.jsx(X,{size:12}),"Video"]})]})]},c.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:M,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-semibold",children:"Aggiungi"}),e.jsx("button",{onClick:g,className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Annulla"})]})]})})};export{$e as default};
