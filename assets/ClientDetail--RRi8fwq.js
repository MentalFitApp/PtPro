var Ae=Object.defineProperty;var Ie=(n,l,s)=>l in n?Ae(n,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[l]=s;var de=(n,l,s)=>Ie(n,typeof l!="symbol"?l+"":l,s);import{r as o,j as e,R as Te}from"./react-CrXOBDSJ.js";import{A as f,H as P,J as xe,K as me,I as he,Q as ue,R as pe,G as Le,D as A}from"./@firebase-CuwLCerw.js";import{t as D,d as b,u as V,s as be}from"./index-dCbZtuAy.js";import{Q as Me}from"./QuickNotifyButton-bIR3ehIV.js";import{g as Ue,a as Fe}from"./react-router-BxpCmtJ-.js";import{m as z}from"./framer-motion-BAPjnw1b.js";import{u as Oe,v as $e,P as Be,w as fe,p as Qe,x as Ze,e as Ge,y as We,z as _e,G as qe,b as Je,D as Ke,Z as je,F as B,X as _}from"./lucide-react-CCY59hBS.js";import"./core-js-ChGsxLo2.js";import"./idb-Bn1DMRyg.js";import"./react-dom-BpmKF3Ga.js";import"./scheduler-DYLXRpC5.js";import"./react-router-dom-9rcY47vU.js";import"./@remix-run-CjG9tKj3.js";import"./jspdf-7Jyqi_bl.js";import"./@babel-Cvov1XSu.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./firebase-Bp3EI6Ad.js";import"./tslib-BGVaTf34.js";import"./motion-dom-C8PdgYBP.js";import"./motion-utils-DBsP9okC.js";class He extends Te.Component{constructor(){super(...arguments);de(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(s){return{hasError:!0,error:s}}render(){return this.state.hasError?e.jsxs("div",{className:"text-center text-red-400 p-8",children:["Errore: ",this.state.error.message]}):this.props.children}}const Xe=({status:n})=>{const l={attivo:"bg-emerald-900/80 text-emerald-300 border border-emerald-500/30",rinnovato:"bg-amber-900/80 text-amber-300 border border-amber-500/30",non_rinnovato:"bg-red-900/80 text-red-400 border border-red-500/30",na:"bg-slate-700/80 text-slate-300 border border-slate-500/30"},s={attivo:"Attivo",rinnovato:"In Scadenza",non_rinnovato:"Scaduto",na:"N/D"};return e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${l[n]||l.na}`,children:s[n]||"N/D"})},Ve=({isOpen:n,onClose:l,imageUrl:s,alt:p})=>n?e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",children:e.jsxs(z.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},onClick:c=>c.stopPropagation(),className:"relative max-w-4xl max-h-full",children:[e.jsx("img",{src:s,alt:p,className:"w-full h-auto max-h-screen object-contain rounded-lg shadow-2xl"}),e.jsx("button",{onClick:l,className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full text-white",children:e.jsx(_,{size:24})}),e.jsx("div",{className:"absolute bottom-4 left-4 text-white bg-black/60 px-3 py-1 rounded text-sm",children:p})]})}):null,Ye=({isOpen:n,onClose:l,client:s,onSave:p})=>{const[c,m]=o.useState(3),[d,r]=o.useState(""),[h,M]=o.useState("bonifico"),[S,I]=o.useState(""),[a,k]=o.useState(""),T=async()=>{try{const u=D(s.scadenza)||new Date,U=a?new Date(a):new Date(u);a||U.setMonth(U.getMonth()+c);const Q=h==="altro"?S:h,q={amount:parseFloat(d)||0,duration:a?"Manuale":`${c} mesi`,paymentDate:new Date,paymentMethod:Q},Z=f(b,"clients",s.id);await A(Z,{scadenza:U,payments:[...s.payments||[],q]}),V(s.id),p(),l()}catch(u){console.error("Errore rinnovo:",u)}};return n?e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(z.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-800/95 backdrop-blur-sm rounded-2xl border border-slate-700 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Rinnovo ",s.name]}),e.jsx("button",{onClick:l,className:"text-white hover:text-rose-400",children:e.jsx(_,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Mesi di rinnovo"}),e.jsxs("select",{value:c,onChange:u=>m(parseInt(u.target.value)),className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white",children:[e.jsx("option",{value:1,children:"1 mese"}),e.jsx("option",{value:3,children:"3 mesi"}),e.jsx("option",{value:6,children:"6 mesi"}),e.jsx("option",{value:12,children:"12 mesi"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Oppure data scadenza manuale"}),e.jsx("input",{type:"date",value:a,onChange:u=>k(u.target.value),className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Importo"}),e.jsx("input",{type:"number",value:d,onChange:u=>r(u.target.value),placeholder:"es. 150",className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Metodo"}),e.jsxs("select",{value:h,onChange:u=>M(u.target.value),className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white",children:[e.jsx("option",{value:"bonifico",children:"Bonifico"}),e.jsx("option",{value:"klarna",children:"Klarna 3 rate"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"cash",children:"Contanti"}),e.jsx("option",{value:"rateizzato",children:"Rateizzato"}),e.jsx("option",{value:"altro",children:"Altro"})]}),h==="altro"&&e.jsx("input",{type:"text",value:S,onChange:u=>I(u.target.value),placeholder:"Specifica metodo",className:"w-full mt-2 p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white"})]}),e.jsx("button",{onClick:T,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-semibold",children:"Salva Rinnovo"})]})]})}):null},et=({isOpen:n,onClose:l,client:s,onSave:p})=>{const[c,m]=o.useState({name:s.name||"",email:s.email||"",phone:s.phone||""}),d=async()=>{try{const r=f(b,"clients",s.id);await A(r,c),p(),l()}catch(r){console.error("Errore modifica:",r)}};return n?e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(z.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-800/95 backdrop-blur-sm rounded-2xl border border-slate-700 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Modifica ",s.name]}),e.jsx("button",{onClick:l,className:"text-white hover:text-rose-400",children:e.jsx(_,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{value:c.name,onChange:r=>m({...c,name:r.target.value}),placeholder:"Nome",className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white"}),e.jsx("input",{value:c.email,onChange:r=>m({...c,email:r.target.value}),placeholder:"Email",className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white"}),e.jsx("input",{value:c.phone,onChange:r=>m({...c,phone:r.target.value}),placeholder:"Telefono",className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white"}),e.jsx("button",{onClick:d,className:"w-full py-2 bg-rose-600 hover:bg-rose-700 text-white rounded-lg font-semibold",children:"Salva Modifiche"})]})]})}):null},tt=({isOpen:n,onClose:l,client:s,onSave:p})=>{var I;const[c,m]=o.useState(7),[d,r]=o.useState(""),[h,M]=o.useState(!1),S=async()=>{try{const a=D(s.scadenza)||new Date,k=h&&d?new Date(d):new Date(a);h||k.setDate(k.getDate()+c);const T=f(b,"clients",s.id);await A(T,{scadenza:k}),V(s.id),p(),l()}catch(a){console.error("Errore prolungamento:",a)}};return n?e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(z.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-800/95 backdrop-blur-sm rounded-2xl border border-slate-700 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Prolunga Scadenza"}),e.jsx("button",{onClick:l,className:"text-white hover:text-rose-400",children:e.jsx(_,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:a=>M(a.target.checked),className:"w-4 h-4 text-cyan-500"}),e.jsx("label",{className:"text-sm text-slate-300",children:"Scegli data manuale"})]}),h?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Nuova data scadenza"}),e.jsx("input",{type:"date",value:d,onChange:a=>r(a.target.value),className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white"})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Aggiungi giorni"}),e.jsxs("select",{value:c,onChange:a=>m(parseInt(a.target.value)),className:"w-full p-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white",children:[e.jsx("option",{value:1,children:"+1 giorno"}),e.jsx("option",{value:3,children:"+3 giorni"}),e.jsx("option",{value:7,children:"+7 giorni"}),e.jsx("option",{value:15,children:"+15 giorni"}),e.jsx("option",{value:30,children:"+30 giorni"}),e.jsx("option",{value:60,children:"+60 giorni"})]})]}),e.jsxs("div",{className:"text-xs text-slate-400 p-3 bg-slate-700/30 rounded-lg",children:[e.jsxs("p",{children:["Scadenza attuale: ",e.jsx("strong",{children:((I=D(s.scadenza))==null?void 0:I.toLocaleDateString("it-IT"))||"N/D"})]}),e.jsxs("p",{children:["Nuova scadenza: ",e.jsx("strong",{children:h&&d?new Date(d).toLocaleDateString("it-IT"):D(s.scadenza)?new Date(D(s.scadenza).getTime()+c*864e5).toLocaleDateString("it-IT"):"N/D"})]})]}),e.jsxs("button",{onClick:S,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-semibold flex items-center justify-center gap-2",children:[e.jsx(fe,{size:18})," Prolunga Scadenza"]})]})]})}):null},x=({label:n,value:l})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-400",children:n}),e.jsx("p",{className:"mt-1 p-3 bg-white/5 backdrop-blur-md rounded-lg min-h-[44px] text-white break-words whitespace-pre-wrap shadow-inner",children:l||"Non specificato"})]}),ge=({rates:n,canEdit:l,onAdd:s,onUpdate:p,onDelete:c})=>{const[m,d]=o.useState({amount:"",dueDate:"",paid:!1});return e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-2",children:"Rate"}),e.jsxs("table",{className:"w-full text-xs bg-slate-800/60 rounded-xl border border-slate-700",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-900/50",children:[e.jsx("th",{className:"px-2 py-2",children:"Importo"}),e.jsx("th",{className:"px-2 py-2",children:"Scadenza"}),e.jsx("th",{className:"px-2 py-2",children:"Pagata"}),l&&e.jsx("th",{className:"px-2 py-2",children:"Azioni"})]})}),e.jsx("tbody",{children:n&&n.length>0?n.map((r,h)=>e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsxs("td",{className:"px-2 py-2",children:["€",r.amount]}),e.jsx("td",{className:"px-2 py-2",children:r.dueDate?new Date(r.dueDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-2 py-2",children:l?e.jsx("input",{type:"checkbox",checked:r.paid,onChange:()=>p(h,{...r,paid:!r.paid})}):e.jsx("span",{className:r.paid?"text-green-400":"text-red-400",children:r.paid?"Pagata":"Da pagare"})}),l&&e.jsx("td",{className:"px-2 py-2",children:e.jsx("button",{onClick:()=>c(h),className:"text-red-400 px-2",children:"Elimina"})})]},h)):e.jsx("tr",{children:e.jsx("td",{colSpan:l?4:3,className:"text-center py-2 text-slate-400",children:"Nessuna rata"})})})]}),l&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("input",{type:"number",placeholder:"Importo (€)",value:m.amount,onChange:r=>d({...m,amount:r.target.value}),className:"p-2 rounded bg-slate-700/50 border border-slate-600 text-white"}),e.jsx("input",{type:"date",value:m.dueDate,onChange:r=>d({...m,dueDate:r.target.value}),className:"p-2 rounded bg-slate-700/50 border border-slate-600 text-white"}),e.jsx("button",{onClick:()=>{m.amount&&m.dueDate&&(s(m),d({amount:"",dueDate:"",paid:!1}))},className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded",children:"Aggiungi rata"})]})]})};function Dt(){var oe,ce;const{clientId:n}=Ue(),l=Fe(),[s,p]=o.useState(null),[c,m]=o.useState(!0),[d,r]=o.useState("info"),[h,M]=o.useState([]),[S,I]=o.useState([]),[a,k]=o.useState(null),[T,u]=o.useState(null),[U,Q]=o.useState(!1),[q,Z]=o.useState(!1),[ve,Y]=o.useState(!1),[Ne,ee]=o.useState(!1),[J,K]=o.useState({open:!1,url:"",alt:""}),[C,G]=o.useState([]),[W,ye]=o.useState(!1),[L,te]=o.useState(!1);let H=null;try{H=((oe=JSON.parse(localStorage.getItem("user")))==null?void 0:oe.role)||null}catch{}const se=H==="admin",ae=H==="coach";o.useEffect(()=>{if(!n){u("ID cliente non valido."),setTimeout(()=>l("/clients"),3e3);return}const t=f(b,"clients",n),i=P(t,j=>{if(j.exists()){const v={id:j.id,...j.data()};p(v),V(n)}else u("Cliente non trovato."),setTimeout(()=>l("/clients"),3e3);m(!1)},j=>{u("Errore caricamento."),setTimeout(()=>l("/clients"),3e3),m(!1)}),y=f(b,"clients",n,"anamnesi","initial"),w=P(y,async j=>{if(j.exists()){let v=j.data();if(v.photoURLs){const R={};for(const[g,N]of Object.entries(v.photoURLs))if(N&&typeof N=="string")if(N.startsWith("http"))R[g]=N;else try{R[g]=await ue(pe(be,N))}catch(E){console.error(`Errore foto ${g}:`,E),R[g]=null}else R[g]=null;v.photoURLs=R}k(v)}else k(null)}),X=xe(he(b,"clients",n,"checks"),me("createdAt","desc")),Ce=P(X,async j=>{const v=j.docs.map(g=>({id:g.id,...g.data()})),R=await Promise.all(v.map(async g=>{if(g.photoURLs){const N={};for(const[E,$]of Object.entries(g.photoURLs))if($&&typeof $=="string")if($.startsWith("http"))N[E]=$;else try{N[E]=await ue(pe(be,$))}catch(Pe){console.error(`Errore caricamento foto ${E}:`,Pe),N[E]=null}else N[E]=null;g.photoURLs=N}return g}));M(R)},j=>{console.error("Errore caricamento checks:",j)}),Re=xe(he(b,"clients",n,"payments"),me("paymentDate","desc")),Ee=P(Re,j=>{I(j.docs.map(v=>({id:v.id,...v.data()})))});return()=>{i(),w(),Ce(),Ee()}},[n,l]),o.useEffect(()=>{s&&s.rate&&G(s.rate),s&&typeof s.rateizzato=="boolean"&&te(s.rateizzato),ye(se||ae)},[s,se,ae]);const we=async()=>{if(window.confirm(`Eliminare ${s==null?void 0:s.name}?`))try{await Le(f(b,"clients",n)),l("/clients")}catch{alert("Errore eliminazione.")}},ze=()=>{const t=`Ciao ${s.name},

Link: https://MentalFitApp.github.io/PtPro/#/login
Email: ${s.email}
Password: ${s.tempPassword||"Contatta admin"}`;navigator.clipboard.writeText(t),Q(!0),setTimeout(()=>Q(!1),2500)},ke=()=>{const t=f(b,"clients",n);P(t,i=>{i.exists()&&p({id:i.id,...i.data()})})},De=()=>{const t=f(b,"clients",n);P(t,i=>{i.exists()&&p({id:i.id,...i.data()})})},Se=()=>{const t=f(b,"clients",n);P(t,i=>{i.exists()&&p({id:i.id,...i.data()})})},le=async t=>{const i=[...C,t];G(i),await A(f(b,"clients",s.id),{rate:i})},ne=async(t,i)=>{const y=C.map((w,X)=>X===t?i:w);G(y),await A(f(b,"clients",s.id),{rate:y})},ie=async t=>{const i=C.filter((y,w)=>w!==t);G(i),await A(f(b,"clients",s.id),{rate:i})},re=async t=>{te(t),await A(f(b,"clients",s.id),{rateizzato:t})};if(c)return e.jsx("div",{className:"text-center text-slate-400 p-8",children:"Caricamento..."});if(T)return e.jsx("div",{className:"text-center text-red-400 p-8",children:T});if(!s)return null;const F="bg-white/5 backdrop-blur-xl rounded-2xl border border-slate-700 p-6 shadow-lg border border-white/10",O="font-bold mb-4 text-lg text-cyan-300 border-b border-cyan-400/20 pb-2 flex items-center gap-2";return e.jsx(He,{children:e.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-5xl mx-auto p-4 sm:p-6",children:[e.jsxs("button",{onClick:()=>l("/clients"),className:"flex items-center gap-2 text-slate-400 hover:text-rose-400 mb-6",children:[e.jsx(Oe,{size:18})," Torna ai Clienti"]}),e.jsxs("div",{className:"bg-slate-800/60 backdrop-blur-sm rounded-2xl border border-slate-700 p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-50",children:s.name}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Me,{userId:n,userName:s.name,userType:"client"}),e.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center gap-2 px-4 py-2 bg-rose-600 hover:bg-rose-700 text-white text-sm rounded-lg",children:[e.jsx($e,{size:16})," Modifica"]}),e.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm rounded-lg",children:[e.jsx(Be,{size:16})," Rinnovo"]}),e.jsxs("button",{onClick:()=>ee(!0),className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white text-sm rounded-lg",children:[e.jsx(fe,{size:16})," Prolunga"]}),e.jsxs("button",{onClick:we,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg",children:[e.jsx(Qe,{size:16})," Elimina"]})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-slate-900/60 rounded-xl border border-slate-700 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"font-semibold text-slate-200 text-sm",children:"Rateizzato:"}),W?e.jsx("input",{type:"checkbox",checked:L,onChange:t=>re(t.target.checked)}):e.jsx("span",{className:L?"text-green-400":"text-red-400",children:L?"Sì":"No"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ge,{rates:C,canEdit:W,onAdd:le,onUpdate:ne,onDelete:ie})}),e.jsxs("div",{className:"flex flex-col gap-2 min-w-[180px]",children:[e.jsx("div",{className:"text-sm text-slate-300",children:"Totale rate pagate:"}),e.jsxs("div",{className:"text-lg font-bold text-emerald-400",children:["€",C.filter(t=>t.paid).reduce((t,i)=>t+Number(i.amount||0),0)]}),e.jsx("div",{className:"text-sm text-slate-300 mt-4",children:"Totale da pagare:"}),e.jsxs("div",{className:"text-lg font-bold text-rose-400",children:["€",C.reduce((t,i)=>t+Number(i.amount||0),0)]})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6 bg-slate-900/50 p-1 rounded-lg border border-slate-700",children:["info","check","payments","anamnesi"].map(t=>e.jsx("button",{onClick:()=>r(t),className:`px-4 py-2 text-sm rounded-md transition-colors ${d===t?"bg-rose-600 text-white":"text-slate-400 hover:bg-white/10"}`,children:t==="info"?"Informazioni":t==="check"?"Check":t==="payments"?"Pagamenti":"Anamnesi"},t))}),d==="info"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ze,{className:"text-slate-400",size:18}),e.jsxs("p",{children:["Nome: ",e.jsx("span",{className:"font-semibold",children:s.name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"text-slate-400",size:18}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{children:["Email: ",e.jsx("span",{className:"font-semibold",children:s.email})]}),e.jsx("button",{onClick:ze,className:"p-1 text-slate-400 hover:text-emerald-400",children:U?e.jsx(We,{size:16}):e.jsx(_e,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{className:"text-slate-400",size:18}),e.jsxs("p",{children:["Telefono: ",e.jsx("span",{className:"font-semibold",children:s.phone||"N/D"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Je,{className:"text-slate-400",size:18}),e.jsxs("p",{children:["Scadenza: ",e.jsx("span",{className:"font-semibold",children:((ce=D(s.scadenza))==null?void 0:ce.toLocaleDateString("it-IT"))||"N/D"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"text-slate-400",size:18}),e.jsxs("p",{children:["Stato: ",e.jsx(Xe,{status:s.statoPercorso})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("label",{className:"font-semibold text-slate-200 text-sm",children:"Rateizzato:"}),W?e.jsx("input",{type:"checkbox",checked:L,onChange:t=>re(t.target.checked)}):e.jsx("span",{className:L?"text-green-400":"text-red-400",children:L?"Sì":"No"})]})]}),d==="check"&&e.jsx("div",{className:"space-y-4",children:h.length>0?h.map(t=>{var i;return e.jsxs("div",{className:"p-5 bg-slate-700/50 rounded-xl border border-slate-600",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-3",children:[e.jsxs("p",{className:"text-sm font-medium text-slate-300",children:["Data: ",((i=D(t.createdAt))==null?void 0:i.toLocaleDateString("it-IT"))||"N/D"]}),e.jsxs("p",{className:"text-sm text-slate-300",children:["Peso: ",e.jsxs("span",{className:"font-semibold",children:[t.weight||"N/D"," kg"]})]})]}),t.notes&&e.jsxs("p",{className:"text-sm text-slate-400 mb-4 italic",children:['"',t.notes,'"']}),t.photoURLs&&Object.values(t.photoURLs).some(Boolean)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"Foto:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:Object.entries(t.photoURLs).map(([y,w])=>w?e.jsxs("button",{onClick:()=>K({open:!0,url:w,alt:y}),className:"relative group overflow-hidden rounded-xl",children:[e.jsx("img",{src:w,alt:y,className:"w-full h-40 sm:h-48 object-cover transition-transform duration-300 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center",children:e.jsx(je,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity",size:28})}),e.jsx("span",{className:"absolute bottom-1 left-1 text-xs bg-black/70 text-white px-2 py-0.5 rounded",children:y})]},y):null)})]})]},t.id)}):e.jsx("p",{className:"text-center text-slate-400 py-8",children:"Nessun check."})}),d==="payments"&&e.jsx("div",{className:"space-y-4",children:S.length>0?S.map(t=>{var i;return e.jsxs("div",{className:"p-4 bg-slate-700/50 rounded-lg border border-slate-600",children:[e.jsxs("p",{className:"text-sm text-slate-400",children:["Data: ",((i=D(t.paymentDate))==null?void 0:i.toLocaleDateString("it-IT"))||"N/D"]}),e.jsxs("p",{className:"text-sm text-slate-200",children:["Importo: ",new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(t.amount||0)]}),e.jsxs("p",{className:"text-sm text-slate-200",children:["Durata: ",t.duration]}),e.jsxs("p",{className:"text-sm text-slate-200",children:["Metodo: ",t.paymentMethod]})]},t.id)}):e.jsx("p",{className:"text-center text-slate-400",children:"Nessun pagamento."})}),d==="anamnesi"&&e.jsx("div",{className:"space-y-8",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:F,children:[e.jsxs("h4",{className:O,children:[e.jsx(B,{size:16})," Dati Anagrafici"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(x,{label:"Nome",value:a.firstName}),e.jsx(x,{label:"Cognome",value:a.lastName}),e.jsx(x,{label:"Data di Nascita",value:a.birthDate}),e.jsx(x,{label:"Lavoro",value:a.job}),e.jsx(x,{label:"Peso (kg)",value:a.weight}),e.jsx(x,{label:"Altezza (cm)",value:a.height})]})]}),e.jsxs("div",{className:F,children:[e.jsxs("h4",{className:O,children:[e.jsx(B,{size:16})," Abitudini Alimentari"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{label:"Pasti al giorno",value:a.mealsPerDay}),e.jsx(x,{label:"Tipo Colazione",value:a.breakfastType}),e.jsx(x,{label:"Alimenti preferiti",value:a.desiredFoods}),e.jsx(x,{label:"Alimenti da evitare",value:a.dislikedFoods}),e.jsx(x,{label:"Allergie/Intolleranze",value:a.intolerances}),e.jsx(x,{label:"Problemi di digestione",value:a.digestionIssues})]})]}),e.jsxs("div",{className:F,children:[e.jsxs("h4",{className:O,children:[e.jsx(B,{size:16})," Allenamento"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{label:"Allenamenti a settimana",value:a.workoutsPerWeek}),e.jsx(x,{label:"Dettagli Allenamento",value:a.trainingDetails}),e.jsx(x,{label:"Orario e Durata",value:a.trainingTime})]})]}),e.jsxs("div",{className:F,children:[e.jsxs("h4",{className:O,children:[e.jsx(B,{size:16})," Salute e Obiettivi"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{label:"Infortuni o problematiche",value:a.injuries}),e.jsx(x,{label:"Farmaci",value:a.medications}),e.jsx(x,{label:"Integratori",value:a.supplements}),e.jsx(x,{label:"Obiettivo Principale",value:a.mainGoal}),e.jsx(x,{label:"Durata Percorso",value:a.programDuration})]})]}),e.jsxs("div",{className:F,children:[e.jsxs("h4",{className:O,children:[e.jsx(B,{size:16})," Foto Iniziali"]}),e.jsx("p",{className:"text-sm text-slate-400 mb-6",children:"Caricate dal cliente al momento dell'iscrizione."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:["front","right","left","back"].map(t=>{var i;return e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-400 capitalize mb-2",children:t==="front"?"Frontale":t==="back"?"Posteriore":`Laterale ${t==="left"?"Sinistro":"Destro"}`}),(i=a.photoURLs)!=null&&i[t]?e.jsxs("button",{onClick:()=>K({open:!0,url:a.photoURLs[t],alt:t}),className:"relative group overflow-hidden rounded-xl w-full h-48",children:[e.jsx("img",{src:a.photoURLs[t],alt:t,className:"w-full h-full object-cover transition-transform group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 flex items-center justify-center transition-colors",children:e.jsx(je,{className:"text-white opacity-0 group-hover:opacity-100",size:32})})]}):e.jsx("div",{className:"flex justify-center items-center w-full h-48 bg-white/5 backdrop-blur-md rounded-lg text-slate-500",children:e.jsx("span",{children:"Non caricata"})})]},t)})})]})]}):e.jsx("p",{className:"text-center text-slate-400 py-8",children:"Nessuna anamnesi compilata."})}),d==="rates"&&e.jsx("div",{className:"space-y-4",children:e.jsx(ge,{rates:C,canEdit:W,onAdd:le,onUpdate:ne,onDelete:ie})})]}),e.jsx(Ye,{isOpen:q,onClose:()=>Z(!1),client:s,onSave:ke}),e.jsx(et,{isOpen:ve,onClose:()=>Y(!1),client:s,onSave:De}),e.jsx(tt,{isOpen:Ne,onClose:()=>ee(!1),client:s,onSave:Se}),e.jsx(Ve,{isOpen:J.open,onClose:()=>K({open:!1,url:"",alt:""}),imageUrl:J.url,alt:J.alt})]})})}export{Dt as default};
