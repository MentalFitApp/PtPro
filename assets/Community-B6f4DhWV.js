import{j as e,r as i,bQ as Je,bL as et,bR as ms,bS as xs,bT as us,A as E,q as h,av as F,h as hs,bU as ps,by as we,bV as ke,f as J,e as f,a6 as H,a7 as k,W as ee,aN as Ge,X as ce,aO as He,V as C,T as Ne,u as V,bp as St,aU as de,w as me,bW as We,S as bs,M as ve,aP as Lt,a2 as Xe,bX as gs,bY as fs,aT as zt,x as Pt,bO as Ye,a0 as Mt,au as Et,aV as js,aW as Ns,aX as vs,ax as Ke,l as ys,bZ as ye,bq as ws}from"./.pnpm-C04Ba0Xq.js";import{a as ks,d,s as Cs}from"./index-DdCoIfwr.js";import{f as Ce,M as Ss}from"./MediaUploadButton-D_7Hu4y-.js";import"./cloudflareStorage-DUIVXCyJ.js";function Ls({url:c,alt:n="Image",className:N="",onClick:a=null}){const[j,m]=i.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("img",{src:c,alt:n,className:`cursor-pointer ${N}`,onClick:()=>a?a():m(!0),loading:"lazy"}),e.jsx(E,{children:j&&e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/95 z-[100] flex items-center justify-center p-4",onClick:()=>m(!1),children:[e.jsx("button",{className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors",onClick:()=>m(!1),children:e.jsx(F,{size:24,className:"text-white"})}),e.jsx("img",{src:c,alt:n,className:"max-w-full max-h-full object-contain",onClick:S=>S.stopPropagation()})]})})]})}function zs({url:c,thumbnail:n=null,className:N="",autoPlay:a=!1}){const[j,m]=i.useState(!1),[S,D]=i.useState(!1),[O,g]=i.useState(0),[B,ue]=i.useState(0),b=i.useRef(null),v=()=>{b.current&&(j?b.current.pause():b.current.play(),m(!j))},L=()=>{b.current&&(b.current.muted=!S,D(!S))},W=()=>{b.current&&g(b.current.currentTime)},Se=()=>{b.current&&ue(b.current.duration)},_=Le=>{const ze=Le.currentTarget.getBoundingClientRect(),I=(Le.clientX-ze.left)/ze.width*B;b.current&&(b.current.currentTime=I,g(I))},U=()=>{b.current&&(document.fullscreenElement?document.exitFullscreen():b.current.requestFullscreen())};return e.jsxs("div",{className:`relative bg-black rounded-lg overflow-hidden ${N}`,children:[e.jsx("video",{ref:b,src:c,poster:n,className:"w-full h-full",onTimeUpdate:W,onLoadedMetadata:Se,onEnded:()=>m(!1),autoPlay:a}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-black/30 opacity-0 hover:opacity-100 transition-opacity",children:[e.jsx("div",{className:"absolute top-2 right-2 flex gap-2",children:e.jsx("button",{onClick:U,className:"p-2 bg-black/50 hover:bg-black/70 rounded-lg transition-colors",children:e.jsx(ms,{size:18,className:"text-white"})})}),e.jsx("button",{onClick:v,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all",children:j?e.jsx(Je,{size:32,className:"text-white"}):e.jsx(et,{size:32,className:"text-white ml-1"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 space-y-2",children:[e.jsx("div",{onClick:_,className:"h-1 bg-white/30 rounded-full cursor-pointer",children:e.jsx("div",{className:"h-full bg-rose-500 rounded-full",style:{width:`${O/B*100}%`}})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:v,className:"text-white hover:text-rose-400 transition-colors",children:j?e.jsx(Je,{size:20}):e.jsx(et,{size:20})}),e.jsx("button",{onClick:L,className:"text-white hover:text-rose-400 transition-colors",children:S?e.jsx(xs,{size:20}):e.jsx(us,{size:20})}),e.jsxs("span",{className:"text-xs text-white",children:[Ce(Math.floor(O))," / ",Ce(Math.floor(B))]})]})})]})]})]})}function Ps({url:c,duration:n=null,className:N=""}){const[a,j]=i.useState(!1),[m,S]=i.useState(0),[D,O]=i.useState(n||0),g=i.useRef(null),B=()=>{g.current&&(a?g.current.pause():g.current.play(),j(!a))},ue=()=>{g.current&&S(g.current.currentTime)},b=()=>{g.current&&O(g.current.duration)},v=L=>{const W=L.currentTarget.getBoundingClientRect(),U=(L.clientX-W.left)/W.width*D;g.current&&(g.current.currentTime=U,S(U))};return e.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 bg-slate-800 rounded-lg ${N}`,children:[e.jsx("audio",{ref:g,src:c,onTimeUpdate:ue,onLoadedMetadata:b,onEnded:()=>j(!1)}),e.jsx("button",{onClick:B,className:"flex-shrink-0 w-10 h-10 bg-rose-600 hover:bg-rose-700 rounded-full flex items-center justify-center transition-colors",children:a?e.jsx(Je,{size:18,className:"text-white"}):e.jsx(et,{size:18,className:"text-white ml-0.5"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{onClick:v,className:"h-1.5 bg-slate-700 rounded-full cursor-pointer overflow-hidden",children:e.jsx("div",{className:"h-full bg-rose-500 rounded-full transition-all",style:{width:`${m/D*100}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[e.jsx("span",{children:Ce(Math.floor(m))}),e.jsx("span",{children:Ce(Math.floor(D))})]})]})]})}function Ms({media:c,className:n=""}){if(!c||!c.url)return null;switch(c.type){case"image":return e.jsx(Ls,{url:c.url,className:n});case"video":return e.jsx(zs,{url:c.url,thumbnail:c.thumbnail,className:n});case"audio":return e.jsx(Ps,{url:c.url,duration:c.duration,className:n});default:return null}}const Es={vittorie:{name:"Vittorie",icon:ke,description:"Condividi i tuoi risultati durante il percorso",emoji:"üèÜ"},domande:{name:"Domande",icon:we,description:"Fai domande pubbliche per far crescere tutta la community",emoji:"‚ùì"},consigli:{name:"Consigli",icon:ps,description:"Consigli utili e esperienze da condividere",emoji:"üí°"}},Rs={2:{name:"Group Calls",description:"Accesso alle chiamate di gruppo settimanali",icon:"üìû",enabled:!0},3:{name:"Massimo Riposo",description:"Sistema per recuperare al meglio e ottimizzare il sonno",icon:"üò¥",enabled:!0},4:{name:"Protocollo Anti-Stress",description:"Videocorso per ridurre lo stress mentale",icon:"üßò",enabled:!0},5:{name:"+1 Mese Regalo",description:"+1 mese in regalo e un bonus segreto",icon:"üéÅ",enabled:!0}},Ze={firstPost:{name:"Primo Post",description:"Hai pubblicato il tuo primo post!",icon:"ü•á"},posts100:{name:"100 Post",description:"Hai pubblicato 100 post!",icon:"üèÜ"},streak7:{name:"Streak 7 Giorni",description:"Hai partecipato per 7 giorni consecutivi!",icon:"üî•"},streak30:{name:"Streak 30 Giorni",description:"Hai partecipato per 30 giorni consecutivi!",icon:"üíØ"}},As=["spam","scam","truffa"],p=c=>c>=100?{id:5,name:"MentalFit",color:"from-purple-500 to-pink-500",borderColor:"border-purple-500",textColor:"text-purple-400"}:c>=50?{id:4,name:"Elite",color:"from-yellow-500 to-orange-500",borderColor:"border-yellow-500",textColor:"text-yellow-400"}:c>=16?{id:3,name:"Pro",color:"from-blue-500 to-cyan-500",borderColor:"border-blue-500",textColor:"text-blue-400"}:c>=2?{id:2,name:"Intermedio",color:"from-green-500 to-emerald-500",borderColor:"border-green-500",textColor:"text-green-400"}:{id:1,name:"Start",color:"from-slate-500 to-slate-600",borderColor:"border-slate-500",textColor:"text-slate-400"},te=({totalLikes:c=0,size:n="sm"})=>{const N=p(c),a=n==="md"?"px-3 py-1 text-xs":"px-2 py-0.5 text-[10px]";return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full bg-gradient-to-r ${N.color} ${a} font-semibold text-white shadow-sm border border-white/10`,children:["Lv",N.id]})},xe=({src:c,alt:n,totalLikes:N=0,size:a=40,showLevel:j=!0})=>{const m=p(N),S=`https://ui-avatars.com/api/?name=${encodeURIComponent(n||"User")}&size=${a}`;return e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:`rounded-full p-1 bg-gradient-to-br ${m.color}`,children:e.jsx("img",{src:c||S,alt:n,className:"rounded-full object-cover bg-slate-900",style:{width:a,height:a}})}),j&&e.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-gradient-to-br ${m.color} flex items-center justify-center text-white text-xs font-bold border-2 border-slate-900`,children:m.id})]})},Rt=c=>{var N;return c?(((N=c.toDate)==null?void 0:N.call(c))||new Date(c)).toLocaleDateString("it-IT",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"Ora"};function ma(){var Ct;const c=hs(),[n,N]=i.useState(null),[a,j]=i.useState(null),[m,S]=i.useState([]),[D,O]=i.useState(!0),[g,B]=i.useState("vittorie"),[ue,b]=i.useState(!1),[v,L]=i.useState(""),[W,Se]=i.useState("vittorie"),[_,U]=i.useState(Es),[Le,ze]=i.useState(!1),[se,tt]=i.useState([]),[I,Pe]=i.useState([]),[At,Me]=i.useState(!1),[y,q]=i.useState("channels"),[M,st]=i.useState(!1),[X,Ee]=i.useState(null),[T,ae]=i.useState(""),[le,ie]=i.useState(""),[Q,Y]=i.useState("chat"),[Dt,Ds]=i.useState("MessageSquare"),[Re,he]=i.useState(null),[w,$]=i.useState(null),[at,lt]=i.useState(!1),[Ut,Ae]=i.useState(!1),[G,De]=i.useState("feed"),[Us,Is]=i.useState([]),[it,Ts]=i.useState(Rs),[It,Ue]=i.useState(!1),[K,Tt]=i.useState(null),[Ie,nt]=i.useState(""),[$t,Vt]=i.useState({}),[R,z]=i.useState(null),[A,ot]=i.useState(!0),[ne,rt]=i.useState("La Community √® temporaneamente disattivata. Torna presto!"),[$s,ct]=i.useState([]),[dt,Vs]=i.useState(""),[Fs,Os]=i.useState(null),[Bs,_s]=i.useState(null),[Te,$e]=i.useState(null),[qs,Ve]=i.useState(0),[oe,Fe]=i.useState([]),[Ft,Oe]=i.useState(!1),[Qs,Ot]=i.useState([]),[Bt,Gs]=i.useState("week"),[_t,pe]=i.useState(!1),[be,ge]=i.useState(["",""]),[Hs,Ws]=i.useState(null),[Xs,Ys]=i.useState(!0),[Ks,Zs]=i.useState(!1),[qt,mt]=i.useState([]);i.useRef();const[Js,ea]=i.useState([]),[ta,sa]=i.useState(!1),[aa,Qt]=i.useState(""),[Be,Z]=i.useState(!1),[re,xt]=i.useState(""),[fe,Gt]=i.useState(null),[Ht,ut]=i.useState(""),[ht,Wt]=i.useState([]),[_e,Xt]=i.useState(0),[pt,qe]=i.useState(!1),[la,Yt]=i.useState([]),[ia,na]=i.useState(null),[Qe,bt]=i.useState(null);i.useEffect(()=>{const t=ks.onAuthStateChanged(async s=>{if(s){N(s);const l=await J(f(d,"users",s.uid));if(l.exists()){const x={id:s.uid,...l.data()};j(x),ct(x.bookmarkedPosts||[]),Ve(x.streak||0),Fe(x.badges||[]),rs()}else{const x={name:s.displayName||"Utente",photoURL:s.photoURL||"",totalLikes:0,badges:[],streak:0,createdAt:k()};await H(f(d,"users",s.uid),x,{merge:!0}),j({id:s.uid,...x}),ct([]),Ve(0),Fe([])}const o=await J(f(d,"roles","admins"));if(o.exists()){const x=o.data().uids||[];mt(x),x.includes(s.uid)&&st(!0)}const r=await J(f(d,"roles","superadmins"));if(r.exists()){const x=r.data().uids||[];mt(P=>Array.from(new Set([...P,...x]))),x.includes(s.uid)&&st(!0)}const u=await J(f(d,"settings","community"));if(u.exists()){const x=u.data();ot(x.enabled!==!1),x.disabledMessage&&rt(x.disabledMessage)}}else c("/login")});return()=>t()},[c]),i.useEffect(()=>{if(!n)return;const t=ee(C(d,"notifications"),He("userId","==",n.uid),ce("createdAt","desc"),Ge(20)),s=Ne(t,l=>{const o=l.docs.map(r=>({id:r.id,...r.data()}));Wt(o),Xt(o.filter(r=>!r.read).length)});return()=>s()},[n]),i.useEffect(()=>{Be&&a&&(xt(a.name||""),ut(a.photoURL||""))},[Be,a]);const Kt=t=>{var o;const s=(o=t.target.files)==null?void 0:o[0];if(!s)return;Gt(s);const l=new FileReader;l.onload=r=>ut(r.target.result),l.readAsDataURL(s)},Zt=async()=>{if(!n)return;const t={};if(re.trim()&&re.trim()!==(a==null?void 0:a.name)&&(t.name=re.trim()),fe)try{const s=js(Cs,`profile_photos/${n.uid}-${Date.now()}-${fe.name}`);await Ns(s,fe);const l=await vs(s);t.photoURL=l}catch(s){console.error("Errore upload foto profilo:",s),alert("Errore upload foto")}if(Object.keys(t).length===0){Z(!1);return}try{await H(f(d,"users",n.uid),t,{merge:!0}),j(s=>({...s,...t})),Z(!1)}catch(s){console.error("Errore salvataggio profilo:",s),alert("Errore salvataggio profilo")}};i.useEffect(()=>{if(!n)return;(async()=>{try{const s=ee(C(d,"users"),ce("totalLikes","desc"),Ge(10)),o=(await Ke(s)).docs.map(r=>({id:r.id,...r.data()}));Ot(o)}catch(s){console.error("Error loading leaderboard:",s)}})()},[n,Bt]),i.useEffect(()=>{if(!n)return;const t=ee(C(d,"community_posts"),He("pinned","==",!0),ce("pinnedAt","desc")),s=Ne(t,l=>{const o=l.docs.map(r=>r.id);Yt(o)});return()=>s()},[n]),i.useEffect(()=>{if(!v)return;const t=setTimeout(()=>{localStorage.setItem("community_draft",v),Qt(v)},3e3);return()=>clearTimeout(t)},[v]),i.useEffect(()=>{const t=localStorage.getItem("community_draft");t&&L(t)},[]),i.useEffect(()=>{const t=s=>{Qe&&!s.target.closest(".post-menu-container")&&bt(null)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[Qe]),i.useEffect(()=>{if(!n)return;const t=ee(C(d,"community_posts"),ce("createdAt","desc"),Ge(50)),s=Ne(t,l=>{const o=l.docs.map(r=>({id:r.id,...r.data()}));S(o),O(!1)},l=>{console.error("Errore caricamento posts:",l),O(!1)});return()=>s()},[n]),i.useEffect(()=>{if(!M)return;(async()=>{try{const o=(await Ke(C(d,"users"))).docs.map(r=>({id:r.id,...r.data()})).filter(r=>r.name);tt(o)}catch(s){console.error("Errore caricamento membri:",s)}})()},[M]);const Jt=async()=>{if(!T.trim()){z({title:"Campo obbligatorio",message:"Inserisci un nome per il canale"});return}try{const t=T.toLowerCase().replace(/\s+/g,"_"),s={name:T,description:le,type:Q,icon:Dt,emoji:Q==="videocall"?"üìπ":"üí¨",createdAt:k(),createdBy:n.uid};await H(f(d,"communityChannels",t),s),U(l=>({...l,[t]:{name:T,icon:ve,description:le,type:Q,emoji:s.emoji}})),ae(""),ie(""),Y("chat"),z({title:"‚úÖ Successo",message:"Canale creato con successo!",type:"success"})}catch(t){console.error("Errore creazione canale:",t),z({title:"‚ùå Errore",message:t.code==="permission-denied"?"Non hai i permessi per creare canali. Contatta un amministratore.":"Errore durante la creazione del canale. Riprova."})}},es=t=>{const s=_[t];Ee(t),ae(s.name),ie(s.description||""),Y(s.type||"chat")},ts=async()=>{if(!(!X||!T.trim()))try{await V(f(d,"communityChannels",X),{name:T,description:le,type:Q,updatedAt:k(),updatedBy:n.uid}),U(t=>({...t,[X]:{...t[X],name:T,description:le,type:Q}})),Ee(null),ae(""),ie(""),Y("chat"),z({title:"‚úÖ Successo",message:"Canale aggiornato con successo!",type:"success"})}catch(t){console.error("Errore aggiornamento canale:",t),z({title:"‚ùå Errore",message:t.code==="permission-denied"?"Non hai i permessi per modificare canali. Contatta un amministratore.":"Errore durante l'aggiornamento del canale. Riprova."})}},ss=async t=>{try{if(await ys(f(d,"communityChannels",t)),U(s=>{const l={...s};return delete l[t],l}),g===t){const s=Object.keys(_).filter(l=>l!==t);B(s[0]||"vittorie")}he(null),z({title:"‚úÖ Successo",message:"Canale eliminato con successo!",type:"success"})}catch(s){console.error("Errore eliminazione canale:",s),z({title:"‚ùå Errore Permessi",message:s.code==="permission-denied"?"Non hai i permessi per eliminare canali. Verifica di essere admin e che le regole Firestore siano aggiornate.":`Errore durante l'eliminazione: ${s.message||"Riprova pi√π tardi."}`,details:"Se sei admin, vai su Firebase Console ‚Üí Firestore ‚Üí Rules e verifica che siano deployate le ultime regole."})}},as=()=>{Ee(null),ae(""),ie(""),Y("chat")},gt=async(t,s)=>{if(M)try{await V(f(d,"users",t),{totalLikes:parseInt(s),updatedAt:k(),updatedBy:n.uid}),t===n.uid&&j(l=>({...l,totalLikes:parseInt(s)})),z({title:"‚úÖ Successo",message:"Livello utente aggiornato con successo!",type:"success"})}catch(l){console.error("Errore aggiornamento livello:",l),z({title:"‚ùå Errore",message:"Errore durante l'aggiornamento del livello. Riprova."})}},ft=async()=>{if(!v.trim()&&I.length===0)return;const t=Nt(v.trim()),s=vt(t),l=yt(t);try{const o=await de(C(d,"community_posts"),{content:t,channel:W,authorId:n.uid,authorName:(a==null?void 0:a.name)||n.displayName||"Utente",authorPhotoURL:(a==null?void 0:a.photoURL)||n.photoURL||"",authorLevel:p((a==null?void 0:a.totalLikes)||0).id,authorTotalLikes:(a==null?void 0:a.totalLikes)||0,likes:[],likesCount:0,reactions:{},comments:[],commentsCount:0,media:I,mentions:s,hashtags:l,pinned:!1,createdAt:k()});s.forEach(u=>wt(u,o.id,"post")),localStorage.removeItem("community_draft");const r=m.filter(u=>u.authorId===n.uid).length;r===0&&await je("firstPost"),r===99&&await je("posts100"),L(""),Pe([]),b(!1)}catch(o){console.error("Error creating post:",o)}},ls=t=>{Pe(s=>[...s,t])},is=t=>{Pe(s=>s.filter((l,o)=>o!==t))},ns=async(t,s=[])=>{if(!n)return;const l=f(d,"community_posts",t),o=s.includes(n.uid);try{if(o)await V(l,{likes:ws(n.uid),likesCount:ye(-1)});else{await V(l,{likes:St(n.uid),likesCount:ye(1)});const r=m.find(u=>u.id===t);if(r&&r.authorId!==n.uid){const u=f(d,"users",r.authorId);await V(u,{totalLikes:ye(1)})}}}catch(r){console.error("Error liking post:",r)}},jt=async t=>{if(!n||!Ie.trim())return;const s=Nt(Ie.trim()),l=vt(s),o=yt(s);try{const r=f(C(d,"community_posts",t,"comments"));await H(r,{authorId:n.uid,authorName:a.name,authorPhotoURL:a.photoURL,authorTotalLikes:a.totalLikes||0,content:s,mentions:l,hashtags:o,createdAt:k()}),await V(f(d,"community_posts",t),{commentsCount:ye(1)}),l.forEach(u=>wt(u,t,"comment")),nt("")}catch(r){console.error("Error adding comment:",r)}},Nt=t=>{let s=t;return As.forEach(l=>{const o=new RegExp(l,"gi");s=s.replace(o,"***")}),s},vt=t=>{const s=/@(\w+)/g,l=t.match(s);return l?l.map(o=>o.slice(1)):[]},yt=t=>{const s=/#(\w+)/g,l=t.match(s);return l?l.map(o=>o.slice(1)):[]},os=async(t,s,l)=>{if(n)try{await de(C(d,"community_reports"),{type:t,targetId:s,reportedBy:n.uid,reason:l,status:"pending",createdAt:k()}),alert("Segnalazione inviata. Grazie!"),$e(null)}catch(o){console.error("Error reporting:",o)}},wt=async(t,s,l="post")=>{try{const o=ee(C(d,"users"),He("username","==",t)),r=await Ke(o);if(!r.empty){const u=r.docs[0];await de(C(d,"notifications"),{userId:u.id,type:"mention",fromUserId:n.uid,fromUserName:a.name,fromUserPhoto:a.photoURL,postId:s,commentType:l,read:!1,createdAt:k()})}}catch(o){console.error("Error sending mention notification:",o)}},rs=async()=>{if(!n)return;const t=f(d,"users",n.uid),s=await J(t),l=s.data(),o=new Date().toDateString(),r=l==null?void 0:l.lastActiveDate;if(r!==o){const u=new Date;u.setDate(u.getDate()-1);const P=r===u.toDateString()?(l.streak||0)+1:1;s.exists()?await V(t,{lastActiveDate:o,streak:P}):await H(t,{lastActiveDate:o,streak:P,totalLikes:0,badges:[],createdAt:k()},{merge:!0}),Ve(P),P===7&&await je("streak7"),P===30&&await je("streak30")}},je=async t=>{if(!n||oe.includes(t))return;const s=f(d,"users",n.uid);(await J(s)).exists()?await V(s,{badges:St(t)}):await H(s,{badges:[t],totalLikes:0,streak:0,createdAt:k()},{merge:!0}),Fe(o=>[...o,t]),await de(C(d,"notifications"),{userId:n.uid,type:"badge",badgeId:t,badgeName:Ze[t].name,read:!1,createdAt:k()})},cs=async(t,s)=>{if(!(!n||!t.trim()||s.filter(l=>l.trim()).length<2))try{await de(C(d,"community_posts"),{type:"poll",question:t.trim(),options:s.filter(l=>l.trim()).map(l=>({text:l.trim(),votes:0,voters:[]})),authorId:n.uid,authorName:a.name,authorPhotoURL:a.photoURL,authorTotalLikes:a.totalLikes||0,channel:g,createdAt:k(),likesCount:0,likes:[],commentsCount:0}),pe(!1),ge(["",""])}catch(l){console.error("Error creating poll:",l)}};if(i.useEffect(()=>{if(K){const t=ee(C(d,"community_posts",K,"comments"),ce("createdAt","asc")),s=Ne(t,l=>{const o=l.docs.map(r=>({id:r.id,...r.data()}));Vt(r=>({...r,[K]:o}))});return()=>s()}},[K]),m.filter(t=>t.channel===g).filter(t=>{var l,o,r,u;if(!dt.trim())return!0;const s=dt.toLowerCase();if((l=t.content)!=null&&l.toLowerCase().includes(s))return!0;if(s.startsWith("#")){const x=s.slice(1);return(o=t.hashtags)==null?void 0:o.some(P=>P.toLowerCase().includes(x))}if(s.startsWith("@")){const x=s.slice(1);return(r=t.mentions)==null?void 0:r.some(P=>P.toLowerCase().includes(x))}return!!((u=t.authorName)!=null&&u.toLowerCase().includes(s))}),D)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-rose-500"})});if(!A&&!M)return e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-6",children:e.jsxs(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-2xl w-full bg-slate-800/60 backdrop-blur-md rounded-2xl p-8 border border-slate-700 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-slate-700/50 rounded-full flex items-center justify-center mb-4",children:e.jsx(me,{size:48,className:"text-slate-500"})}),e.jsx("h2",{className:"text-3xl font-bold text-slate-100 mb-3",children:"Community Temporaneamente Non Disponibile"}),e.jsx("p",{className:"text-slate-300 text-lg whitespace-pre-wrap",children:ne})]}),e.jsx("button",{onClick:()=>c(M?"/":"/client/dashboard"),className:"px-6 py-3 bg-gradient-to-r from-rose-600 to-pink-600 hover:from-rose-700 hover:to-pink-700 text-white rounded-xl font-semibold transition-all shadow-lg",children:"Torna alla Dashboard"})]})});const ds=p((a==null?void 0:a.totalLikes)||0).id,kt=M||ds>=2||(a==null?void 0:a.liveRoomAccess)===!0;return e.jsxs("div",{className:"min-h-screen bg-slate-900",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-slate-800/95 backdrop-blur-md border-b border-slate-700 shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:"Community MentalFit"}),a&&e.jsx(te,{totalLikes:a.totalLikes||0,size:"md"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:()=>Ue(!0),className:"relative p-2 hover:bg-slate-700 rounded-lg transition-colors group",title:"Rewards & Progressi",children:[e.jsx(ke,{size:20,className:"text-yellow-400 group-hover:scale-110 transition-transform"}),a&&p(a.totalLikes||0).id>1&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full text-[10px] font-bold flex items-center justify-center text-white",children:p(a.totalLikes||0).id})]}),e.jsxs("button",{onClick:()=>Oe(!0),className:"relative p-2 hover:bg-slate-700 rounded-lg transition-colors group",title:"I tuoi Badge",children:[e.jsx(We,{size:20,className:"text-purple-400 group-hover:scale-110 transition-transform"}),oe.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-purple-600 rounded-full text-[10px] font-bold flex items-center justify-center text-white",children:oe.length})]}),e.jsxs("button",{onClick:()=>qe(!pt),className:"relative p-2 hover:bg-slate-700 rounded-lg transition-colors",title:"Notifiche",children:[e.jsx(we,{size:20,className:"text-slate-300"}),_e>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-rose-600 rounded-full text-xs font-bold flex items-center justify-center text-white animate-pulse",children:_e>9?"9+":_e})]}),M&&e.jsxs("button",{onClick:()=>Me(!0),className:"flex items-center gap-2 px-3 py-2 hover:bg-slate-700 rounded-lg transition-colors group",title:"Impostazioni Admin",children:[e.jsx(bs,{size:20,className:"text-purple-400 group-hover:rotate-90 transition-transform"}),e.jsx("span",{className:"hidden sm:inline text-sm font-medium text-slate-300",children:"Impostazioni"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 border-b border-slate-700 -mb-px overflow-x-auto scrollbar-hide",children:[e.jsxs("button",{onClick:()=>De("feed"),className:`px-3 sm:px-4 py-2 font-semibold transition-all whitespace-nowrap text-sm sm:text-base ${G==="feed"?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(ve,{size:16,className:"inline mr-1.5 sm:mr-2 sm:w-[18px] sm:h-[18px]"}),"Feed"]}),e.jsxs("button",{onClick:()=>De("members"),className:`px-3 sm:px-4 py-2 font-semibold transition-all whitespace-nowrap text-sm sm:text-base ${G==="members"?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(me,{size:16,className:"inline mr-1.5 sm:mr-2 sm:w-[18px] sm:h-[18px]"}),e.jsx("span",{className:"hidden sm:inline",children:"Membri"}),e.jsx("span",{className:"sm:hidden",children:"Membri"}),e.jsxs("span",{className:"text-xs ml-1",children:["(",m.length>0?new Set(m.map(t=>t.authorId)).size:0,")"]})]}),kt&&e.jsxs("button",{onClick:()=>De("liveRoom"),className:`px-3 sm:px-4 py-2 font-semibold transition-all whitespace-nowrap text-sm sm:text-base ${G==="liveRoom"?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(Lt,{size:16,className:"inline mr-1.5 sm:mr-2 sm:w-[18px] sm:h-[18px]"}),"Live Room"]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-6 py-4 sm:py-6",children:[a&&e.jsxs("div",{className:"flex items-center gap-4 mb-8 bg-slate-800/60 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[e.jsx("img",{src:a.photoURL||"https://ui-avatars.com/api/?name="+a.name,alt:a.name,className:"w-16 h-16 rounded-full object-cover border-2 border-rose-400"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-lg text-slate-100 flex items-center gap-2",children:[a.name,M&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-green-600/20 text-green-400 text-xs font-semibold border border-green-500/30",children:[e.jsx(Xe,{size:12})," Admin"]}),e.jsx("button",{onClick:()=>Z(!0),className:"text-xs px-2 py-1 rounded-md bg-slate-700 hover:bg-slate-600 text-slate-200 border border-slate-600",children:"Modifica"})]}),e.jsxs("div",{className:"text-sm text-slate-400",children:["Livello ",p(a.totalLikes||0).name," ‚Ä¢ ",a.totalLikes||0," likes"]})]}),e.jsx(te,{totalLikes:a.totalLikes||0,size:"md"})]}),G==="feed"&&e.jsx("div",{className:"space-y-4",children:D?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500"}),e.jsx("p",{className:"mt-4 text-slate-400",children:"Caricamento..."})]}):m.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-800/30 rounded-xl border border-slate-700",children:[e.jsx(ve,{size:48,className:"mx-auto mb-4 text-slate-600"}),e.jsx("p",{className:"text-slate-400 mb-2",children:"Nessun post ancora"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Scrivi il primo messaggio nella community!"})]}):m.map(t=>{var s;return e.jsxs("div",{className:"bg-slate-800/60 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-slate-700 hover:border-slate-600 transition-all",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(xe,{src:t.authorPhotoURL,alt:t.authorName,totalLikes:t.authorTotalLikes||0,size:48,showLevel:!0}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-bold text-slate-100",children:t.authorName}),e.jsx(te,{totalLikes:t.authorTotalLikes||0,size:"sm"}),qt.includes(t.authorId)&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-green-600/20 text-green-400 text-xs font-semibold border border-green-500/30",children:[e.jsx(Xe,{size:10})," Admin"]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Rt(t.createdAt)})]}),M&&e.jsx("button",{onClick:()=>bt(Qe===t.id?null:t.id),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(gs,{size:16,className:"text-slate-400"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-slate-200 whitespace-pre-wrap break-words",children:t.content}),t.media&&t.media.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:t.media.map((l,o)=>{var r;return e.jsx("div",{className:"rounded-lg overflow-hidden",children:(r=l.type)!=null&&r.startsWith("video")?e.jsx("video",{src:l.url,controls:!0,className:"w-full"}):e.jsx("img",{src:l.url,alt:"",className:"w-full h-auto"})},o)})})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-slate-700",children:[e.jsxs("button",{onClick:()=>ns(t.id,t.authorId),className:"flex items-center gap-2 text-slate-400 hover:text-rose-400 transition-colors",children:[e.jsx(fs,{size:18,className:(s=t.likes)!=null&&s.includes(n==null?void 0:n.uid)?"fill-rose-500 text-rose-500":""}),e.jsx("span",{className:"text-sm",children:t.likesCount||0})]}),e.jsxs("button",{onClick:()=>Tt(K===t.id?null:t.id),className:"flex items-center gap-2 text-slate-400 hover:text-cyan-400 transition-colors",children:[e.jsx(we,{size:18}),e.jsx("span",{className:"text-sm",children:t.commentsCount||0})]})]}),K===t.id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[e.jsx("div",{className:"space-y-3 mb-3",children:($t[t.id]||[]).map(l=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(xe,{src:l.authorPhotoURL,alt:l.authorName,totalLikes:0,size:32,showLevel:!1}),e.jsxs("div",{className:"flex-1 bg-slate-700/50 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-200",children:l.authorName}),e.jsx("p",{className:"text-sm text-slate-300 mt-1",children:l.content})]})]},l.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Ie,onChange:l=>nt(l.target.value),onKeyDown:l=>l.key==="Enter"&&jt(t.id,t.authorId),placeholder:"Scrivi un commento...",className:"flex-1 px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),e.jsx("button",{onClick:()=>jt(t.id,t.authorId),className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg text-sm font-medium transition-colors",children:e.jsx(zt,{size:16})})]})]})]},t.id)})}),G==="members"&&e.jsxs("div",{className:"text-center py-12 text-slate-400",children:[e.jsx(me,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Vista membri - Coming soon"}),e.jsx("p",{className:"text-sm mt-2",children:"Usa le Impostazioni per gestire i livelli"})]}),G==="liveRoom"&&kt&&e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsxs("h2",{className:"text-2xl font-bold text-cyan-400 mb-6 flex items-center gap-2",children:[e.jsx(Lt,{size:28})," Live Room"]}),e.jsx("div",{className:"w-full max-w-3xl aspect-video rounded-xl overflow-hidden shadow-xl border border-cyan-600",children:e.jsx("iframe",{src:"https://meet.jit.si/MentalFitCommunityRoom",allow:"camera; microphone; fullscreen; display-capture",style:{width:"100%",height:"100%",border:"none"},title:"Live Room Video Call"})}),e.jsxs("p",{className:"mt-4 text-slate-400 text-center",children:["Questa stanza √® accessibile solo agli utenti abilitati.",e.jsx("br",{}),"Se hai problemi di accesso, contatta un admin."]})]})]}),G==="feed"&&e.jsx("div",{className:"fixed bottom-20 md:bottom-0 left-0 md:left-64 right-0 z-50",onDragOver:t=>{t.preventDefault(),Ae(!0)},onDragLeave:()=>Ae(!1),onDrop:t=>{t.preventDefault(),Ae(!1)},style:{paddingBottom:"env(safe-area-inset-bottom, 0)"},children:e.jsx("div",{className:"bg-slate-900 border-t border-slate-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 md:px-6",children:e.jsxs("div",{className:`py-2 md:py-3 transition-all ${Ut?"bg-cyan-900/20":""}`,children:[I.length>0&&e.jsx("div",{className:"mb-1.5 flex gap-1.5 overflow-x-auto pb-1.5 scrollbar-hide",children:I.map((t,s)=>e.jsxs("div",{className:"relative group flex-shrink-0",children:[e.jsx(Ms,{media:t,className:"w-12 h-12 md:w-16 md:h-16 rounded-lg object-cover"}),e.jsx("button",{onClick:()=>is(s),className:"absolute -top-1 -right-1 p-0.5 bg-rose-600 hover:bg-rose-700 rounded-full shadow-lg",children:e.jsx(F,{size:10,className:"text-white"})})]},s))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative bg-slate-800 rounded-3xl border border-slate-600 hover:border-slate-500 focus-within:border-cyan-500 transition-colors",children:[e.jsx("textarea",{value:v,onChange:t=>L(t.target.value),onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),ft())},placeholder:"Messaggio...",className:"w-full min-h-[40px] md:min-h-[44px] max-h-32 px-3 md:px-4 py-2 md:py-2.5 pr-20 md:pr-24 bg-transparent text-slate-100 placeholder:text-slate-500 focus:outline-none resize-none text-sm md:text-base",rows:1,style:{lineHeight:"1.4"}}),e.jsxs("div",{className:"absolute right-1.5 md:right-2 bottom-1.5 md:bottom-2 flex items-center gap-0.5",children:[e.jsx("button",{onClick:()=>pe(!0),className:"p-1 md:p-1.5 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-cyan-400 transition-colors",title:"Crea sondaggio",children:e.jsx(Pt,{size:16,className:"md:w-[18px] md:h-[18px]"})}),e.jsx("button",{onClick:()=>lt(!at),className:"p-1 md:p-1.5 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-yellow-400 transition-colors",title:"Emoji",children:e.jsx("span",{className:"text-base md:text-lg",children:"üòä"})}),e.jsx("div",{className:"scale-75 md:scale-90",children:e.jsx(Ss,{userId:n==null?void 0:n.uid,onUploadComplete:ls,folder:"community_posts",showLabel:!1})})]})]}),e.jsx("button",{onClick:ft,disabled:!v.trim()&&I.length===0,className:"w-10 h-10 md:w-12 md:h-12 bg-cyan-600 hover:bg-cyan-700 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-full transition-all flex items-center justify-center flex-shrink-0 active:scale-95",title:"Invia",children:e.jsx(zt,{size:18,className:"md:w-5 md:h-5"})})]}),at&&e.jsx("div",{className:"absolute bottom-full left-2 md:left-0 mb-2 p-2 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl grid grid-cols-8 gap-1 w-64 z-10",children:["üòä","üòÇ","‚ù§Ô∏è","üî•","üëç","üéâ","üí™","‚≠ê","üôå","üëè","üöÄ","üíØ","üòç","ü§©","üòé","ü•≥"].map(t=>e.jsx("button",{onClick:()=>{L(s=>s+t),lt(!1)},className:"text-xl hover:bg-slate-700 rounded p-1.5 transition-colors active:scale-90",children:t},t))})]})})})}),e.jsx(E,{children:At&&M&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>Me(!1),children:e.jsxs(h.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-slate-800 rounded-xl max-w-4xl w-full max-h-[90vh] sm:max-h-[80vh] overflow-hidden border border-slate-700 shadow-2xl mx-3 sm:mx-0",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ye,{className:"text-purple-400",size:24}),e.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-slate-100",children:"Impostazioni"})]}),e.jsx("button",{onClick:()=>Me(!1),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(F,{size:20,className:"sm:w-6 sm:h-6 text-slate-400"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row h-[calc(90vh-68px)] sm:h-[calc(80vh-88px)]",children:[e.jsx("div",{className:"w-full sm:w-64 bg-slate-900/60 sm:border-r border-b sm:border-b-0 border-slate-700 p-3 sm:p-4 overflow-x-hidden overflow-y-auto",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>q("general"),className:`w-full text-left px-4 py-2.5 rounded-lg transition-all ${y==="general"?"bg-slate-700 text-slate-100 font-semibold":"text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,children:[e.jsx(Ye,{size:18,className:"inline mr-3"}),"Generale"]}),e.jsxs("button",{onClick:()=>q("channels"),className:`w-full text-left px-4 py-2.5 rounded-lg transition-all ${y==="channels"?"bg-slate-700 text-slate-100 font-semibold":"text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,children:[e.jsx(ve,{size:18,className:"inline mr-3"}),"Canali"]}),e.jsxs("button",{onClick:()=>q("roles"),className:`w-full text-left px-4 py-2.5 rounded-lg transition-all ${y==="roles"?"bg-slate-700 text-slate-100 font-semibold":"text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,children:[e.jsx(We,{size:18,className:"inline mr-3"}),"Ruoli & Livelli"]}),e.jsxs("button",{onClick:()=>q("moderation"),className:`w-full text-left px-4 py-2.5 rounded-lg transition-all ${y==="moderation"?"bg-slate-700 text-slate-100 font-semibold":"text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,children:[e.jsx(Ye,{size:18,className:"inline mr-3"}),"Moderazione"]}),e.jsxs("button",{onClick:()=>q("members"),className:`w-full text-left px-4 py-2.5 rounded-lg transition-all ${y==="members"?"bg-slate-700 text-slate-100 font-semibold":"text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,children:[e.jsx(me,{size:18,className:"inline mr-3"}),"Membri"]}),e.jsxs("button",{onClick:()=>q("onboarding"),className:`w-full text-left px-4 py-2.5 rounded-lg transition-all ${y==="onboarding"?"bg-slate-700 text-slate-100 font-semibold":"text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,children:[e.jsx(ke,{size:18,className:"inline mr-3"}),"Onboarding"]}),e.jsxs("button",{onClick:()=>q("notifications"),className:`w-full text-left px-4 py-2.5 rounded-lg transition-all ${y==="notifications"?"bg-slate-700 text-slate-100 font-semibold":"text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,children:[e.jsx(we,{size:18,className:"inline mr-3"}),"Notifiche Auto"]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[y==="general"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Impostazioni Generali"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Attiva/disattiva la community e personalizza il messaggio"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-xl border border-purple-500/30",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-14 h-8 rounded-full transition-all duration-300 ${A?"bg-green-600":"bg-slate-600"} relative`,children:e.jsx("div",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform duration-300 ${A?"translate-x-6":"translate-x-0"}`})}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-slate-100 font-bold text-lg",children:["Community ",A?"Attiva":"Disattivata"]}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:A?"La community √® accessibile a tutti gli utenti":"Solo gli admin possono accedere alla community"})]})]}),e.jsx("input",{type:"checkbox",checked:A,onChange:t=>ot(t.target.checked),className:"hidden"})]}),!A&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-slate-200 font-medium mb-2",children:"Messaggio per utenti"}),e.jsx("textarea",{value:ne,onChange:t=>rt(t.target.value),placeholder:"Scrivi il messaggio che vedranno gli utenti quando la community √® disattivata...",className:"w-full px-4 py-3 bg-slate-700 text-slate-100 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none",rows:4,maxLength:300}),e.jsxs("div",{className:"text-right text-sm text-slate-400 mt-2",children:[ne.length,"/300"]})]})]}),!A&&e.jsxs("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsx("p",{className:"text-slate-300 text-sm mb-2",children:"üëÅÔ∏è Anteprima messaggio:"}),e.jsx("div",{className:"p-4 bg-slate-800 rounded-lg border border-slate-700",children:e.jsx("p",{className:"text-slate-200 whitespace-pre-wrap",children:ne})})]}),e.jsx("button",{onClick:async()=>{try{await H(f(d,"settings","community"),{enabled:A,disabledMessage:ne,updatedAt:k(),updatedBy:n.uid}),alert("‚úÖ Impostazioni salvate con successo!")}catch(t){console.error("Errore salvataggio:",t),alert("‚ùå Errore durante il salvataggio")}},className:"w-full py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-bold text-lg transition-all shadow-lg",children:"üíæ Salva Impostazioni Generali"})]})]}),y==="channels"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Gestione Canali"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Crea, modifica o elimina i canali della community"}),e.jsx("div",{className:"space-y-3 mb-6",children:Object.entries(_).map(([t,s])=>{const l=s.icon;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{size:20,className:"text-slate-300"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-100 font-medium",children:s.name}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-600 text-slate-300",children:s.type==="videocall"?"üìπ Video":"üí¨ Chat"})]}),s.description&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>es(t),className:"p-2 hover:bg-slate-600 rounded text-cyan-400 transition-colors",title:"Modifica canale",children:"‚úèÔ∏è"}),e.jsx("button",{onClick:()=>he(t),className:"p-2 hover:bg-slate-600 rounded text-rose-400 transition-colors",title:"Elimina canale",children:"üóëÔ∏è"})]})]},t)})}),e.jsxs("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-100 mb-3",children:X?"Modifica Canale":"Nuovo Canale"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Nome canale",value:T,onChange:t=>ae(t.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder:text-slate-400 focus:ring-2 focus:ring-cyan-500 focus:outline-none"}),e.jsx("textarea",{placeholder:"Descrizione (opzionale)",value:le,onChange:t=>ie(t.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder:text-slate-400 focus:ring-2 focus:ring-cyan-500 focus:outline-none resize-none",rows:2}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tipo di Canale"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>Y("chat"),className:`px-4 py-3 rounded-lg border-2 transition-all ${Q==="chat"?"border-cyan-500 bg-cyan-600/20 text-cyan-400":"border-slate-600 bg-slate-700/50 text-slate-300 hover:border-slate-500"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"üí¨"}),e.jsx("div",{className:"text-sm font-semibold",children:"Chat"}),e.jsx("div",{className:"text-xs opacity-75",children:"Messaggi testuali"})]}),e.jsxs("button",{type:"button",onClick:()=>Y("videocall"),className:`px-4 py-3 rounded-lg border-2 transition-all ${Q==="videocall"?"border-purple-500 bg-purple-600/20 text-purple-400":"border-slate-600 bg-slate-700/50 text-slate-300 hover:border-slate-500"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"üìπ"}),e.jsx("div",{className:"text-sm font-semibold",children:"Video Call"}),e.jsx("div",{className:"text-xs opacity-75",children:"Sala videochiamate"})]})]})]}),e.jsx("div",{className:"flex gap-3",children:X?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:ts,className:"flex-1 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-lg font-semibold transition-all shadow-lg",children:"üíæ Salva Modifiche"}),e.jsx("button",{onClick:as,className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg font-medium transition-all",children:"Annulla"})]}):e.jsxs("button",{onClick:Jt,className:"w-full px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-lg font-semibold transition-all shadow-lg",children:[e.jsx(Mt,{size:18,className:"inline mr-2"}),"Crea Canale"]})})]})]})]}),y==="roles"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Livelli & Rewards"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Configura i livelli e i contenuti sbloccabili (come da specifiche MentalFit)"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Configurazione Livelli"}),e.jsx("div",{className:"space-y-3",children:[{id:1,name:"Start",emoji:"üå±",min:0,max:1,color:"from-slate-500 to-slate-600"},{id:2,name:"Intermedio",emoji:"üî•",min:2,max:15,color:"from-green-500 to-emerald-500"},{id:3,name:"Pro",emoji:"üí™",min:16,max:49,color:"from-blue-500 to-cyan-500"},{id:4,name:"Elite",emoji:"‚≠ê",min:50,max:99,color:"from-yellow-500 to-orange-500"},{id:5,name:"MentalFit",emoji:"üèÜ",min:100,max:"‚àû",color:"from-purple-500 to-pink-500"}].map(t=>e.jsx("div",{className:`p-4 bg-gradient-to-r ${t.color} bg-opacity-10 rounded-lg border-2 border-transparent hover:border-opacity-50`,style:{borderColor:"rgba(147, 51, 234, 0.3)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:t.emoji}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-slate-100 font-bold",children:["Livello ",t.id,": ",t.name]}),e.jsxs("p",{className:"text-slate-400 text-sm",children:[t.min,"‚Äì",t.max," Likes"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",defaultValue:t.min,className:"w-20 px-3 py-2 bg-slate-700 text-slate-100 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"Min"}),e.jsx("span",{className:"text-slate-400",children:"‚Üí"}),e.jsx("input",{type:t.max==="‚àû"?"text":"number",defaultValue:t.max,className:"w-20 px-3 py-2 bg-slate-700 text-slate-100 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"Max"})]})]})},t.id))}),e.jsx("button",{className:"mt-4 w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-lg font-semibold transition-all shadow-lg",children:"Salva Configurazione Livelli"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Rewards Sbloccabili"}),e.jsx("div",{className:"space-y-4",children:Object.entries(it).map(([t,s])=>e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-4xl",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",defaultValue:s.name,className:"flex-1 px-3 py-2 bg-slate-700 text-slate-100 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 font-semibold"}),e.jsxs("span",{className:"text-xs px-3 py-2 bg-purple-600 text-white rounded-lg font-bold",children:["Livello ",t]})]}),e.jsx("textarea",{defaultValue:s.description,className:"w-full px-3 py-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm resize-none",rows:2}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:s.enabled,className:"w-4 h-4 text-green-600 rounded focus:ring-green-500"}),e.jsx("span",{className:"text-slate-400 text-sm",children:"Attivo"})]}),e.jsx("input",{type:"url",placeholder:"Link al contenuto/corso...",className:"flex-1 px-3 py-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm"})]})]})]})},t))}),e.jsx("button",{className:"mt-4 w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg font-semibold transition-all shadow-lg",children:"Salva Rewards"})]})]}),y==="moderation"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Moderazione & Sicurezza"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Strumenti avanzati per gestire la community"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üõ°Ô∏è Auto-moderazione"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Filtra automaticamente contenuti inappropriati"})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5"})]})}),e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"‚úÖ Approvazione post"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"I nuovi post richiedono approvazione admin"})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5"})]})}),e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"‚è±Ô∏è Slow mode"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Limita: 1 messaggio ogni 30 secondi"})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5"})]})}),e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üîí Solo lettura"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Disabilita temporaneamente i nuovi post"})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5"})]})}),e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üîî Notifiche menzioni"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Abilita @menzioni utenti nei messaggi"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})}),e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üìé Allegati media"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Permetti upload immagini e video"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-rose-900/20 rounded-lg border border-rose-500/30",children:[e.jsx("h4",{className:"text-rose-400 font-semibold mb-3",children:"üö´ Filtro parole"}),e.jsx("textarea",{placeholder:"Inserisci parole vietate (una per riga)",className:"w-full h-24 bg-slate-700 border border-slate-600 rounded px-3 py-2 text-slate-100 placeholder:text-slate-400 focus:ring-2 focus:ring-rose-500 focus:outline-none resize-none"}),e.jsx("button",{className:"mt-3 px-4 py-2 bg-rose-600 hover:bg-rose-700 text-white rounded-lg font-medium transition-colors",children:"Salva Filtro"})]})]}),y==="members"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Membri Community"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Gestisci i livelli degli utenti manualmente"}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-cyan-600/20 to-blue-600/20 rounded-lg border border-cyan-500/30 mb-6",children:[e.jsx("p",{className:"text-cyan-300 font-medium mb-4",children:"üìä Statistiche Community"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Post totali"}),e.jsx("p",{className:"text-2xl font-bold text-slate-100",children:m.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Likes totali"}),e.jsx("p",{className:"text-2xl font-bold text-slate-100",children:m.reduce((t,s)=>t+(s.likesCount||0),0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Membri totali"}),e.jsx("p",{className:"text-2xl font-bold text-slate-100",children:se.length})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-slate-200",children:["Lista Utenti (",se.length,")"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Click su ‚úèÔ∏è per modificare il livello"})]}),a&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-600/20 to-pink-600/20 border-2 border-purple-500/40 rounded-lg mb-4",children:[e.jsx("p",{className:"text-xs text-purple-300 font-semibold mb-2",children:"üëë IL TUO PROFILO ADMIN"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(xe,{src:a.photoURL,alt:a.name||"Tu",totalLikes:a.totalLikes||0,size:48,showLevel:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h5",{className:"font-semibold text-slate-100",children:a.name||"Tu"}),e.jsx(te,{totalLikes:a.totalLikes||0,size:"sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:`text-sm ${p(a.totalLikes||0).textColor}`,children:p(a.totalLikes||0).name}),e.jsx("span",{className:"text-slate-500",children:"‚Ä¢"}),(w==null?void 0:w.userId)===n.uid?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",defaultValue:a.totalLikes||0,onChange:t=>$({...w,newLikes:t.target.value}),className:"w-24 px-2 py-1 bg-slate-700 border border-cyan-500 rounded text-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Likes"}),e.jsx("button",{onClick:()=>{gt(n.uid,w.newLikes||a.totalLikes),$(null)},className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium transition-colors",children:"‚úì Salva"}),e.jsx("button",{onClick:()=>$(null),className:"px-3 py-1 bg-slate-600 hover:bg-slate-500 text-white rounded text-sm font-medium transition-colors",children:"‚úï"})]}):e.jsxs("p",{className:"text-sm text-slate-400",children:[a.totalLikes||0," likes"]})]})]})]}),(w==null?void 0:w.userId)!==n.uid&&e.jsx("button",{onClick:()=>$({userId:n.uid,currentLikes:a.totalLikes||0,newLikes:a.totalLikes||0}),className:"p-2 hover:bg-purple-700/50 rounded text-cyan-400 transition-colors",title:"Modifica il tuo livello",children:"‚úèÔ∏è"})]})]}),se.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx(me,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"mb-2",children:"Nessun membro trovato nel database"}),e.jsx("p",{className:"text-xs",children:"Assicurati che gli utenti abbiano un profilo completo con nome"})]}):e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:se.sort((t,s)=>(s.totalLikes||0)-(t.totalLikes||0)).map(t=>{const s=p(t.totalLikes||0),l=(w==null?void 0:w.userId)===t.id;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-700/30 rounded-lg border border-slate-600 hover:border-slate-500 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(xe,{src:t.photoURL,alt:t.name||"Utente",totalLikes:t.totalLikes||0,size:48,showLevel:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h5",{className:"font-semibold text-slate-100",children:t.name||"Utente"}),e.jsx(te,{totalLikes:t.totalLikes||0,size:"sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:`text-sm ${s.textColor}`,children:s.name}),e.jsx("span",{className:"text-slate-500",children:"‚Ä¢"}),l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",defaultValue:t.totalLikes||0,onChange:o=>$({...w,newLikes:o.target.value}),className:"w-24 px-2 py-1 bg-slate-700 border border-cyan-500 rounded text-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Likes"}),e.jsx("button",{onClick:()=>{gt(t.id,w.newLikes||t.totalLikes),$(null)},className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium transition-colors",children:"‚úì Salva"}),e.jsx("button",{onClick:()=>$(null),className:"px-3 py-1 bg-slate-600 hover:bg-slate-500 text-white rounded text-sm font-medium transition-colors",children:"‚úï"})]}):e.jsxs("p",{className:"text-sm text-slate-400",children:[t.totalLikes||0," likes"]})]})]})]}),!l&&e.jsx("button",{onClick:()=>$({userId:t.id,currentLikes:t.totalLikes||0,newLikes:t.totalLikes||0}),className:"p-2 hover:bg-slate-600 rounded text-cyan-400 transition-colors",title:"Modifica livello utente",children:"‚úèÔ∏è"})]},t.id)})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-purple-900/20 border border-purple-500/30 rounded-lg",children:[e.jsx("p",{className:"text-purple-300 font-medium mb-2",children:"‚ÑπÔ∏è Informazioni sui Livelli"}),e.jsxs("div",{className:"text-slate-400 text-sm space-y-1",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("span",{className:"text-slate-300",children:"Livello 1 (Start):"})," 0-1 likes"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("span",{className:"text-green-400",children:"Livello 2 (Intermedio):"})," 2-15 likes ‚Üí Sblocca Group Calls"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("span",{className:"text-blue-400",children:"Livello 3 (Pro):"})," 16-49 likes ‚Üí Sblocca Live Room + Contenuti"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("span",{className:"text-yellow-400",children:"Livello 4 (Elite):"})," 50-99 likes ‚Üí Contenuti Premium"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("span",{className:"text-purple-400",children:"Livello 5 (MentalFit):"})," 100+ likes ‚Üí Tutti i contenuti + Bonus"]})]})]})]}),y==="onboarding"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Flow Onboarding"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Configura il processo di benvenuto per nuovi membri"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üé• Video Benvenuto Obbligatorio"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Il cliente deve guardare il video prima di procedere"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),e.jsx("input",{type:"url",defaultValue:"https://www.youtube.com/embed/dQw4w9WgXcQ",placeholder:"URL video YouTube/Vimeo...",className:"w-full px-3 py-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üì∏ Foto Profilo Obbligatoria"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Il cliente deve caricare una foto profilo"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})}),e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üí¨ Post Presentazione Obbligatorio"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Deve scrivere un messaggio di benvenuto con obiettivi"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})}),e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üìã Questionario Anamnesi"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Reindirizza a questionario dopo primo post"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]})}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-rose-600/20 to-pink-600/20 rounded-lg border border-rose-500/30",children:[e.jsx("p",{className:"text-rose-300 font-medium mb-2",children:"‚è±Ô∏è Ordine Steps"}),e.jsxs("ol",{className:"text-slate-300 text-sm space-y-1",children:[e.jsx("li",{children:"1. Video Benvenuto Maurizio"}),e.jsx("li",{children:"2. Upload Foto Profilo"}),e.jsx("li",{children:"3. Post Presentazione Community"}),e.jsx("li",{children:"4. Compilazione Questionario"}),e.jsx("li",{children:"5. Notifica a Maurizio ‚Üí Vocale personalizzato"}),e.jsx("li",{children:"6. Link prenotazione primo appuntamento"})]})]}),e.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-semibold transition-all shadow-lg",children:"Salva Configurazione Onboarding"})]})]}),y==="notifications"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Notifiche Automatiche"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Sistema di notifiche automatiche per coach e clienti"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg border border-purple-500/30 mb-6",children:[e.jsx("p",{className:"text-purple-300 font-medium mb-2",children:"üîî Notifiche Coach (Maurizio)"}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[e.jsx("p",{children:"‚Ä¢ Questionario compilato ‚Üí Invio vocale personalizzato in privato"}),e.jsx("p",{children:"‚Ä¢ Timer 48h per consegna piano allenamento/alimentazione"}),e.jsx("p",{children:"‚Ä¢ Nuovo membro iscritto ‚Üí Benvenuto community"})]})]}),e.jsxs("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üìù Notifica Questionario Completato"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Notifica istantanea a Maurizio quando cliente compila questionario"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),e.jsx("textarea",{placeholder:"Template messaggio notifica...",defaultValue:"üéØ Nuovo questionario completato da {cliente_nome}!\\n\\nRevisionalo e invia il vocale personalizzato.",className:"w-full px-3 py-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none",rows:3})]}),e.jsxs("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"‚è±Ô∏è Timer 48h Consegna Piano"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Notifica di reminder dopo primo appuntamento"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"number",defaultValue:48,className:"w-24 px-3 py-2 bg-slate-700 text-slate-100 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"}),e.jsxs("select",{className:"flex-1 px-3 py-2 bg-slate-700 text-slate-100 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{children:"Ore"}),e.jsx("option",{children:"Giorni"})]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"‚úÖ Notifica Cliente Piano Pronto"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Notifica automatica quando piano √® stato caricato"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),e.jsx("textarea",{placeholder:"Template messaggio notifica cliente...",defaultValue:'üéâ Il tuo piano di allenamento e alimentazione √® pronto!\\n\\nVai nella sezione "Schede" per visualizzarlo.',className:"w-full px-3 py-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none",rows:3})]}),e.jsxs("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-100 font-medium",children:"üî• Notifiche Incoraggiamento"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Messaggi automatici di motivazione basati su attivit√†"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5"})]}),e.jsxs("p",{className:"text-slate-400 text-sm",children:['‚Ä¢ 7 giorni senza attivit√† ‚Üí "Ti mancano! Torna in pista üí™"',e.jsx("br",{}),'‚Ä¢ 3 post consecutivi ‚Üí "Stai andando alla grande! üî•"',e.jsx("br",{}),'‚Ä¢ Nuovo livello raggiunto ‚Üí "Congratulazioni! Livello sbloccato! üèÜ"']})]}),e.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-lg font-semibold transition-all shadow-lg",children:"Salva Configurazione Notifiche"})]})]})]})]})]})})}),e.jsx(E,{children:Be&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[70] flex items-center justify-center p-4",onClick:()=>Z(!1),children:e.jsxs(h.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-slate-800 w-full max-w-md rounded-2xl border border-slate-700 p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-100",children:"Modifica Profilo"}),e.jsx("button",{onClick:()=>Z(!1),className:"p-2 rounded-lg hover:bg-slate-700",children:e.jsx(F,{size:18,className:"text-slate-400"})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-300 mb-1",children:"Nome"}),e.jsx("input",{value:re,onChange:t=>xt(t.target.value),maxLength:40,className:"w-full px-3 py-2 bg-slate-700 rounded-lg text-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Il tuo nome"}),e.jsxs("div",{className:"text-right text-[10px] text-slate-500 mt-1",children:[re.length,"/40"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-300 mb-2",children:"Foto Profilo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Ht||(a==null?void 0:a.photoURL)||"https://ui-avatars.com/api/?name="+((a==null?void 0:a.name)||"User"),alt:"preview",className:"w-20 h-20 rounded-full object-cover border-2 border-cyan-500"}),fe&&e.jsx("span",{className:"absolute -bottom-1 -right-1 bg-cyan-600 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:"Nuova"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Kt,className:"block w-full text-xs text-slate-300 file:mr-3 file:py-2 file:px-3 file:rounded-lg file:border-0 file:text-xs file:font-semibold file:bg-cyan-600 file:text-white hover:file:bg-cyan-500"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Consigliato: quadrata, max 2MB."})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:()=>Z(!1),className:"flex-1 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-200 text-sm font-medium",children:"Annulla"}),e.jsx("button",{onClick:Zt,className:"flex-1 py-2 rounded-lg bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white text-sm font-semibold",children:"Salva"})]})]})})}),e.jsx(E,{children:It&&a&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>Ue(!1),children:e.jsxs(h.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-slate-800 rounded-xl max-w-3xl w-full max-h-[80vh] overflow-hidden border border-slate-700 shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-slate-700 bg-gradient-to-r from-purple-600/20 to-pink-600/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ke,{className:"text-yellow-400",size:32}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"I Tuoi Progressi"}),e.jsx("p",{className:"text-slate-400",children:"Livello attuale e rewards sbloccati"})]})]}),e.jsx("button",{onClick:()=>Ue(!1),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(F,{size:24,className:"text-slate-400"})})]}),e.jsx("div",{className:"bg-slate-900/50 rounded-xl p-6 border border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(xe,{src:a.photoURL,alt:a.name,totalLikes:a.totalLikes||0,size:80,showLevel:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-2",children:a.name}),e.jsx(te,{totalLikes:a.totalLikes||0,size:"md"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{className:"text-slate-400",children:[a.totalLikes||0," Likes totali"]}),p(a.totalLikes||0).id<5&&e.jsxs("span",{className:"text-slate-400",children:["Prossimo livello: ",p(a.totalLikes||0).id===1?"2 likes":p(a.totalLikes||0).id===2?"16 likes":p(a.totalLikes||0).id===3?"50 likes":"100 likes"]})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-3",children:e.jsx("div",{className:`h-full rounded-full bg-gradient-to-r ${p(a.totalLikes||0).color}`,style:{width:`${p(a.totalLikes||0).id===1?(a.totalLikes||0)/2*100:p(a.totalLikes||0).id===2?(a.totalLikes||0)/16*100:p(a.totalLikes||0).id===3?(a.totalLikes||0)/50*100:p(a.totalLikes||0).id===4?(a.totalLikes||0)/100*100:100}%`}})})]})]})]})})]}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto max-h-[calc(80vh-280px)]",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-100 mb-4",children:"Rewards Disponibili"}),Object.entries(it).map(([t,s])=>{const l=p(a.totalLikes||0).id>=parseInt(t);return e.jsx("div",{className:`p-4 rounded-xl border transition-all ${l?"bg-gradient-to-r from-green-900/20 to-emerald-900/20 border-green-500/50":"bg-slate-700/30 border-slate-700"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`text-4xl p-3 rounded-lg ${l?"bg-green-600/20":"bg-slate-700/50 grayscale"}`,children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:`text-lg font-bold ${l?"text-green-400":"text-slate-400"}`,children:s.name}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${l?"bg-green-600 text-white":"bg-slate-700 text-slate-400"}`,children:["Livello ",t]})]}),e.jsx("p",{className:`text-sm ${l?"text-slate-300":"text-slate-500"}`,children:s.description}),l&&e.jsx("button",{className:"mt-3 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-semibold text-sm transition-all shadow-lg",children:"Accedi al Contenuto ‚Üí"}),!l&&e.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["üîí Sblocca raggiungendo il livello ",t]})]})]})},t)})]})]})})}),e.jsx(E,{children:pt&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-start justify-center p-4 pt-20",onClick:()=>qe(!1),children:e.jsxs(h.div,{initial:{scale:.9,y:-20},animate:{scale:1,y:0},exit:{scale:.9,y:-20},onClick:t=>t.stopPropagation(),className:"bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 w-full max-w-md max-h-[600px] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100",children:"Notifiche"}),e.jsx("button",{onClick:()=>qe(!1),className:"text-slate-400 hover:text-slate-200",children:e.jsx(F,{size:20})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[500px] p-4 space-y-3",children:ht.length===0?e.jsx("p",{className:"text-center text-slate-400 py-8",children:"Nessuna notifica"}):ht.map(t=>e.jsx("div",{className:`p-3 rounded-lg ${t.read?"bg-slate-700/30":"bg-cyan-600/20 border border-cyan-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[t.fromUserPhoto&&e.jsx("img",{src:t.fromUserPhoto,alt:"",className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-slate-200 text-sm",children:[t.type==="mention"&&`${t.fromUserName} ti ha menzionato in un ${t.commentType}`,t.type==="badge"&&`üéâ Hai sbloccato: ${t.badgeName}!`,t.type==="like"&&`${t.fromUserName} ha messo like al tuo post`,t.type==="comment"&&`${t.fromUserName} ha commentato il tuo post`]}),e.jsx("span",{className:"text-xs text-slate-500 mt-1 block",children:Rt(t.createdAt)})]})]})},t.id))})]})})}),e.jsx(E,{children:Ft&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>Oe(!1),children:e.jsxs(h.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-100 flex items-center gap-2",children:[e.jsx(We,{className:"text-yellow-400"}),"I Tuoi Badge"]}),e.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:[oe.length," / ",Object.keys(Ze).length," sbloccati"]})]}),e.jsx("button",{onClick:()=>Oe(!1),className:"text-slate-400 hover:text-slate-200",children:e.jsx(F,{size:24})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh] p-6 grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(Ze).map(([t,s])=>{const l=oe.includes(t);return e.jsxs("div",{className:`p-4 rounded-xl text-center transition-all ${l?"bg-gradient-to-br from-yellow-600/20 to-orange-600/20 border border-yellow-500/30":"bg-slate-700/30 opacity-50"}`,children:[e.jsx("div",{className:"text-4xl mb-2",children:s.icon}),e.jsx("h4",{className:"text-slate-100 font-bold text-sm mb-1",children:s.name}),e.jsx("p",{className:"text-slate-400 text-xs",children:s.description}),!l&&e.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"üîí Bloccato"})]},t)})})]})})}),e.jsx(E,{children:Te&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>$e(null),children:e.jsxs(h.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Segnala Contenuto"}),e.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Seleziona il motivo della segnalazione:"}),e.jsx("div",{className:"space-y-2 mb-6",children:["Spam","Contenuto inappropriato","Molestie","Altro"].map(t=>e.jsx("button",{onClick:()=>{os(Te.type,Te.id,t)},className:"w-full px-4 py-3 bg-slate-700/50 hover:bg-slate-700 text-slate-200 rounded-lg transition-all text-left",children:t},t))}),e.jsx("button",{onClick:()=>$e(null),className:"w-full px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-all",children:"Annulla"})]})})}),e.jsx(E,{children:_t&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>pe(!1),children:e.jsxs(h.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:t=>t.stopPropagation(),className:"bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 w-full max-w-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-100 mb-4 flex items-center gap-2",children:[e.jsx(Pt,{className:"text-cyan-400"}),"Crea Sondaggio"]}),e.jsx("input",{type:"text",placeholder:"Domanda del sondaggio...",value:v,onChange:t=>L(t.target.value),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 mb-4"}),e.jsx("div",{className:"space-y-2 mb-4",children:be.map((t,s)=>e.jsx("input",{type:"text",placeholder:`Opzione ${s+1}`,value:t,onChange:l=>{const o=[...be];o[s]=l.target.value,ge(o)},className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"},s))}),e.jsxs("button",{onClick:()=>ge([...be,""]),className:"mb-4 text-cyan-400 hover:text-cyan-300 text-sm flex items-center gap-1",children:[e.jsx(Mt,{size:16}),"Aggiungi opzione"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{cs(v,be)},className:"flex-1 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-lg font-semibold transition-all",children:"Pubblica Sondaggio"}),e.jsx("button",{onClick:()=>{pe(!1),L(""),ge(["",""])},className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-all",children:"Annulla"})]})]})})}),e.jsx(E,{children:R&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[80] flex items-center justify-center p-4",onClick:()=>z(null),children:e.jsxs(h.div,{initial:{scale:.9,y:-20},animate:{scale:1,y:0},exit:{scale:.9,y:-20},onClick:t=>t.stopPropagation(),className:`bg-slate-800 rounded-2xl shadow-2xl border w-full max-w-md p-6 ${R.type==="success"?"border-green-500/50":"border-rose-600/50"}`,children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${R.type==="success"?"bg-green-600/20":"bg-rose-600/20"}`,children:R.type==="success"?e.jsx(Xe,{className:"text-green-400",size:28}):e.jsx(F,{className:"text-rose-400",size:28})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-2",children:R.title}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:R.message}),R.details&&e.jsx("div",{className:"mt-3 p-3 bg-slate-700/50 rounded-lg border border-slate-600",children:e.jsx("p",{className:"text-xs text-slate-400",children:R.details})})]})]}),e.jsx("button",{onClick:()=>z(null),className:`w-full px-4 py-2 rounded-lg font-semibold transition-all ${R.type==="success"?"bg-green-600 hover:bg-green-700":"bg-slate-600 hover:bg-slate-500"} text-white`,children:"OK"})]})})}),e.jsx(E,{children:Re&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[70] flex items-center justify-center p-4",onClick:()=>he(null),children:e.jsxs(h.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:t=>t.stopPropagation(),className:"bg-slate-800 rounded-2xl shadow-2xl border border-rose-600/50 w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-rose-600/20 flex items-center justify-center",children:e.jsx(Et,{className:"text-rose-400",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100",children:"Elimina Canale"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Questa azione √® irreversibile"})]})]}),e.jsxs("div",{className:"bg-rose-900/20 border border-rose-600/30 rounded-lg p-4 mb-6",children:[e.jsxs("p",{className:"text-slate-200 mb-2",children:["Sei sicuro di voler eliminare il canale ",e.jsx("span",{className:"font-bold text-rose-400",children:(Ct=_[Re])==null?void 0:Ct.name}),"?"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Tutti i post e i messaggi in questo canale rimarranno nel database ma non saranno pi√π accessibili dall'interfaccia."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>he(null),className:"flex-1 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg font-medium transition-all",children:"Annulla"}),e.jsxs("button",{onClick:()=>ss(Re),className:"flex-1 px-4 py-2 bg-gradient-to-r from-rose-600 to-red-600 hover:from-rose-700 hover:to-red-700 text-white rounded-lg font-semibold transition-all shadow-lg",children:[e.jsx(Et,{size:16,className:"inline mr-2"}),"Elimina"]})]})]})})})]})}export{ma as default};
