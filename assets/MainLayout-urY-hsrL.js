import{k as v,r as o,j as e,q as m,O as F,h as E,A as N,C as H,s as T,R as q,t as f,v as L,U as p,M as y,F as d,B as k,S as I,w as P,x as S,y as G}from"./.pnpm-C04Ba0Xq.js";import{i as O}from"./superadmin-B-ShD6zK.js";import{a as A}from"./index-DdCoIfwr.js";const _=()=>{const[i,r]=o.useState(!1);return o.useEffect(()=>{if(i)return;const l=document.createElement("div");l.className="stars",document.body.appendChild(l);for(let t=0;t<25;t++){const s=document.createElement("div");s.className="star";const c=t%5===0?1:t%3===0?2:3;s.style.setProperty("--star-width",`${c}px`),s.style.setProperty("--top-offset",`${Math.random()*100}vh`),s.style.setProperty("--fall-duration",`${10+Math.random()*10}s`),s.style.setProperty("--fall-delay",`${Math.random()*8}s`),t%5===0&&s.classList.add("gold"),l.appendChild(s)}r(!0)},[i]),null},M=[{to:"/",icon:e.jsx(f,{size:18}),label:"Dashboard",isCentral:!0},{to:"/clients",icon:e.jsx(p,{size:18}),label:"Clienti"},{to:"/chat",icon:e.jsx(y,{size:18}),label:"Chat"},{to:"/community",icon:e.jsx(P,{size:18}),label:"Community"},{to:"/updates",icon:e.jsx(k,{size:18}),label:"NovitÃ "},{to:"/collaboratori",icon:e.jsx(p,{size:18}),label:"Collaboratori"},{to:"/guide-manager",icon:e.jsx(d,{size:18}),label:"Guide & Lead"},{to:"/admin/dipendenti",icon:e.jsx(p,{size:18}),label:"Dipendenti"},{to:"/calendar",icon:e.jsx(L,{size:18}),label:"Calendario"},{to:"/statistiche",icon:e.jsx(S,{size:18}),label:"Statistiche"},{to:"/analytics",icon:e.jsx(S,{size:18}),label:"Analytics"},{to:"/notifications",icon:e.jsx(G,{size:18}),label:"Notifiche"},{to:"/alimentazione-allenamento",icon:e.jsx(d,{size:18}),label:"Schede"},{to:"/superadmin",icon:e.jsx(I,{size:18}),label:"ðŸ‘‘ SuperAdmin",isSuperAdmin:!0}],$=[{to:"/coach",icon:e.jsx(f,{size:18}),label:"Dashboard",isCentral:!0},{to:"/coach/clients",icon:e.jsx(p,{size:18}),label:"Clienti"},{to:"/coach/chat",icon:e.jsx(y,{size:18}),label:"Chat"},{to:"/coach/anamnesi",icon:e.jsx(d,{size:18}),label:"Anamnesi"},{to:"/coach/schede",icon:e.jsx(d,{size:18}),label:"Schede"},{to:"/coach/updates",icon:e.jsx(k,{size:18}),label:"Aggiornamenti"},{to:"/coach/settings",icon:e.jsx(I,{size:18}),label:"Impostazioni"}],B=[{to:"/client/dashboard",icon:e.jsx(f,{size:18}),label:"Dashboard",isCentral:!0},{to:"/client/chat",icon:e.jsx(y,{size:18}),label:"Chat"},{to:"/client/community",icon:e.jsx(P,{size:18}),label:"Community"},{to:"/client/anamnesi",icon:e.jsx(d,{size:18}),label:"Anamnesi"},{to:"/client/checks",icon:e.jsx(d,{size:18}),label:"Check"},{to:"/client/payments",icon:e.jsx(d,{size:18}),label:"Pagamenti"}],D=[{to:"/collaboratore/dashboard",icon:e.jsx(f,{size:18}),label:"Dashboard",isCentral:!0},{to:"/collaboratore/calendar",icon:e.jsx(L,{size:18}),label:"Calendario"}],J=["/login","/register","/reset-password"],K=({isCoach:i,isCollaboratore:r,isClient:l,userIsSuperAdmin:t})=>{const s=v(),c=E(),x=r?D:i?$:l?B:M;return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur-2xl border-t border-white/10 z-50 md:hidden safe-area-bottom",children:e.jsx("div",{className:"px-2 py-2",children:e.jsx("div",{className:"flex gap-1.5 overflow-x-auto scrollbar-hidden snap-x snap-mandatory pb-1",children:x.filter(a=>!a.isSuperAdmin||t).map(a=>e.jsxs(m.button,{onClick:()=>c(a.to),className:`flex flex-col items-center justify-center min-w-[56px] max-w-[64px] h-14 px-2 rounded-xl transition-all snap-center flex-shrink-0 ${s.pathname===a.to||s.pathname.startsWith(a.to+"/")?"text-rose-500 bg-rose-600/10 border border-rose-600/30":"text-slate-400 hover:text-rose-400"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("div",{className:"flex-shrink-0",children:q.cloneElement(a.icon,{size:18})}),e.jsx("span",{className:"text-[9px] mt-0.5 truncate w-full text-center leading-tight",children:a.label})]},a.to))})})})},Q=({isCoach:i,isCollaboratore:r,isClient:l,isCollapsed:t,setIsCollapsed:s,userIsSuperAdmin:c})=>{const x=E(),a=v(),j=r?D:i?$:l?B:M;return e.jsxs(m.aside,{initial:!1,animate:{width:t?64:240},className:"hidden md:flex fixed left-0 top-0 h-screen bg-slate-900/90 backdrop-blur-xl border-r border-white/10 z-40 flex-col transition-all duration-300",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-white/5",children:[e.jsx(N,{children:!t&&e.jsx(m.h1,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xl font-bold text-slate-100",children:"FitFlow Pro"})}),e.jsx("button",{onClick:()=>s(!t),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors text-slate-400",children:t?e.jsx(H,{size:18}):e.jsx(T,{size:18})})]}),e.jsx("nav",{className:"flex-1 p-2 space-y-1 overflow-y-auto",children:j.filter(n=>!n.isSuperAdmin||c).map(n=>e.jsxs(m.button,{onClick:u=>{u.preventDefault(),u.stopPropagation(),x(n.to)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all ${a.pathname===n.to||a.pathname.startsWith(n.to+"/")?"bg-rose-600/20 text-rose-400 border border-rose-600/30":"text-slate-300 hover:bg-white/5 hover:text-rose-400"}`,whileHover:{x:4},whileTap:{scale:.98},children:[n.icon,e.jsx(N,{children:!t&&e.jsx(m.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"overflow-hidden whitespace-nowrap",children:n.label})})]},n.to))})]})};function Z(){const i=v(),[r,l]=o.useState(!1),[t,s]=o.useState(!1),[c,x]=o.useState(!1),[a,j]=o.useState(!1),[n,u]=o.useState(!1),[z,w]=o.useState(!1),g=J.includes(i.pathname),C=!g,R=!g&&n;return o.useEffect(()=>{l(i.pathname.startsWith("/coach")),s(i.pathname.startsWith("/collaboratore")),x(i.pathname.startsWith("/client"))},[i.pathname]),o.useEffect(()=>{const h=async()=>{const b=A.currentUser;if(b){const W=await O(b.uid);w(W)}else w(!1)};h();const U=A.onAuthStateChanged(b=>{b?h():w(!1)});return()=>U()},[]),o.useEffect(()=>{const h=()=>u(window.innerWidth<768);return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),e.jsxs("div",{className:"overflow-x-hidden w-full",children:[e.jsx("div",{className:"starry-background"}),e.jsx(_,{}),e.jsxs("div",{className:"relative min-h-screen flex w-full",children:[C&&e.jsx(Q,{isCoach:r,isCollaboratore:t,isClient:c,isCollapsed:a,setIsCollapsed:j,userIsSuperAdmin:z}),e.jsxs("div",{className:`flex-1 transition-all duration-300 ${C?a?"md:ml-16":"md:ml-60":"ml-0"}`,children:[e.jsx("main",{className:"min-h-screen p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto w-full",children:e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full",children:e.jsx(F,{})},i.pathname)})}),R&&e.jsx(K,{isCoach:r,isCollaboratore:t,isClient:c,userIsSuperAdmin:z})]}),e.jsx("style",{children:`
          .scrollbar-hidden {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
          .scrollbar-hidden::-webkit-scrollbar {
            display: none;
          }
        `})]})]})}export{Z as default};
