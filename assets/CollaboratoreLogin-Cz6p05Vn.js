import{r as s,j as e}from"./react-CrXOBDSJ.js";import{a as v}from"./firebase-CCo3Hvf0.js";import{y as S,z as E}from"./@firebase-Dy5qmm0I.js";import{a as r,d as z}from"./index-s4mEkYh8.js";import{a as C}from"./react-router-BxpCmtJ-.js";import{m as b}from"./framer-motion-BAPjnw1b.js";import{d as A,L,E as k,e as P,K as D}from"./lucide-react-OWEKwkjs.js";import"./core-js-ChGsxLo2.js";import"./tslib-BGVaTf34.js";import"./idb-Bn1DMRyg.js";import"./react-dom-BpmKF3Ga.js";import"./scheduler-DYLXRpC5.js";import"./react-router-dom-9rcY47vU.js";import"./@remix-run-CjG9tKj3.js";import"./jspdf-7Jyqi_bl.js";import"./@babel-Cvov1XSu.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./motion-dom-C8PdgYBP.js";import"./motion-utils-DBsP9okC.js";function te(){const l=C(),[n,f]=s.useState(""),[c,h]=s.useState(""),[m,d]=s.useState(""),[a,u]=s.useState(!1),[g,y]=s.useState(!0),[i,j]=s.useState(!1);s.useEffect(()=>{const t=r.onAuthStateChanged(async o=>{if(o)try{const p=S(z,"collaboratori",o.uid),x=await E(p);if(x.exists()){const N=x.data();l(N.firstLogin?"/collaboratore/first-access":"/collaboratore/dashboard")}else await r.signOut()}catch{await r.signOut()}y(!1)});return()=>t()},[l]);const w=async t=>{t.preventDefault(),d(""),u(!0);try{await v(r,n.trim(),c.trim())}catch{d("Email o password errate."),u(!1)}};return g?e.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen bg-slate-900",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-rose-500"}),e.jsx("p",{className:"mt-4 text-sm",children:"Verifica autenticazione..."})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-zinc-950 to-zinc-900",children:e.jsxs(b.div,{className:"w-full max-w-md bg-slate-800/60 backdrop-blur-sm rounded-2xl p-8 space-y-8 border border-white/10",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-50",children:"Login Collaboratore"}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Accedi per compilare i tuoi report giornalieri."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(A,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"email",value:n,onChange:t=>f(t.target.value),required:!0,placeholder:"Email",className:"w-full p-3 pl-10 bg-slate-800/70 border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500 text-slate-200",disabled:a})]}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:i?"text":"password",value:c,onChange:t=>h(t.target.value),required:!0,placeholder:"Password",className:"w-full p-3 pl-10 pr-10 bg-slate-800/70 border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500 text-slate-200",disabled:a}),e.jsx("button",{type:"button",onClick:()=>j(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400",children:i?e.jsx(k,{size:18}):e.jsx(P,{size:18})})]}),m&&e.jsx("p",{className:"text-red-500 text-sm text-center",children:m}),e.jsxs(b.button,{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 px-4 py-3 font-bold text-white bg-cyan-600 rounded-lg hover:bg-cyan-700 disabled:bg-cyan-900",whileHover:{scale:a?1:1.02},whileTap:{scale:a?1:.98},children:[e.jsx(D,{size:18}),a?"Accesso...":"Accedi"]})]})]})})}export{te as default};
