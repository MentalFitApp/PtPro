import{r as x,e as h,f as b,j as e,q as j,an as k}from"./.pnpm-C04Ba0Xq.js";import{a as D,d as g}from"./index-DdCoIfwr.js";import{e as q}from"./pdfExport-BSG699br.js";const z=["Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],P=()=>{var o,m;const[N,u]=x.useState(!0),[l,v]=x.useState(null),[c,p]=x.useState("Lunedì"),[f,y]=x.useState("");x.useEffect(()=>{w()},[]);const w=async()=>{try{const s=D.currentUser;if(!s)return;const a=h(g,"clients",s.uid),d=await b(a);d.exists()&&y(d.data().name||"N/D");const t=h(g,"schede_alimentazione",s.uid),i=await b(t);i.exists()&&v(i.data())}catch(s){console.error("Errore caricamento:",s)}u(!1)},F=s=>{var d;let a={kcal:0,proteine:0,carboidrati:0,grassi:0};return(d=s.alimenti)==null||d.forEach(t=>{const i=t.quantita/100;a.kcal+=(t.kcal||0)*i,a.proteine+=(t.proteine||0)*i,a.carboidrati+=(t.carboidrati||0)*i,a.grassi+=(t.grassi||0)*i}),a},S=()=>{if(!l||!l.giorni||!l.giorni[c])return{kcal:0,proteine:0,carboidrati:0,grassi:0,quantita:0};const s=l.giorni[c].pasti||[];let a={kcal:0,proteine:0,carboidrati:0,grassi:0,quantita:0};return s.forEach(d=>{var t;(t=d.alimenti)==null||t.forEach(i=>{const r=i.quantita/100;a.kcal+=(i.kcal||0)*r,a.proteine+=(i.proteine||0)*r,a.carboidrati+=(i.carboidrati||0)*r,a.grassi+=(i.grassi||0)*r,a.quantita+=i.quantita||0})}),a};if(N)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-emerald-500"})});if(!l)return e.jsx("div",{className:"min-h-screen bg-slate-900 p-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-8 text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-100 mb-2",children:"Scheda Alimentazione"}),e.jsx("p",{className:"text-slate-400",children:"Al momento non hai una scheda alimentazione attiva."})]})})});const n=S();return e.jsx("div",{className:"min-h-screen bg-slate-900 px-4 pt-8 pb-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[e.jsxs(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-100",children:"Piano Alimentazione"}),e.jsxs("button",{onClick:()=>q(l,f),className:"flex items-center gap-2 px-3 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(k,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"PDF"})]})]}),l.obiettivo&&e.jsxs("p",{className:"text-emerald-400 text-sm md:text-base",children:["Obiettivo: ",l.obiettivo]}),l.note&&e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:l.note})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-3",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:z.map(s=>e.jsx("button",{onClick:()=>p(s),className:`px-3 py-2 rounded-lg font-medium transition-colors whitespace-nowrap text-sm ${c===s?"bg-emerald-600 text-white":"bg-slate-700 text-slate-300"}`,children:s},s))})}),(m=(o=l.giorni[c])==null?void 0:o.pasti)==null?void 0:m.map((s,a)=>{if(!s.alimenti||s.alimenti.length===0)return null;const d=F(s);return e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-3",children:s.nome}),e.jsx("div",{className:"space-y-2 mb-3",children:s.alimenti.map((t,i)=>{const r=t.quantita/100;return e.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"font-medium text-slate-200",children:t.nome}),e.jsxs("span",{className:"text-slate-400 text-sm",children:[t.quantita,"g"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-500",children:"Kcal"}),e.jsx("div",{className:"text-slate-300",children:((t.kcal||0)*r).toFixed(0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-500",children:"Prot"}),e.jsxs("div",{className:"text-slate-300",children:[((t.proteine||0)*r).toFixed(1),"g"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-500",children:"Carb"}),e.jsxs("div",{className:"text-slate-300",children:[((t.carboidrati||0)*r).toFixed(1),"g"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-500",children:"Grassi"}),e.jsxs("div",{className:"text-slate-300",children:[((t.grassi||0)*r).toFixed(1),"g"]})]})]})]},i)})}),e.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-600/30 rounded-lg p-3",children:[e.jsxs("div",{className:"text-xs text-emerald-400 mb-1",children:["Totale ",s.nome]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-emerald-300 font-semibold",children:d.kcal.toFixed(0)}),e.jsx("div",{className:"text-emerald-400 text-xs",children:"Kcal"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-emerald-300 font-semibold",children:[d.proteine.toFixed(1),"g"]}),e.jsx("div",{className:"text-emerald-400 text-xs",children:"Prot"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-emerald-300 font-semibold",children:[d.carboidrati.toFixed(1),"g"]}),e.jsx("div",{className:"text-emerald-400 text-xs",children:"Carb"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-emerald-300 font-semibold",children:[d.grassi.toFixed(1),"g"]}),e.jsx("div",{className:"text-emerald-400 text-xs",children:"Grassi"})]})]})]})]},a)}),e.jsxs("div",{className:"bg-emerald-900/30 border-2 border-emerald-600/50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-emerald-300 mb-3",children:["Totali Giornalieri - ",c]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-emerald-400 text-xs mb-1",children:"Quantità"}),e.jsxs("div",{className:"text-emerald-300 font-bold text-lg",children:[n.quantita.toFixed(0),"g"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-emerald-400 text-xs mb-1",children:"Kcal"}),e.jsx("div",{className:"text-emerald-300 font-bold text-lg",children:n.kcal.toFixed(0)})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-emerald-400 text-xs mb-1",children:"Proteine"}),e.jsxs("div",{className:"text-emerald-300 font-bold text-lg",children:[n.proteine.toFixed(1),"g"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-emerald-400 text-xs mb-1",children:"Carboidrati"}),e.jsxs("div",{className:"text-emerald-300 font-bold text-lg",children:[n.carboidrati.toFixed(1),"g"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-emerald-400 text-xs mb-1",children:"Grassi"}),e.jsxs("div",{className:"text-emerald-300 font-bold text-lg",children:[n.grassi.toFixed(1),"g"]})]})]})]}),l.integrazione&&e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-2",children:"Integrazione"}),e.jsx("p",{className:"text-slate-300 text-sm whitespace-pre-wrap",children:l.integrazione})]})]})})};export{P as default};
