import{r as l,j as e}from"./react-FJB7Hj_2.js";import{b as m,O as j,a as v}from"./react-router-DF4cN2Hx.js";import{A as g,m as c}from"./framer-motion-Bo7GrDk8.js";import{X as u,M as y,L as h,U as x,a as f,F as z,B as p}from"./lucide-react-BYK_Rxhn.js";import"./papaparse-BHXrM2Hc.js";import"./@remix-run-CjG9tKj3.js";import"./motion-dom-C8PdgYBP.js";import"./motion-utils-DBsP9okC.js";const N=()=>{const n=l.useRef(null),a=l.useRef(!1);return l.useEffect(()=>{if(a.current)return;let s=document.querySelector(".stars");if(s)n.current=s;else{s=document.createElement("div"),s.className="stars";const i=document.querySelector(".starry-background");if(i)i.appendChild(s);else{const t=document.createElement("div");t.className="starry-background",document.body.appendChild(t),t.appendChild(s)}n.current=s}for(let i=0;i<50;i++){const t=document.createElement("div");t.className="star",t.style.setProperty("--top-offset",`${Math.random()*100}vh`),t.style.setProperty("--fall-duration",`${8+Math.random()*6}s`),t.style.setProperty("--fall-delay",`${Math.random()*5}s`),t.style.setProperty("--star-width",`${1+Math.random()*2}px`),n.current.appendChild(t)}a.current=!0},[]),null},w=[{to:"/",icon:e.jsx(h,{size:18}),label:"Dashboard"},{to:"/clients",icon:e.jsx(x,{size:18}),label:"Clienti"},{to:"/chat",icon:e.jsx(f,{size:18}),label:"Chat"},{to:"/updates",icon:e.jsx(p,{size:18}),label:"NovitÃ "}],C=[{to:"/coach-dashboard",icon:e.jsx(h,{size:18}),label:"Dashboard"},{to:"/coach/clients",icon:e.jsx(x,{size:18}),label:"Clienti"},{to:"/coach/chat",icon:e.jsx(f,{size:18}),label:"Chat"},{to:"/coach/anamnesi",icon:e.jsx(z,{size:18}),label:"Anamnesi"},{to:"/coach/updates",icon:e.jsx(p,{size:18}),label:"Aggiornamenti"}],k=({to:n,icon:a,label:s,onClick:i})=>{const t=m(),o=t.pathname===n||t.pathname.startsWith(n+"/");return e.jsxs("button",{onClick:i,className:`flex items-center gap-3 w-full p-2.5 rounded-lg text-sm transition-colors ${o?"bg-rose-600/10 text-rose-500 font-semibold":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[a,e.jsx("span",{children:s})]})},d=({onLinkClick:n,onClose:a,isCoach:s})=>{const i=v(),t=s?C:w;return e.jsxs("aside",{className:"w-full h-full bg-zinc-950/60 backdrop-blur-xl p-4 flex flex-col gradient-border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold px-2 text-slate-100",children:"FitFlow Pro"}),e.jsx("button",{onClick:a,className:"md:hidden text-slate-200 p-2",children:e.jsx(u,{size:24})})]}),e.jsx("nav",{className:"flex flex-col gap-2",children:t.map(o=>e.jsx(k,{to:o.to,icon:o.icon,label:o.label,onClick:()=>{i(o.to),n&&n(),a&&a()}},o.to))})]})};function S(){const[n,a]=l.useState(!1),s=m(),i=l.useRef(null),[t,o]=l.useState(!1);return l.useEffect(()=>{o(s.pathname.startsWith("/coach"))},[s.pathname]),l.useEffect(()=>{a(!1)},[s.pathname,s.search]),l.useEffect(()=>{const r=b=>{i.current&&!i.current.contains(b.target)&&a(!1)};return n&&setTimeout(()=>{document.addEventListener("mousedown",r)},100),()=>{document.removeEventListener("mousedown",r)}},[n]),l.useEffect(()=>{const r=()=>{window.innerWidth>=768&&a(!1)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e.jsxs("div",{className:"relative min-h-screen flex flex-col md:flex-row",children:[e.jsx(N,{}),e.jsx("div",{className:"hidden md:flex md:fixed h-screen z-20",children:e.jsx(d,{onLinkClick:()=>a(!1),isCoach:t})}),e.jsx(g,{children:n&&e.jsx(c.div,{ref:i,initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:400,damping:40},className:"fixed top-0 left-0 h-full w-64 z-50 md:hidden bg-zinc-950/80 backdrop-blur-lg",children:e.jsx(d,{onLinkClick:()=>a(!1),onClose:()=>a(!1),isCoach:t})})}),e.jsxs("div",{className:"flex-1 w-full md:ml-60",children:[e.jsx("header",{className:"md:hidden sticky top-0 bg-zinc-950/70 backdrop-blur-lg h-16 flex items-center justify-between px-4 border-b border-white/10 z-40",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>a(!n),className:"text-slate-200",children:n?e.jsx(u,{size:24}):e.jsx(y,{size:24})}),e.jsx("h2",{className:"text-lg font-bold text-slate-100",children:"FitFlow Pro"})]})}),e.jsx("main",{className:"p-4 sm:p-6 lg:p-8 pt-16 md:pt-0 min-h-[calc(100vh-4rem)]",children:e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:e.jsx(j,{})},s.pathname)})]})]})}export{S as default};
