import{d as u}from"./index-DdCoIfwr.js";import{e as n,f as i,a6 as t,bp as c,u as m,bq as d}from"./.pnpm-C04Ba0Xq.js";async function o(s){if(!s)return!1;try{const r=n(u,"roles","superadmins"),e=await i(r);return e.exists()?(e.data().uids||[]).includes(s):!1}catch(r){return console.error("Error checking superadmin status:",r),!1}}async function l(s,r){try{if(!await o(s))return{success:!1,message:"Solo un superadmin può assegnare questo ruolo"};const a=n(u,"roles","superadmins");return await t(a,{uids:c(r),updatedAt:new Date,updatedBy:s},{merge:!0}),{success:!0,message:"Superadmin aggiunto con successo"}}catch(e){return console.error("Error adding superadmin:",e),{success:!1,message:e.message}}}async function g(s,r){try{if(!await o(s))return{success:!1,message:"Solo un superadmin può revocare questo ruolo"};if(s===r)return{success:!1,message:"Non puoi rimuovere te stesso come superadmin"};const a=n(u,"roles","superadmins");return await m(a,{uids:d(r),updatedAt:new Date,updatedBy:s}),{success:!0,message:"Superadmin rimosso con successo"}}catch(e){return console.error("Error removing superadmin:",e),{success:!1,message:e.message}}}export{l as a,o as i,g as r};
