import{r as s,j as e}from"./react-CrXOBDSJ.js";import{H as xe,I as He,R as he,G as I,D as _,y as v,z as _e,A as ue,K as W,B as We,P as qe,U as Ke,O as Qe}from"./@firebase-DgmhcEwT.js";import{u as Ve}from"./firebase-Drn0uAfr.js";import{a as p,d as w,s as Xe}from"./index-DGG2IrXP.js";import{N as Ze}from"./NotificationPanel-DngHzKSJ.js";import{C as Je,c as et,b as tt,f as at,p as st,d as rt,e as lt}from"./chart.js-m_wzuIQ6.js";import{B as ot}from"./react-chartjs-2-DgEolIMQ.js";import{a as nt}from"./react-router-BxpCmtJ-.js";import{m,A as P}from"./framer-motion-BAPjnw1b.js";import{j as it,x as ct,a as dt,C as mt,F as xt,G as ht,f as ut,c as pt,X as T,I as q,a4 as gt,p as bt}from"./lucide-react-CCY59hBS.js";import"./core-js-ChGsxLo2.js";import"./idb-Bn1DMRyg.js";import"./tslib-BGVaTf34.js";import"./react-dom-BpmKF3Ga.js";import"./scheduler-DYLXRpC5.js";import"./react-router-dom-9rcY47vU.js";import"./@remix-run-CjG9tKj3.js";import"./jspdf-7Jyqi_bl.js";import"./@babel-Cvov1XSu.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./@kurkle-D8fDXNIl.js";import"./motion-dom-C8PdgYBP.js";import"./motion-utils-DBsP9okC.js";Je.register(et,tt,at,st,rt,lt);function _t(){var de;const $=nt(),[h,K]=s.useState(null),[A,pe]=s.useState([]),[j,C]=s.useState({outreachTotale:"",followUpsTotali:"",risposte:"",callPrenotate:""}),[r,N]=s.useState({name:"",source:"",number:"",email:"",note:"",dataPrenotazione:"",oraPrenotazione:""}),[u,D]=s.useState({name:"",photoURL:"",gender:"M"}),[ge,Q]=s.useState(""),[R,V]=s.useState(""),[X,Z]=s.useState(""),[be,O]=s.useState(!0),[J,g]=s.useState(""),[ee,b]=s.useState(""),[fe,B]=s.useState(!1),[we,G]=s.useState(!1),[je,te]=s.useState(!1),[Ne,ae]=s.useState(!1),[ye,Y]=s.useState(!1),[L,se]=s.useState([]),[S,re]=s.useState(null),[z,E]=s.useState(null),[ve,Se]=s.useState(""),[ke,le]=s.useState(!1),[ft,Ce]=s.useState(!1),[oe,ne]=s.useState(0);s.useEffect(()=>{const t=()=>{const n=new Date,l=new Date(n);l.setHours(24,0,0,0);const i=l-n,o=Math.floor(i/36e5),c=Math.floor(i%36e5/6e4),d=Math.floor(i%6e4/1e3);Se(`${o}h ${c}m ${d}s`)};t();const a=setInterval(t,1e3);return()=>clearInterval(a)},[]),s.useEffect(()=>{if(!p.currentUser){$("/login");return}(async()=>{var l;try{const i=v(w,"collaboratori",p.currentUser.uid),o=await _e(i);if(!o.exists()){g("Account non trovato."),O(!1);return}const c=o.data();K(c),D({name:c.name||"",photoURL:c.photoURL||"",gender:c.gender||"M"}),Ce(c.role==="Admin");const d=new Date,k=d.getFullYear(),y=String(d.getMonth()+1).padStart(2,"0"),x=String(d.getDate()).padStart(2,"0"),U=`${k}-${y}-${x}`,f=(l=c.dailyReports)==null?void 0:l.find(F=>F.date===U);re(f||null),f&&f.tracker&&C({outreachTotale:f.tracker.outreachTotale||"",followUpsTotali:f.tracker.followUpsTotali||"",risposte:f.tracker.risposte||"",callPrenotate:f.tracker.callPrenotate||""}),O(!1)}catch{g("Errore nel caricamento dei dati."),O(!1)}})();const a=xe(I(w,"leads"),he("collaboratoreId","==",p.currentUser.uid),He("timestamp","desc")),n=_(a,l=>{const i=l.docs.map(o=>({id:o.id,...o.data()}));se(i)},l=>{console.error("Errore lettura leads:",l),g("Errore lettura leads.")});return()=>n()},[$]),s.useEffect(()=>{const t=xe(I(w,"collaboratori"),he("role","==","Setter")),a=_(t,n=>{const l=n.docs.map(i=>({id:i.id,...i.data()}));pe(l)});return()=>a()},[]),s.useEffect(()=>{if(!p.currentUser)return;const t=v(w,"collaboratori",p.currentUser.uid),a=_(t,n=>{var l;if(n.exists()){const i=n.data(),o=new Date,c=o.getFullYear(),d=String(o.getMonth()+1).padStart(2,"0"),k=String(o.getDate()).padStart(2,"0"),y=`${c}-${d}-${k}`,x=(l=i.dailyReports)==null?void 0:l.find(U=>U.date===y);re(x||null),x&&x.tracker&&C({outreachTotale:x.tracker.outreachTotale||"",followUpsTotali:x.tracker.followUpsTotali||"",risposte:x.tracker.risposte||"",callPrenotate:x.tracker.callPrenotate||""})}});return()=>a()},[]);const Pe=async()=>{try{await ue(v(w,"collaboratori",p.currentUser.uid),{name:u.name,gender:u.gender}),K({...h,name:u.name,gender:u.gender}),b("Profilo aggiornato!"),setTimeout(()=>b(""),3e3),Y(!1)}catch{g("Errore aggiornamento profilo.")}},Te=async()=>{g(""),b("");try{const t=v(w,"collaboratori",p.currentUser.uid),a=new Date,n=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0"),o=`${n}-${l}-${i}`,c=((h==null?void 0:h.dailyReports)||[]).filter(d=>d.date!==o);c.push({date:o,tracker:j}),await W(t,{dailyReports:c},{merge:!0}),b("Tracker salvato!"),setTimeout(()=>b(""),3e3),B(!1)}catch(t){console.error("Errore Tracker:",t),g("Errore salvataggio Tracker.")}},De=async()=>{if(!r.name||!r.number||!r.dataPrenotazione||!r.oraPrenotazione){g("Nome, numero, data e ora prenotazione sono obbligatori.");return}try{const t=v(I(w,"leads")),a=t.id;await W(t,{...r,collaboratoreId:p.currentUser.uid,collaboratoreNome:h.name||h.email.split("@")[0],chiuso:!1,showUp:!1,timestamp:new Date}),await W(v(I(w,"calendarEvents")),{title:`ðŸ“ž ${r.name}`,date:r.dataPrenotazione,time:r.oraPrenotazione,type:"lead",durationMinutes:30,leadId:a,leadData:{name:r.name,number:r.number,email:r.email||"",source:r.source||"",note:r.note||""},createdBy:p.currentUser.uid,participants:[p.currentUser.uid],timestamp:new Date}),b("Lead salvato e aggiunto al calendario!"),setTimeout(()=>b(""),3e3),N({name:"",source:"",number:"",email:"",note:"",dataPrenotazione:"",oraPrenotazione:""}),G(!1)}catch(t){console.error("Errore salvataggio lead:",t),g("Errore salvataggio lead.")}},ze=async()=>{if(z)try{await We(v(w,"leads",z.id)),se(t=>t.filter(a=>a.id!==z.id)),b("Lead eliminato!"),setTimeout(()=>b(""),3e3)}catch(t){console.error("Errore eliminazione:",t),g("Errore eliminazione lead.")}finally{E(null)}},Ue=async t=>{const a=t.target.files[0];if(a){le(!0);try{const n=qe(Xe,`profilePhotos/${p.currentUser.uid}`);await Ke(n,a);const l=await Qe(n);await ue(v(w,"collaboratori",p.currentUser.uid),{photoURL:l}),D({...u,photoURL:l}),b("Foto caricata!"),setTimeout(()=>b(""),3e3)}catch{g("Errore caricamento foto.")}le(!1)}},Re=async()=>{if(R!==X){g("Le password non corrispondono.");return}if(R.length<6){g("Password troppo corta.");return}try{await Ve(p.currentUser,R),b("Password aggiornata!"),setTimeout(()=>b(""),3e3),V(""),Z(""),Q("")}catch{g("Errore aggiornamento password. Inserisci la password attuale.")}},M=(h==null?void 0:h.role)==="Setter",H=L.length,Le=L.filter(t=>t.showUp).length,Ee=H>0?(Le/H*100).toFixed(1):0,Me=((de=S==null?void 0:S.tracker)==null?void 0:de.callPrenotate)||0,ie=(S==null?void 0:S.tracker)&&Object.values(S.tracker).some(t=>t!==""&&t!==void 0),Fe=A.map(t=>{var o,c;const a=(o=t.dailyReports)==null?void 0:o.find(d=>d.date===new Date().toISOString().split("T")[0]),n=new Date().getMonth(),l=new Date().getFullYear(),i=(t.dailyReports||[]).reduce((d,k)=>{var x;const y=new Date(k.date);return y.getMonth()===n&&y.getFullYear()===l?d+(((x=k.tracker)==null?void 0:x.callPrenotate)||0):d},0);return{name:t.name,calls:((c=a==null?void 0:a.tracker)==null?void 0:c.callPrenotate)||0,monthTotal:i,photoURL:t.photoURL,gender:t.gender||"M"}}).sort((t,a)=>a.calls-t.calls),Ie=()=>{const t=new Date;t.setDate(t.getDate()-t.getDay()+1+oe*7);const a=new Date(t);a.setDate(a.getDate()+6);const n=Array.from({length:7},(o,c)=>{const d=new Date(t);return d.setDate(d.getDate()+c),d.toLocaleDateString("it-IT",{weekday:"short",day:"numeric"})}),l=A.map((o,c)=>{const d=n.map((k,y)=>{var F,me;const x=new Date(t);x.setDate(x.getDate()+y);const U=x.toISOString().split("T")[0],f=(F=o.dailyReports)==null?void 0:F.find(Ye=>Ye.date===U);return((me=f==null?void 0:f.tracker)==null?void 0:me.callPrenotate)||0});return{label:o.name,data:d,backgroundColor:`hsl(${c*60}, 70%, 55%)`,borderColor:`hsl(${c*60}, 70%, 45%)`,borderWidth:1}}),i=`${t.getDate()} - ${a.getDate()} ${t.toLocaleDateString("it-IT",{month:"short"})} ${t.getFullYear()}`;return{labels:n,datasets:l,period:i}},$e=s.useMemo(()=>Ie(),[A,oe]),{labels:Ae,datasets:Oe,period:Be}=$e,Ge=["Info Storie Prima e Dopo","Info Storie Promo","Info Reel","Inizio Reel","Guida Maniglie","Guida Tartaruga","Guida 90","Altre Guide","Guida Panettone","DM Richiesta","Outreach Nuovi Followers","Outreach Vecchi Followers","Follow-Ups","Facebook","TikTok","Referral"],ce=((h==null?void 0:h.dailyReports)||[]).filter(t=>t.date!==new Date().toISOString().split("T")[0]).sort((t,a)=>a.date.localeCompare(t.date));return be?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-rose-500"})}):e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 sm:p-6",children:[e.jsxs(m.header,{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:u.photoURL||"/default-avatar.png",alt:"Profile",className:"w-12 h-12 rounded-full border-2 border-rose-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-50",children:u.name||"Collaboratore"}),e.jsx("p",{className:"text-sm text-slate-400",children:h==null?void 0:h.role})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ze,{userType:"collaboratore"}),e.jsxs("div",{className:"text-sm text-slate-400 flex items-center gap-1",children:[e.jsx(it,{size:16})," Reset: ",ve]}),e.jsxs("button",{onClick:()=>Y(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2",children:[e.jsx(ct,{size:16})," Profilo"]}),e.jsx("button",{onClick:()=>p.signOut().then(()=>$("/login")),className:"px-4 py-2 bg-rose-600 hover:bg-rose-700 text-white rounded-lg",children:"Esci"})]})]}),e.jsxs(m.div,{className:"bg-slate-800/60 backdrop-blur-sm rounded-2xl p-6 space-y-6 border border-white/10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-400 mb-2",children:"Chiamate giornaliere"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Fe.map((t,a)=>e.jsxs(m.div,{className:"bg-slate-800/70 p-3 rounded-lg border border-white/10 text-center",whileHover:{scale:1.05},children:[e.jsx("img",{src:t.photoURL||"/default-avatar.png",alt:t.name,className:"w-10 h-10 rounded-full mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-slate-300 truncate",children:t.name}),e.jsx("p",{className:"text-lg font-bold text-white",children:t.calls}),e.jsxs("p",{className:"text-xs text-emerald-400",children:["Mese: ",t.monthTotal]})]},a))})]}),e.jsxs("div",{className:"bg-slate-800/70 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-300",children:"Chiamate prenotate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ne(t=>t-1),className:"p-1 text-cyan-300 hover:bg-cyan-900/30 rounded",children:e.jsx(dt,{size:18})}),e.jsx("span",{className:"text-sm text-slate-300 font-medium",children:Be}),e.jsx("button",{onClick:()=>ne(t=>t+1),className:"p-1 text-cyan-300 hover:bg-cyan-900/30 rounded",children:e.jsx(mt,{size:18})})]})]}),e.jsx("div",{className:"h-48",children:e.jsx(ot,{data:{labels:Ae,datasets:Oe},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:800},plugins:{legend:{position:"bottom",labels:{font:{size:10},color:"#e2e8f0",padding:12}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#60a5fa",bodyColor:"#e2e8f0",cornerRadius:6,displayColors:!0}},scales:{y:{beginAtZero:!0,ticks:{font:{size:10},color:"#94a3b8"},grid:{color:"rgba(255,255,255,0.05)"}},x:{ticks:{font:{size:10},color:"#94a3b8"},grid:{display:!1}}}}})})]}),M&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-rose-900/50 to-rose-800/30 p-4 rounded-lg border border-rose-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-rose-300 mb-2",children:"Leads Aggiunti"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:H})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/50 to-yellow-800/30 p-4 rounded-lg border border-yellow-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-2",children:"Chiamate Prenotate"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:Me})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/50 to-cyan-800/30 p-4 rounded-lg border border-cyan-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-300 mb-2",children:"Tasso Show-up"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:[Ee,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{onClick:()=>B(!0),className:"bg-slate-800/70 p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(xt,{size:20})," Tracker DMS"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${ie?"bg-green-600":"bg-red-600"} text-white`,children:ie?"Inviato":"Mancante"})]})}),M&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>G(!0),className:"bg-slate-800/70 p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(ht,{size:20})," Nuovo Lead"]})}),e.jsx("div",{onClick:()=>te(!0),className:"bg-slate-800/70 p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(ut,{size:20})," I miei Lead"]})}),e.jsx("div",{onClick:()=>ae(!0),className:"bg-slate-800/70 p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(pt,{size:20})," Report Passati"]})})]})]}),ee&&e.jsx("p",{className:"text-green-500 text-center",children:ee}),J&&e.jsx("p",{className:"text-red-500 text-center",children:J})]}),e.jsx(P,{children:ye&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Profilo"}),e.jsx("button",{onClick:()=>Y(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:u.photoURL||"/default-avatar.png",alt:"Profile",className:"w-24 h-24 rounded-full mb-2"}),e.jsx("input",{type:"file",onChange:Ue,accept:"image/*",className:"text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-rose-50 file:text-rose-700 hover:file:bg-rose-100",disabled:ke})]}),e.jsx("input",{type:"text",value:u.name,onChange:t=>D({...u,name:t.target.value}),placeholder:"Nome",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("label",{className:"flex items-center gap-2 text-white",children:[e.jsx("input",{type:"radio",name:"gender",value:"M",checked:u.gender==="M",onChange:t=>D({...u,gender:t.target.value}),className:"accent-rose-500"}),"Maschio"]}),e.jsxs("label",{className:"flex items-center gap-2 text-white",children:[e.jsx("input",{type:"radio",name:"gender",value:"F",checked:u.gender==="F",onChange:t=>D({...u,gender:t.target.value}),className:"accent-rose-500"}),"Femmina"]})]}),e.jsxs("button",{onClick:Pe,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(q,{size:16})," Salva Profilo"]}),e.jsxs("div",{className:"border-t border-white/10 pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Reimposta Password"}),e.jsx("input",{type:"password",value:ge,onChange:t=>Q(t.target.value),placeholder:"Password Attuale",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsx("input",{type:"password",value:R,onChange:t=>V(t.target.value),placeholder:"Nuova Password",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsx("input",{type:"password",value:X,onChange:t=>Z(t.target.value),placeholder:"Conferma Password",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsxs("button",{onClick:Re,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(gt,{size:16})," Reimposta"]})]})]})]})})}),e.jsx(P,{children:fe&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Tracker DMS"}),e.jsx("button",{onClick:()=>B(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:j.outreachTotale,onChange:t=>C({...j,outreachTotale:t.target.value}),placeholder:"Outreach Totale",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.followUpsTotali,onChange:t=>C({...j,followUpsTotali:t.target.value}),placeholder:"Follow-Ups Totali",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.risposte,onChange:t=>C({...j,risposte:t.target.value}),placeholder:"Risposte",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.callPrenotate,onChange:t=>C({...j,callPrenotate:t.target.value}),placeholder:"Call Prenotate",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(m.button,{onClick:Te,className:"flex items-center gap-2 px-6 py-3 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold rounded-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(q,{size:20})," Salva Tracker"]})})]})})}),e.jsx(P,{children:we&&M&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Nuovo Lead"}),e.jsx("button",{onClick:()=>G(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:r.name,onChange:t=>N({...r,name:t.target.value}),placeholder:"Nome Lead",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsxs("select",{value:r.source,onChange:t=>N({...r,source:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Seleziona Fonte"}),Ge.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("input",{type:"text",value:r.number,onChange:t=>N({...r,number:t.target.value}),placeholder:"Numero",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"text",value:r.email,onChange:t=>N({...r,email:t.target.value}),placeholder:"Email",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"date",value:r.dataPrenotazione,onChange:t=>N({...r,dataPrenotazione:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"time",value:r.oraPrenotazione,onChange:t=>N({...r,oraPrenotazione:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("textarea",{value:r.note,onChange:t=>N({...r,note:t.target.value}),placeholder:"Note",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white col-span-2",rows:"2"}),e.jsxs(m.button,{onClick:De,className:"col-span-2 bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg flex items-center justify-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(q,{size:20})," Salva Lead"]})]})]})})}),e.jsx(P,{children:je&&M&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"I miei Lead"}),e.jsx("button",{onClick:()=>te(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsx("div",{className:"overflow-x-auto -mx-2 sm:mx-0",children:e.jsxs("table",{className:"w-full text-xs sm:text-sm text-left text-slate-300",children:[e.jsx("thead",{className:"text-[10px] sm:text-xs uppercase bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Nome"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 hidden sm:table-cell",children:"Fonte"}),e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Numero"}),e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Prenotato"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 text-center",children:"Show-up"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 text-right",children:"Azioni"})]})}),e.jsxs("tbody",{children:[L.map(t=>e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("td",{className:"px-3 sm:px-4 py-2 font-medium text-slate-100",children:t.name}),e.jsx("td",{className:"px-3 sm:px-4 py-2 hidden sm:table-cell",children:t.source}),e.jsx("td",{className:"px-3 sm:px-4 py-2",children:t.number}),e.jsxs("td",{className:"px-3 sm:px-4 py-2 whitespace-nowrap",children:[t.dataPrenotazione," ",t.oraPrenotazione]}),e.jsx("td",{className:"px-3 sm:px-4 py-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] sm:text-xs ${t.showUp?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:t.showUp?"SÃ¬":"No"})}),e.jsx("td",{className:"px-3 sm:px-4 py-2 text-right",children:e.jsx("button",{onClick:()=>E(t),className:"text-red-400 hover:text-red-300 inline-flex items-center justify-center",title:"Elimina",children:e.jsx(bt,{size:14})})})]},t.id)),L.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-3 sm:px-4 py-8 text-center text-slate-400",children:"Nessun lead"})})]})]})})]})})}),e.jsx(P,{children:Ne&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Report Passati"}),e.jsx("button",{onClick:()=>ae(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[ce.map((t,a)=>{var n,l,i,o;return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-white/10",children:[e.jsx("h4",{className:"font-semibold text-cyan-400",children:new Date(t.date).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2 text-sm",children:[e.jsxs("p",{className:"text-slate-400",children:["Outreach: ",e.jsx("span",{className:"text-emerald-400",children:((n=t.tracker)==null?void 0:n.outreachTotale)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Follow-Up: ",e.jsx("span",{className:"text-yellow-400",children:((l=t.tracker)==null?void 0:l.followUpsTotali)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Risposte: ",e.jsx("span",{className:"text-cyan-400",children:((i=t.tracker)==null?void 0:i.risposte)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Call: ",e.jsx("span",{className:"text-rose-400",children:((o=t.tracker)==null?void 0:o.callPrenotate)||0})]})]})]},a)}),ce.length===0&&e.jsx("p",{className:"text-center text-slate-400 py-8",children:"Nessun report passato"})]})]})})}),e.jsx(P,{children:z&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Elimina Lead"}),e.jsx("button",{onClick:()=>E(null),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("p",{className:"text-slate-300 mb-4",children:["Sei sicuro di voler eliminare il lead ",e.jsx("strong",{children:z.name}),"?"]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 bg-slate-700/50 hover:bg-slate-700/70 border border-slate-600 text-white rounded-lg",children:"Annulla"}),e.jsx("button",{onClick:ze,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Elimina"})]})]})})})]})}export{_t as default};
