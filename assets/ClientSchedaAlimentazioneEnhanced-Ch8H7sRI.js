import{r as p,j as e,q as T,a3 as _,av as Z,bc as H,A as K,bM as J,aG as Y,h as W,e as O,f as $,aC as q,a6 as ee}from"./.pnpm-C04Ba0Xq.js";import{a as Q,d as D}from"./index-DdCoIfwr.js";const ae={CARBS:"Carboidrati",PROTEINS:"Proteine",FATS:"Grassi",VEGETABLES:"Verdure",FRUITS:"Frutta",DAIRY:"Latticini"},L=[{id:"pasta",name:"Pasta (secca)",category:"CARBS",macros:{calories:350,proteins:12,carbs:70,fats:1.5}},{id:"pasta_integrale",name:"Pasta integrale",category:"CARBS",macros:{calories:340,proteins:13,carbs:67,fats:2.5}},{id:"riso_bianco",name:"Riso bianco",category:"CARBS",macros:{calories:350,proteins:7,carbs:77,fats:.5}},{id:"riso_integrale",name:"Riso integrale",category:"CARBS",macros:{calories:360,proteins:7.5,carbs:76,fats:3}},{id:"riso_basmati",name:"Riso basmati",category:"CARBS",macros:{calories:350,proteins:8,carbs:77,fats:1}},{id:"riso_venere",name:"Riso venere",category:"CARBS",macros:{calories:370,proteins:9,carbs:75,fats:2.5}},{id:"quinoa",name:"Quinoa",category:"CARBS",macros:{calories:370,proteins:14,carbs:64,fats:6}},{id:"farro",name:"Farro",category:"CARBS",macros:{calories:335,proteins:15,carbs:67,fats:2.5}},{id:"orzo",name:"Orzo",category:"CARBS",macros:{calories:350,proteins:10,carbs:73,fats:1.5}},{id:"couscous",name:"Couscous",category:"CARBS",macros:{calories:370,proteins:13,carbs:72,fats:1.5}},{id:"pane_bianco",name:"Pane bianco",category:"CARBS",macros:{calories:265,proteins:9,carbs:50,fats:3}},{id:"pane_integrale",name:"Pane integrale",category:"CARBS",macros:{calories:247,proteins:11,carbs:45,fats:4}},{id:"patate",name:"Patate",category:"CARBS",macros:{calories:77,proteins:2,carbs:17,fats:.1}},{id:"patate_dolci",name:"Patate dolci",category:"CARBS",macros:{calories:86,proteins:1.6,carbs:20,fats:.1}},{id:"avena",name:"Avena",category:"CARBS",macros:{calories:389,proteins:17,carbs:66,fats:7}},{id:"pollo_petto",name:"Petto di pollo",category:"PROTEINS",macros:{calories:165,proteins:31,carbs:0,fats:3.6}},{id:"pollo_coscia",name:"Coscia di pollo",category:"PROTEINS",macros:{calories:209,proteins:26,carbs:0,fats:11}},{id:"tacchino_petto",name:"Petto di tacchino",category:"PROTEINS",macros:{calories:135,proteins:30,carbs:0,fats:1}},{id:"manzo_magro",name:"Manzo magro",category:"PROTEINS",macros:{calories:250,proteins:26,carbs:0,fats:15}},{id:"vitello",name:"Vitello",category:"PROTEINS",macros:{calories:172,proteins:31,carbs:0,fats:5}},{id:"maiale_lonza",name:"Lonza di maiale",category:"PROTEINS",macros:{calories:143,proteins:27,carbs:0,fats:3.5}},{id:"salmone",name:"Salmone",category:"PROTEINS",macros:{calories:208,proteins:20,carbs:0,fats:13}},{id:"tonno",name:"Tonno (fresco)",category:"PROTEINS",macros:{calories:144,proteins:23,carbs:0,fats:5}},{id:"tonno_scatola",name:"Tonno in scatola",category:"PROTEINS",macros:{calories:116,proteins:26,carbs:0,fats:1}},{id:"merluzzo",name:"Merluzzo",category:"PROTEINS",macros:{calories:82,proteins:18,carbs:0,fats:.7}},{id:"orata",name:"Orata",category:"PROTEINS",macros:{calories:121,proteins:20,carbs:0,fats:4}},{id:"branzino",name:"Branzino",category:"PROTEINS",macros:{calories:135,proteins:23,carbs:0,fats:4.5}},{id:"gamberi",name:"Gamberi",category:"PROTEINS",macros:{calories:99,proteins:24,carbs:0,fats:.3}},{id:"uova",name:"Uova intere",category:"PROTEINS",macros:{calories:155,proteins:13,carbs:1.1,fats:11}},{id:"albumi",name:"Albumi",category:"PROTEINS",macros:{calories:52,proteins:11,carbs:.7,fats:.2}},{id:"bresaola",name:"Bresaola",category:"PROTEINS",macros:{calories:151,proteins:32,carbs:0,fats:2.6}},{id:"prosciutto_crudo",name:"Prosciutto crudo",category:"PROTEINS",macros:{calories:145,proteins:26,carbs:0,fats:4.5}},{id:"tofu",name:"Tofu",category:"PROTEINS",macros:{calories:76,proteins:8,carbs:1.9,fats:4.8}},{id:"seitan",name:"Seitan",category:"PROTEINS",macros:{calories:370,proteins:75,carbs:14,fats:2}},{id:"latte_scremato",name:"Latte scremato",category:"DAIRY",macros:{calories:34,proteins:3.4,carbs:5,fats:.1}},{id:"latte_intero",name:"Latte intero",category:"DAIRY",macros:{calories:64,proteins:3.2,carbs:5,fats:3.6}},{id:"yogurt_greco",name:"Yogurt greco 0%",category:"DAIRY",macros:{calories:59,proteins:10,carbs:3.6,fats:.4}},{id:"yogurt_intero",name:"Yogurt intero",category:"DAIRY",macros:{calories:61,proteins:3.5,carbs:4.7,fats:3.3}},{id:"ricotta",name:"Ricotta vaccina",category:"DAIRY",macros:{calories:174,proteins:11,carbs:3,fats:13}},{id:"fiocchi_latte",name:"Fiocchi di latte",category:"DAIRY",macros:{calories:98,proteins:11,carbs:3.4,fats:4.3}},{id:"mozzarella",name:"Mozzarella",category:"DAIRY",macros:{calories:280,proteins:19,carbs:2.2,fats:22}},{id:"parmigiano",name:"Parmigiano",category:"DAIRY",macros:{calories:392,proteins:33,carbs:0,fats:28}},{id:"philadelphia",name:"Philadelphia light",category:"DAIRY",macros:{calories:160,proteins:8,carbs:5,fats:12}},{id:"olio_oliva",name:"Olio d'oliva",category:"FATS",macros:{calories:884,proteins:0,carbs:0,fats:100}},{id:"avocado",name:"Avocado",category:"FATS",macros:{calories:160,proteins:2,carbs:9,fats:15}},{id:"mandorle",name:"Mandorle",category:"FATS",macros:{calories:579,proteins:21,carbs:22,fats:50}},{id:"noci",name:"Noci",category:"FATS",macros:{calories:654,proteins:15,carbs:14,fats:65}},{id:"nocciole",name:"Nocciole",category:"FATS",macros:{calories:628,proteins:15,carbs:17,fats:61}},{id:"burro_arachidi",name:"Burro di arachidi",category:"FATS",macros:{calories:588,proteins:25,carbs:20,fats:50}},{id:"burro_mandorle",name:"Burro di mandorle",category:"FATS",macros:{calories:614,proteins:21,carbs:21,fats:56}},{id:"broccoli",name:"Broccoli",category:"VEGETABLES",macros:{calories:34,proteins:2.8,carbs:7,fats:.4}},{id:"spinaci",name:"Spinaci",category:"VEGETABLES",macros:{calories:23,proteins:2.9,carbs:3.6,fats:.4}},{id:"zucchine",name:"Zucchine",category:"VEGETABLES",macros:{calories:17,proteins:1.2,carbs:3.1,fats:.3}},{id:"pomodori",name:"Pomodori",category:"VEGETABLES",macros:{calories:18,proteins:.9,carbs:3.9,fats:.2}},{id:"peperoni",name:"Peperoni",category:"VEGETABLES",macros:{calories:31,proteins:1,carbs:6,fats:.3}},{id:"carote",name:"Carote",category:"VEGETABLES",macros:{calories:41,proteins:.9,carbs:10,fats:.2}},{id:"fagiolini",name:"Fagiolini",category:"VEGETABLES",macros:{calories:31,proteins:1.8,carbs:7,fats:.1}},{id:"insalata",name:"Insalata (lattuga)",category:"VEGETABLES",macros:{calories:15,proteins:1.4,carbs:2.9,fats:.2}},{id:"rucola",name:"Rucola",category:"VEGETABLES",macros:{calories:25,proteins:2.6,carbs:3.7,fats:.7}},{id:"asparagi",name:"Asparagi",category:"VEGETABLES",macros:{calories:20,proteins:2.2,carbs:3.9,fats:.1}},{id:"mela",name:"Mela",category:"FRUITS",macros:{calories:52,proteins:.3,carbs:14,fats:.2}},{id:"banana",name:"Banana",category:"FRUITS",macros:{calories:89,proteins:1.1,carbs:23,fats:.3}},{id:"arancia",name:"Arancia",category:"FRUITS",macros:{calories:47,proteins:.9,carbs:12,fats:.1}},{id:"kiwi",name:"Kiwi",category:"FRUITS",macros:{calories:61,proteins:1.1,carbs:15,fats:.5}},{id:"fragole",name:"Fragole",category:"FRUITS",macros:{calories:32,proteins:.7,carbs:8,fats:.3}},{id:"mirtilli",name:"Mirtilli",category:"FRUITS",macros:{calories:57,proteins:.7,carbs:14,fats:.3}},{id:"pera",name:"Pera",category:"FRUITS",macros:{calories:57,proteins:.4,carbs:15,fats:.1}},{id:"pesca",name:"Pesca",category:"FRUITS",macros:{calories:39,proteins:.9,carbs:10,fats:.3}},{id:"ananas",name:"Ananas",category:"FRUITS",macros:{calories:50,proteins:.5,carbs:13,fats:.1}}];function se(i){return L.filter(m=>m.category===i)}function R(i){return L.find(m=>m.id===i)}function te(i,m){if(!i||!m)return null;let r="calories";i.category==="CARBS"?r="carbs":i.category==="PROTEINS"?r="proteins":i.category==="FATS"&&(r="fats");const h=m[r],f=i.macros[r];if(f===0)return null;const n=h/f*100;return Math.round(n/5)*5}function re(i,m){if(!i||!m)return null;const r=m/100;return{calories:Math.round(i.macros.calories*r),proteins:Math.round(i.macros.proteins*r*10)/10,carbs:Math.round(i.macros.carbs*r*10)/10,fats:Math.round(i.macros.fats*r*10)/10}}function ie(i,m=5){const r=R(i);if(!r)return[];const f=se(r.category).filter(n=>n.id!==i).map(n=>{const u=Math.abs(n.macros.calories-r.macros.calories),j=Math.abs(n.macros.proteins-r.macros.proteins),b=Math.abs(n.macros.carbs-r.macros.carbs),x=Math.abs(n.macros.fats-r.macros.fats),N=u*.3+j*2+b*2+x*2;return{food:n,score:N}});return f.sort((n,u)=>n.score-u.score),f.slice(0,m).map(n=>n.food)}function oe({currentFoodId:i,currentGrams:m,currentMacros:r,mealDay:h,mealName:f,onSwap:n,onCancel:u}){var d,c;const j=R(i),[b,x]=p.useState(i),[N,P]=p.useState(m),[g,M]=p.useState(r),[I,z]=p.useState(!1),[A,C]=p.useState(!1),[E,v]=p.useState((j==null?void 0:j.category)||"CARBS");if(!j)return e.jsx("div",{className:"p-4 bg-red-500/20 border border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-300",children:"Alimento non trovato nel database"})});const y=t=>{const S=R(t);if(!S)return;const k=te(S,r),B=re(S,k);x(t),P(k),M(B),C(!1)},w=()=>{const t=R(b);n({foodId:b,foodName:t.name,grams:N,macros:g,applyToAllDays:I,mealDay:h,mealName:f})},l={calories:g.calories-r.calories,proteins:Math.round((g.proteins-r.proteins)*10)/10,carbs:Math.round((g.carbs-r.carbs)*10)/10,fats:Math.round((g.fats-r.fats)*10)/10},s=ie(i,6),a=L.filter(t=>t.category===E),o=Math.abs(l.calories)<=10&&Math.abs(l.proteins)<=2&&Math.abs(l.carbs)<=3&&Math.abs(l.fats)<=2;return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-slate-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-slate-700",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-slate-800 to-slate-900 p-6 border-b border-slate-700 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"text-rose-400",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-100",children:"Sostituisci Alimento"}),e.jsxs("p",{className:"text-sm text-slate-400",children:[f," - ",h]})]})]}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(Z,{size:20,className:"text-slate-400"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-4 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Alimento attuale:"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-100",children:j.name}),e.jsxs("p",{className:"text-sm text-slate-400",children:[m,"g"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Macros attuali:"}),e.jsxs("div",{className:"flex gap-3 mt-1",children:[e.jsxs("span",{className:"text-xs text-slate-300",children:[r.calories," kcal"]}),e.jsxs("span",{className:"text-xs text-blue-400",children:["P: ",r.proteins,"g"]}),e.jsxs("span",{className:"text-xs text-amber-400",children:["C: ",r.carbs,"g"]}),e.jsxs("span",{className:"text-xs text-rose-400",children:["F: ",r.fats,"g"]})]})]})]})]}),s.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-300 mb-3",children:"Alimenti simili (consigliati):"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:s.map(t=>e.jsxs("button",{onClick:()=>y(t.id),className:`p-3 rounded-lg border-2 transition-all text-left ${b===t.id?"border-rose-500 bg-rose-500/10":"border-slate-700 bg-slate-900/50 hover:border-slate-600"}`,children:[e.jsx("p",{className:"text-sm font-medium text-slate-200",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[t.macros.calories," kcal/100g"]})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-300 mb-3",children:"Oppure scegli da tutti gli alimenti:"}),e.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto pb-2",children:Object.entries(ae).map(([t,S])=>e.jsx("button",{onClick:()=>v(t),className:`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-colors ${E===t?"bg-rose-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:S},t))}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>C(!A),className:"w-full p-3 bg-slate-900/50 border border-slate-700 rounded-lg text-left flex items-center justify-between hover:border-slate-600 transition-colors",children:[e.jsx("span",{className:"text-slate-200",children:((d=R(b))==null?void 0:d.name)||"Seleziona alimento"}),e.jsx(H,{size:18,className:`text-slate-400 transition-transform ${A?"rotate-180":""}`})]}),e.jsx(K,{children:A&&e.jsx(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-h-60 overflow-y-auto z-20",children:a.map(t=>e.jsx("button",{onClick:()=>y(t.id),className:`w-full p-3 text-left hover:bg-slate-800 transition-colors border-b border-slate-800 last:border-b-0 ${b===t.id?"bg-slate-800":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-200 text-sm",children:t.name}),e.jsxs("span",{className:"text-xs text-slate-400",children:[t.macros.calories," kcal"]})]})},t.id))})})]})]}),b!==i&&e.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-xl p-4 border-2 ${o?"bg-green-500/10 border-green-500/50":"bg-amber-500/10 border-amber-500/50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(J,{size:20,className:o?"text-green-400":"text-amber-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-100 mb-2",children:(c=R(b))==null?void 0:c.name}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"QuantitÃ  calcolata:"}),e.jsxs("p",{className:"text-2xl font-bold text-rose-400",children:[N,"g"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Macros risultanti:"}),e.jsxs("div",{className:"space-y-1 mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-300",children:"Calorie:"}),e.jsxs("span",{className:"text-xs font-medium text-slate-200",children:[g.calories," kcal",e.jsxs("span",{className:`ml-1 ${l.calories>0?"text-rose-400":"text-green-400"}`,children:["(",l.calories>0?"+":"",l.calories,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-300",children:"Proteine:"}),e.jsxs("span",{className:"text-xs font-medium text-blue-400",children:[g.proteins,"g",e.jsxs("span",{className:`ml-1 ${l.proteins>0?"text-rose-400":"text-green-400"}`,children:["(",l.proteins>0?"+":"",l.proteins,"g)"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-300",children:"Carboidrati:"}),e.jsxs("span",{className:"text-xs font-medium text-amber-400",children:[g.carbs,"g",e.jsxs("span",{className:`ml-1 ${l.carbs>0?"text-rose-400":"text-green-400"}`,children:["(",l.carbs>0?"+":"",l.carbs,"g)"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-300",children:"Grassi:"}),e.jsxs("span",{className:"text-xs font-medium text-rose-400",children:[g.fats,"g",e.jsxs("span",{className:`ml-1 ${l.fats>0?"text-rose-400":"text-green-400"}`,children:["(",l.fats>0?"+":"",l.fats,"g)"]})]})]})]})]})]}),o?e.jsxs("p",{className:"text-xs text-green-400 mt-3 flex items-center gap-1",children:[e.jsx(Y,{size:14})," Ottima corrispondenza! I macros sono quasi identici."]}):e.jsxs("p",{className:"text-xs text-amber-400 mt-3",children:["Attenzione: piccola differenza nei macros (entro ",Math.max(Math.abs(l.calories),Math.abs(l.proteins*4),Math.abs(l.carbs*4),Math.abs(l.fats*9))," kcal)"]})]})]})}),e.jsx("div",{className:"bg-slate-900/50 rounded-xl p-4 border border-slate-700",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:t=>z(t.target.checked),className:"mt-1 w-5 h-5 rounded border-slate-600 text-rose-600 focus:ring-rose-500 focus:ring-offset-slate-800"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-200",children:"Applica a tutti i giorni"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Sostituisce questo alimento in tutti i giorni in cui Ã¨ presente nel piano alimentare"})]})]})})]}),e.jsxs("div",{className:"sticky bottom-0 bg-slate-900 p-6 border-t border-slate-700 flex gap-3",children:[e.jsx("button",{onClick:u,className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg font-medium transition-colors",children:"Annulla"}),e.jsxs("button",{onClick:w,disabled:b===i,className:"flex-1 px-4 py-3 bg-rose-600 hover:bg-rose-700 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(Y,{size:18}),"Conferma Sostituzione"]})]})]})})}const G=["LunedÃ¬","MartedÃ¬","MercoledÃ¬","GiovedÃ¬","VenerdÃ¬","Sabato","Domenica"];function ne(){var w,l;const i=W(),[m,r]=p.useState(!0),[h,f]=p.useState(null),[n,u]=p.useState("LunedÃ¬"),[j,b]=p.useState(""),[x,N]=p.useState(null),[P,g]=p.useState(!1);p.useEffect(()=>{M()},[]);const M=async()=>{try{const s=Q.currentUser;if(!s){i("/login");return}const a=O(D,"clients",s.uid),o=await $(a);o.exists()&&b(o.data().name||"N/D");const d=O(D,"schede_alimentazione",s.uid),c=await $(d);c.exists()&&f(c.data())}catch(s){console.error("Errore caricamento:",s)}r(!1)},I=(s,a,o)=>{const d=G[o];N({currentFoodId:a.foodId||"pasta",currentGrams:a.quantita||100,currentMacros:{calories:a.kcal||0,proteins:a.proteine||0,carbs:a.carboidrati||0,fats:a.grassi||0},mealDay:d,mealName:s.nome,dayIndex:o,pastoIndex:h.giorni[o].pasti.findIndex(c=>c.nome===s.nome),alimentoIndex:s.alimenti.findIndex(c=>c===a)})},z=async s=>{g(!0);try{const a=Q.currentUser;if(!a||!h)return;const o={...h},{dayIndex:d,pastoIndex:c,alimentoIndex:t}=x,S={alimento:s.foodName,foodId:s.foodId,quantita:s.grams,kcal:s.macros.calories,proteine:s.macros.proteins,carboidrati:s.macros.carbs,grassi:s.macros.fats};s.applyToAllDays?o.giorni.forEach((B,X)=>{var V,U;const F=(V=B.pasti)==null?void 0:V[c];F&&((U=F.alimenti)!=null&&U[t])&&(F.alimenti[t].foodId===x.currentFoodId||F.alimenti[t].alimento===x.currentFoodId)&&(o.giorni[X].pasti[c].alimenti[t]=S)}):o.giorni[d].pasti[c].alimenti[t]=S;const k=O(D,"schede_alimentazione",a.uid);await ee(k,o),f(o),N(null)}catch(a){console.error("Errore nel salvataggio:",a),alert("Errore nel salvare la sostituzione")}g(!1)},A=s=>{var o;let a={kcal:0,proteine:0,carboidrati:0,grassi:0};return(o=s.alimenti)==null||o.forEach(d=>{a.kcal+=d.kcal||0,a.proteine+=d.proteine||0,a.carboidrati+=d.carboidrati||0,a.grassi+=d.grassi||0}),{kcal:Math.round(a.kcal),proteine:Math.round(a.proteine*10)/10,carboidrati:Math.round(a.carboidrati*10)/10,grassi:Math.round(a.grassi*10)/10}},C=s=>{var o;let a={kcal:0,proteine:0,carboidrati:0,grassi:0};return(o=s.pasti)==null||o.forEach(d=>{const c=A(d);a.kcal+=c.kcal,a.proteine+=c.proteine,a.carboidrati+=c.carboidrati,a.grassi+=c.grassi}),{kcal:Math.round(a.kcal),proteine:Math.round(a.proteine*10)/10,carboidrati:Math.round(a.carboidrati*10)/10,grassi:Math.round(a.grassi*10)/10}};if(m)return e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-rose-500"})});if(!h)return e.jsxs("div",{className:"min-h-screen bg-slate-900 text-slate-200 p-6",children:[e.jsxs("button",{onClick:()=>i("/client"),className:"flex items-center gap-2 text-slate-400 hover:text-slate-200 mb-4",children:[e.jsx(q,{size:20}),e.jsx("span",{children:"Torna alla Dashboard"})]}),e.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[e.jsx("p",{className:"text-slate-400 text-lg",children:"Nessuna scheda alimentazione disponibile"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Contatta il tuo coach per ricevere il piano alimentare"})]})]});const E=G.indexOf(n),v=(w=h.giorni)==null?void 0:w[E],y=v?C(v):null;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-800",children:[e.jsx("div",{className:"bg-slate-800/80 backdrop-blur-sm border-b border-slate-700 sticky top-0 z-30",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:()=>i("/client"),className:"flex items-center gap-2 px-3 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:[e.jsx(q,{size:18}),e.jsx("span",{className:"text-sm text-slate-200",children:"Dashboard"})]}),e.jsx("h1",{className:"text-xl font-bold text-slate-100",children:"Piano Alimentare"}),e.jsx("div",{className:"w-20"})," "]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:G.map(s=>e.jsx("button",{onClick:()=>u(s),className:`px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition-all ${n===s?"bg-rose-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:s},s))})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6",children:[y&&e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-100 mb-4",children:"Totali Giornalieri"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Calorie"}),e.jsx("p",{className:"text-2xl font-bold text-slate-100",children:y.kcal}),e.jsx("p",{className:"text-xs text-slate-500",children:"kcal"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Proteine"}),e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:y.proteine}),e.jsx("p",{className:"text-xs text-slate-500",children:"g"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Carboidrati"}),e.jsx("p",{className:"text-2xl font-bold text-amber-400",children:y.carboidrati}),e.jsx("p",{className:"text-xs text-slate-500",children:"g"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Grassi"}),e.jsx("p",{className:"text-2xl font-bold text-rose-400",children:y.grassi}),e.jsx("p",{className:"text-xs text-slate-500",children:"g"})]})]})]}),(l=v==null?void 0:v.pasti)==null?void 0:l.map((s,a)=>{var d;const o=A(s);return e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 p-4 border-b border-slate-700",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-100",children:s.nome}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[o.kcal," kcal â€¢ P: ",o.proteine,"g â€¢ C: ",o.carboidrati,"g â€¢ F: ",o.grassi,"g"]})]})})}),e.jsx("div",{className:"p-4 space-y-3",children:(d=s.alimenti)==null?void 0:d.map((c,t)=>e.jsx("div",{className:"bg-slate-900/50 rounded-lg p-4 border border-slate-700 hover:border-slate-600 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-slate-100",children:c.alimento}),e.jsx("button",{onClick:()=>I(s,c,E),className:"p-1.5 hover:bg-slate-700 rounded-lg transition-colors group",title:"Sostituisci alimento",children:e.jsx(_,{size:16,className:"text-slate-400 group-hover:text-rose-400 group-hover:rotate-180 transition-all duration-300"})})]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[c.quantita,"g"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-slate-200",children:[c.kcal," kcal"]}),e.jsxs("div",{className:"flex gap-2 mt-1 text-xs",children:[e.jsxs("span",{className:"text-blue-400",children:["P: ",c.proteine,"g"]}),e.jsxs("span",{className:"text-amber-400",children:["C: ",c.carboidrati,"g"]}),e.jsxs("span",{className:"text-rose-400",children:["F: ",c.grassi,"g"]})]})]})]})},t))})]},a)}),e.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-cyan-300",children:["ðŸ’¡ ",e.jsx("strong",{children:"Suggerimento:"})," Clicca sull'icona ",e.jsx(_,{size:14,className:"inline"})," accanto a qualsiasi alimento per sostituirlo. Il sistema calcolerÃ  automaticamente la quantitÃ  necessaria per mantenere i tuoi macros!"]})})]}),e.jsx(K,{children:x&&e.jsx(oe,{currentFoodId:x.currentFoodId,currentGrams:x.currentGrams,currentMacros:x.currentMacros,mealDay:x.mealDay,mealName:x.mealName,onSwap:z,onCancel:()=>N(null)})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-rose-500 mx-auto"}),e.jsx("p",{className:"text-slate-200 mt-4",children:"Salvataggio in corso..."})]})})]})}export{ne as default};
