import{r,j as e}from"./react-CrXOBDSJ.js";import{J as he,I as A,U as ue,K as Je,H as W,A as v,B as Ve,D as pe,N as Q,G as Xe,R as Ze,W as et,Q as tt}from"./@firebase-CuwLCerw.js";import{u as st}from"./firebase-Bp3EI6Ad.js";import{a as u,d as w,s as at}from"./index-BVkI2ezc.js";import{N as rt}from"./NotificationPanel-5TSXIqAN.js";import{C as lt,c as ot,b as nt,f as it,p as ct,d as dt,e as mt}from"./chart.js-m_wzuIQ6.js";import{B as xt}from"./react-chartjs-2-DgEolIMQ.js";import{a as ht}from"./react-router-BxpCmtJ-.js";import{m as x,A as P}from"./framer-motion-BAPjnw1b.js";import{j as ge,x as be,a as ut,C as pt,F as fe,G as we,f as je,c as Ne,X as T,I as K,a4 as gt,p as bt}from"./lucide-react-CCY59hBS.js";import"./core-js-ChGsxLo2.js";import"./idb-Bn1DMRyg.js";import"./tslib-BGVaTf34.js";import"./react-dom-BpmKF3Ga.js";import"./scheduler-DYLXRpC5.js";import"./react-router-dom-9rcY47vU.js";import"./@remix-run-CjG9tKj3.js";import"./jspdf-7Jyqi_bl.js";import"./@babel-Cvov1XSu.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./@kurkle-D8fDXNIl.js";import"./motion-dom-C8PdgYBP.js";import"./motion-utils-DBsP9okC.js";lt.register(ot,nt,it,ct,dt,mt);function Ht(){var de;const R=ht(),[d,J]=r.useState(null),[O,ye]=r.useState([]),[j,C]=r.useState({outreachTotale:"",followUpsTotali:"",risposte:"",callPrenotate:""}),[o,N]=r.useState({name:"",source:"",number:"",email:"",note:"",dataPrenotazione:"",oraPrenotazione:""}),[p,D]=r.useState({name:"",photoURL:"",gender:"M"}),[ve,V]=r.useState(""),[E,X]=r.useState(""),[Z,ee]=r.useState(""),[B,G]=r.useState(!0),[M,b]=r.useState(""),[te,g]=r.useState(""),[ke,Y]=r.useState(!1),[Se,q]=r.useState(!1),[Ce,se]=r.useState(!1),[Pe,ae]=r.useState(!1),[Te,H]=r.useState(!1),[F,z]=r.useState([]),[k,re]=r.useState(null),[U,I]=r.useState(null),[De,ze]=r.useState(""),[Ue,le]=r.useState(!1),[ft,Le]=r.useState(!1),[oe,ne]=r.useState(0);r.useEffect(()=>{const t=()=>{const l=new Date,n=new Date(l);n.setHours(24,0,0,0);const i=n-l,a=Math.floor(i/36e5),c=Math.floor(i%36e5/6e4),m=Math.floor(i%6e4/1e3);ze(`${a}h ${c}m ${m}s`)};t();const s=setInterval(t,1e3);return()=>clearInterval(s)},[]),r.useEffect(()=>{var s;if(console.log("ðŸ CollaboratoreDashboard mounted, user:",(s=u.currentUser)==null?void 0:s.uid),!u.currentUser){console.warn("âš ï¸ No user, redirecting to login"),R("/login");return}return(async()=>{var l;try{console.log("ðŸ“¥ Fetching collaboratore doc...");const n=v(w,"collaboratori",u.currentUser.uid),i=await Ve(n);if(!i.exists()){console.error("âŒ Collaboratore doc not found"),b("Account non trovato."),G(!1);return}const a=i.data();console.log("âœ… Collaboratore data loaded:",a),J(a),D({name:(a==null?void 0:a.name)||"",photoURL:(a==null?void 0:a.photoURL)||"",gender:(a==null?void 0:a.gender)||"M"}),Le((a==null?void 0:a.role)==="Admin");const c=new Date,m=c.getFullYear(),S=String(c.getMonth()+1).padStart(2,"0"),y=String(c.getDate()).padStart(2,"0"),h=`${m}-${S}-${y}`,f=(l=a.dailyReports)==null?void 0:l.find(L=>L.date===h);re(f||null),f&&f.tracker&&C({outreachTotale:f.tracker.outreachTotale||"",followUpsTotali:f.tracker.followUpsTotali||"",risposte:f.tracker.risposte||"",callPrenotate:f.tracker.callPrenotate||""}),G(!1)}catch(n){console.error("âŒ Errore nel caricamento dei dati:",n),b("Errore nel caricamento dei dati."),G(!1)}})().then(()=>{console.log("âœ… Collaboratore loaded, now safe to query leads")}).catch(l=>{console.error("âŒ Failed to load collaboratore:",l)}),()=>{}},[R]),r.useEffect(()=>{if(!u.currentUser||!d||B){console.log("â¸ï¸ Skipping leads query - not ready yet");return}console.log("ðŸš€ Ready to query leads for:",d.name);let t=()=>{},s=null;const l=setTimeout(()=>{s=setTimeout(()=>{console.warn("âš ï¸ Leads query timeout, proceeding without leads"),z([])},8e3);try{console.log("ðŸ“Š Setting up leads listener...");const n=he(A(w,"leads"),ue("collaboratoreId","==",u.currentUser.uid),Je("timestamp","desc"));t=W(n,i=>{s&&clearTimeout(s),console.log("âœ… Leads loaded:",i.size);const a=i.docs.map(c=>({id:c.id,...c.data()}));z(a)},i=>{s&&clearTimeout(s),console.error("âŒ Errore lettura leads:",i),console.error("Error code:",i.code,"Message:",i.message),z([])})}catch(n){s&&clearTimeout(s),console.error("âŒ Errore setup leads listener:",n),z([])}},500);return()=>{t(),clearTimeout(l),s&&clearTimeout(s)}},[d,B]),r.useEffect(()=>{const t=he(A(w,"collaboratori"),ue("role","==","Setter")),s=W(t,l=>{const n=l.docs.map(i=>({id:i.id,...i.data()}));ye(n)});return()=>s()},[]),r.useEffect(()=>{if(!u.currentUser)return;const t=v(w,"collaboratori",u.currentUser.uid),s=W(t,l=>{var n;if(l.exists()){const i=l.data(),a=new Date,c=a.getFullYear(),m=String(a.getMonth()+1).padStart(2,"0"),S=String(a.getDate()).padStart(2,"0"),y=`${c}-${m}-${S}`,h=(n=i.dailyReports)==null?void 0:n.find(f=>f.date===y);re(h||null),h&&h.tracker&&C({outreachTotale:h.tracker.outreachTotale||"",followUpsTotali:h.tracker.followUpsTotali||"",risposte:h.tracker.risposte||"",callPrenotate:h.tracker.callPrenotate||""})}});return()=>s()},[]);const Re=async()=>{try{await pe(v(w,"collaboratori",u.currentUser.uid),{name:p.name,gender:p.gender}),J({...d,name:p.name,gender:p.gender}),g("Profilo aggiornato!"),setTimeout(()=>g(""),3e3),H(!1)}catch{b("Errore aggiornamento profilo.")}},Ee=async()=>{b(""),g("");try{const t=v(w,"collaboratori",u.currentUser.uid),s=new Date,l=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0"),a=`${l}-${n}-${i}`,c=((d==null?void 0:d.dailyReports)||[]).filter(m=>m.date!==a);c.push({date:a,tracker:j}),await Q(t,{dailyReports:c},{merge:!0}),g("Tracker salvato!"),setTimeout(()=>g(""),3e3),Y(!1)}catch(t){console.error("Errore Tracker:",t),b("Errore salvataggio Tracker.")}},Me=async()=>{if(!o.name||!o.number||!o.dataPrenotazione||!o.oraPrenotazione){b("Nome, numero, data e ora prenotazione sono obbligatori.");return}try{const t=v(A(w,"leads")),s=t.id;await Q(t,{...o,collaboratoreId:u.currentUser.uid,collaboratoreNome:d.name||d.email.split("@")[0],chiuso:!1,showUp:!1,timestamp:new Date}),await Q(v(A(w,"calendarEvents")),{title:`ðŸ“ž ${o.name}`,date:o.dataPrenotazione,time:o.oraPrenotazione,type:"lead",durationMinutes:30,leadId:s,leadData:{name:o.name,number:o.number,email:o.email||"",source:o.source||"",note:o.note||""},createdBy:u.currentUser.uid,participants:[u.currentUser.uid],timestamp:new Date}),g("Lead salvato e aggiunto al calendario!"),setTimeout(()=>g(""),3e3),N({name:"",source:"",number:"",email:"",note:"",dataPrenotazione:"",oraPrenotazione:""}),q(!1)}catch(t){console.error("Errore salvataggio lead:",t),b("Errore salvataggio lead.")}},Fe=async()=>{if(U)try{await Xe(v(w,"leads",U.id)),z(t=>t.filter(s=>s.id!==U.id)),g("Lead eliminato!"),setTimeout(()=>g(""),3e3)}catch(t){console.error("Errore eliminazione:",t),b("Errore eliminazione lead.")}finally{I(null)}},Ie=async t=>{const s=t.target.files[0];if(s){le(!0);try{const l=Ze(at,`profilePhotos/${u.currentUser.uid}`);await et(l,s);const n=await tt(l);await pe(v(w,"collaboratori",u.currentUser.uid),{photoURL:n}),D({...p,photoURL:n}),g("Foto caricata!"),setTimeout(()=>g(""),3e3)}catch{b("Errore caricamento foto.")}le(!1)}},$e=async()=>{if(E!==Z){b("Le password non corrispondono.");return}if(E.length<6){b("Password troppo corta.");return}try{await st(u.currentUser,E),g("Password aggiornata!"),setTimeout(()=>g(""),3e3),X(""),ee(""),V("")}catch{b("Errore aggiornamento password. Inserisci la password attuale.")}},$=(d==null?void 0:d.role)==="Setter",_=F.length,Ae=F.filter(t=>t.showUp).length,Oe=_>0?(Ae/_*100).toFixed(1):0,Be=((de=k==null?void 0:k.tracker)==null?void 0:de.callPrenotate)||0,ie=(k==null?void 0:k.tracker)&&Object.values(k.tracker).some(t=>t!==""&&t!==void 0),Ge=O.map(t=>{var a,c;const s=(a=t.dailyReports)==null?void 0:a.find(m=>m.date===new Date().toISOString().split("T")[0]),l=new Date().getMonth(),n=new Date().getFullYear(),i=(t.dailyReports||[]).reduce((m,S)=>{var h;const y=new Date(S.date);return y.getMonth()===l&&y.getFullYear()===n?m+(((h=S.tracker)==null?void 0:h.callPrenotate)||0):m},0);return{name:t.name,calls:((c=s==null?void 0:s.tracker)==null?void 0:c.callPrenotate)||0,monthTotal:i,photoURL:t.photoURL,gender:t.gender||"M"}}).sort((t,s)=>s.calls-t.calls),Ye=()=>{const t=new Date;t.setDate(t.getDate()-t.getDay()+1+oe*7);const s=new Date(t);s.setDate(s.getDate()+6);const l=Array.from({length:7},(a,c)=>{const m=new Date(t);return m.setDate(m.getDate()+c),m.toLocaleDateString("it-IT",{weekday:"short",day:"numeric"})}),n=O.map((a,c)=>{const m=l.map((S,y)=>{var me,xe;const h=new Date(t);h.setDate(h.getDate()+y);const f=h.toISOString().split("T")[0],L=(me=a.dailyReports)==null?void 0:me.find(Ke=>Ke.date===f);return((xe=L==null?void 0:L.tracker)==null?void 0:xe.callPrenotate)||0});return{label:a.name,data:m,backgroundColor:`hsl(${c*60}, 70%, 55%)`,borderColor:`hsl(${c*60}, 70%, 45%)`,borderWidth:1}}),i=`${t.getDate()} - ${s.getDate()} ${t.toLocaleDateString("it-IT",{month:"short"})} ${t.getFullYear()}`;return{labels:l,datasets:n,period:i}},qe=r.useMemo(()=>Ye(),[O,oe]),{labels:He,datasets:_e,period:We}=qe,Qe=["Info Storie Prima e Dopo","Info Storie Promo","Info Reel","Inizio Reel","Guida Maniglie","Guida Tartaruga","Guida 90","Altre Guide","Guida Panettone","DM Richiesta","Outreach Nuovi Followers","Outreach Vecchi Followers","Follow-Ups","Facebook","TikTok","Referral"],ce=((d==null?void 0:d.dailyReports)||[]).filter(t=>t.date!==new Date().toISOString().split("T")[0]).sort((t,s)=>s.date.localeCompare(t.date));return B?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-900",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-rose-500 mb-4"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Caricamento dashboard..."})]}):M?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-900 p-4",children:e.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 rounded-xl p-6 max-w-md",children:[e.jsx("p",{className:"text-red-400 text-center mb-4",children:M}),e.jsx("button",{onClick:()=>R("/login"),className:"w-full bg-rose-600 hover:bg-rose-700 text-white py-2 rounded-lg",children:"Torna al Login"})]})}):e.jsx("div",{className:"overflow-x-hidden w-full min-h-screen",children:e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full py-4 sm:py-6",children:[e.jsxs(x.header,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 w-full mx-3 sm:mx-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:p.photoURL||"/default-avatar.png",alt:"Profile",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-2 border-rose-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-50",children:p.name||"Collaboratore"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-400",children:d==null?void 0:d.role})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[e.jsx(rt,{userType:"collaboratore"}),e.jsxs("div",{className:"text-xs sm:text-sm text-slate-400 flex items-center gap-1 px-2 py-1 bg-slate-700/50 rounded",children:[e.jsx(ge,{size:14,className:"sm:hidden"}),e.jsx(ge,{size:16,className:"hidden sm:block"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset:"})," ",De]}),e.jsxs("button",{onClick:()=>H(!0),className:"px-3 py-1.5 sm:px-4 sm:py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(be,{size:14,className:"sm:hidden"}),e.jsx(be,{size:16,className:"hidden sm:block"}),e.jsx("span",{children:"Profilo"})]}),e.jsx("button",{onClick:()=>u.signOut().then(()=>R("/login")),className:"px-3 py-1.5 sm:px-4 sm:py-2 bg-rose-600 hover:bg-rose-700 text-white rounded-lg text-xs sm:text-sm",children:"Esci"})]})]}),e.jsxs(x.div,{className:"bg-slate-800/60 backdrop-blur-sm rounded-xl sm:rounded-2xl p-3 sm:p-6 space-y-4 sm:space-y-6 border border-white/10 mx-3 sm:mx-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-slate-400 mb-2",children:"Chiamate giornaliere"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 sm:gap-3",children:Ge.map((t,s)=>e.jsxs(x.div,{className:"bg-slate-800/70 p-2 sm:p-3 rounded-lg border border-white/10 text-center",whileHover:{scale:1.05},children:[e.jsx("img",{src:t.photoURL||"/default-avatar.png",alt:t.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full mx-auto mb-1"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-300 truncate",children:t.name}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-white",children:t.calls}),e.jsxs("p",{className:"text-[9px] sm:text-xs text-emerald-400",children:["M: ",t.monthTotal]})]},s))})]}),e.jsxs("div",{className:"bg-slate-800/70 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-300",children:"Chiamate prenotate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ne(t=>t-1),className:"p-1 text-cyan-300 hover:bg-cyan-900/30 rounded",children:e.jsx(ut,{size:18})}),e.jsx("span",{className:"text-sm text-slate-300 font-medium",children:We}),e.jsx("button",{onClick:()=>ne(t=>t+1),className:"p-1 text-cyan-300 hover:bg-cyan-900/30 rounded",children:e.jsx(pt,{size:18})})]})]}),e.jsx("div",{className:"h-48",children:e.jsx(xt,{data:{labels:He,datasets:_e},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:800},plugins:{legend:{position:"bottom",labels:{font:{size:10},color:"#e2e8f0",padding:12}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#60a5fa",bodyColor:"#e2e8f0",cornerRadius:6,displayColors:!0}},scales:{y:{beginAtZero:!0,ticks:{font:{size:10},color:"#94a3b8"},grid:{color:"rgba(255,255,255,0.05)"}},x:{ticks:{font:{size:10},color:"#94a3b8"},grid:{display:!1}}}}})})]}),$&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-rose-900/50 to-rose-800/30 p-4 rounded-lg border border-rose-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-rose-300 mb-2",children:"Leads Aggiunti"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:_})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/50 to-yellow-800/30 p-4 rounded-lg border border-yellow-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-2",children:"Chiamate Prenotate"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:Be})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/50 to-cyan-800/30 p-4 rounded-lg border border-cyan-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-300 mb-2",children:"Tasso Show-up"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:[Oe,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsx("div",{onClick:()=>Y(!0),className:"bg-slate-800/70 p-3 sm:p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(fe,{size:18,className:"sm:hidden"}),e.jsx(fe,{size:20,className:"hidden sm:block"}),e.jsx("span",{children:"Tracker DMS"})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${ie?"bg-green-600":"bg-red-600"} text-white`,children:ie?"Inviato":"Mancante"})]})}),$&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>q(!0),className:"bg-slate-800/70 p-3 sm:p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(we,{size:18,className:"sm:hidden"}),e.jsx(we,{size:20,className:"hidden sm:block"}),e.jsx("span",{children:"Nuovo Lead"})]})}),e.jsx("div",{onClick:()=>se(!0),className:"bg-slate-800/70 p-3 sm:p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(je,{size:18,className:"sm:hidden"}),e.jsx(je,{size:20,className:"hidden sm:block"}),e.jsx("span",{children:"I miei Lead"})]})}),e.jsx("div",{onClick:()=>ae(!0),className:"bg-slate-800/70 p-3 sm:p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(Ne,{size:18,className:"sm:hidden"}),e.jsx(Ne,{size:20,className:"hidden sm:block"}),e.jsx("span",{children:"Report Passati"})]})})]})]}),te&&e.jsx("p",{className:"text-green-500 text-center",children:te}),M&&e.jsx("p",{className:"text-red-500 text-center",children:M})]}),e.jsx(P,{children:Te&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Profilo"}),e.jsx("button",{onClick:()=>H(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:p.photoURL||"/default-avatar.png",alt:"Profile",className:"w-24 h-24 rounded-full mb-2"}),e.jsx("input",{type:"file",onChange:Ie,accept:"image/*",className:"text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-rose-50 file:text-rose-700 hover:file:bg-rose-100",disabled:Ue})]}),e.jsx("input",{type:"text",value:p.name,onChange:t=>D({...p,name:t.target.value}),placeholder:"Nome",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("label",{className:"flex items-center gap-2 text-white",children:[e.jsx("input",{type:"radio",name:"gender",value:"M",checked:p.gender==="M",onChange:t=>D({...p,gender:t.target.value}),className:"accent-rose-500"}),"Maschio"]}),e.jsxs("label",{className:"flex items-center gap-2 text-white",children:[e.jsx("input",{type:"radio",name:"gender",value:"F",checked:p.gender==="F",onChange:t=>D({...p,gender:t.target.value}),className:"accent-rose-500"}),"Femmina"]})]}),e.jsxs("button",{onClick:Re,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(K,{size:16})," Salva Profilo"]}),e.jsxs("div",{className:"border-t border-white/10 pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Reimposta Password"}),e.jsx("input",{type:"password",value:ve,onChange:t=>V(t.target.value),placeholder:"Password Attuale",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsx("input",{type:"password",value:E,onChange:t=>X(t.target.value),placeholder:"Nuova Password",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsx("input",{type:"password",value:Z,onChange:t=>ee(t.target.value),placeholder:"Conferma Password",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsxs("button",{onClick:$e,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(gt,{size:16})," Reimposta"]})]})]})]})})}),e.jsx(P,{children:ke&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Tracker DMS"}),e.jsx("button",{onClick:()=>Y(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:j.outreachTotale,onChange:t=>C({...j,outreachTotale:t.target.value}),placeholder:"Outreach Totale",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.followUpsTotali,onChange:t=>C({...j,followUpsTotali:t.target.value}),placeholder:"Follow-Ups Totali",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.risposte,onChange:t=>C({...j,risposte:t.target.value}),placeholder:"Risposte",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.callPrenotate,onChange:t=>C({...j,callPrenotate:t.target.value}),placeholder:"Call Prenotate",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(x.button,{onClick:Ee,className:"flex items-center gap-2 px-6 py-3 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold rounded-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(K,{size:20})," Salva Tracker"]})})]})})}),e.jsx(P,{children:Se&&$&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Nuovo Lead"}),e.jsx("button",{onClick:()=>q(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:o.name,onChange:t=>N({...o,name:t.target.value}),placeholder:"Nome Lead",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsxs("select",{value:o.source,onChange:t=>N({...o,source:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Seleziona Fonte"}),Qe.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("input",{type:"text",value:o.number,onChange:t=>N({...o,number:t.target.value}),placeholder:"Numero",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"text",value:o.email,onChange:t=>N({...o,email:t.target.value}),placeholder:"Email",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"date",value:o.dataPrenotazione,onChange:t=>N({...o,dataPrenotazione:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"time",value:o.oraPrenotazione,onChange:t=>N({...o,oraPrenotazione:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("textarea",{value:o.note,onChange:t=>N({...o,note:t.target.value}),placeholder:"Note",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white col-span-2",rows:"2"}),e.jsxs(x.button,{onClick:Me,className:"col-span-2 bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg flex items-center justify-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(K,{size:20})," Salva Lead"]})]})]})})}),e.jsx(P,{children:Ce&&$&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"I miei Lead"}),e.jsx("button",{onClick:()=>se(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsx("div",{className:"overflow-x-auto -mx-2 sm:mx-0",children:e.jsxs("table",{className:"w-full text-xs sm:text-sm text-left text-slate-300",children:[e.jsx("thead",{className:"text-[10px] sm:text-xs uppercase bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Nome"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 hidden sm:table-cell",children:"Fonte"}),e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Numero"}),e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Prenotato"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 text-center",children:"Show-up"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 text-right",children:"Azioni"})]})}),e.jsxs("tbody",{children:[F.map(t=>e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("td",{className:"px-3 sm:px-4 py-2 font-medium text-slate-100",children:t.name}),e.jsx("td",{className:"px-3 sm:px-4 py-2 hidden sm:table-cell",children:t.source}),e.jsx("td",{className:"px-3 sm:px-4 py-2",children:t.number}),e.jsxs("td",{className:"px-3 sm:px-4 py-2 whitespace-nowrap",children:[t.dataPrenotazione," ",t.oraPrenotazione]}),e.jsx("td",{className:"px-3 sm:px-4 py-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] sm:text-xs ${t.showUp?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:t.showUp?"SÃ¬":"No"})}),e.jsx("td",{className:"px-3 sm:px-4 py-2 text-right",children:e.jsx("button",{onClick:()=>I(t),className:"text-red-400 hover:text-red-300 inline-flex items-center justify-center",title:"Elimina",children:e.jsx(bt,{size:14})})})]},t.id)),F.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-3 sm:px-4 py-8 text-center text-slate-400",children:"Nessun lead"})})]})]})})]})})}),e.jsx(P,{children:Pe&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Report Passati"}),e.jsx("button",{onClick:()=>ae(!1),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[ce.map((t,s)=>{var l,n,i,a;return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-white/10",children:[e.jsx("h4",{className:"font-semibold text-cyan-400",children:new Date(t.date).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2 text-sm",children:[e.jsxs("p",{className:"text-slate-400",children:["Outreach: ",e.jsx("span",{className:"text-emerald-400",children:((l=t.tracker)==null?void 0:l.outreachTotale)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Follow-Up: ",e.jsx("span",{className:"text-yellow-400",children:((n=t.tracker)==null?void 0:n.followUpsTotali)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Risposte: ",e.jsx("span",{className:"text-cyan-400",children:((i=t.tracker)==null?void 0:i.risposte)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Call: ",e.jsx("span",{className:"text-rose-400",children:((a=t.tracker)==null?void 0:a.callPrenotate)||0})]})]})]},s)}),ce.length===0&&e.jsx("p",{className:"text-center text-slate-400 py-8",children:"Nessun report passato"})]})]})})}),e.jsx(P,{children:U&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Elimina Lead"}),e.jsx("button",{onClick:()=>I(null),className:"text-white hover:text-rose-400",children:e.jsx(T,{size:24})})]}),e.jsxs("p",{className:"text-slate-300 mb-4",children:["Sei sicuro di voler eliminare il lead ",e.jsx("strong",{children:U.name}),"?"]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>I(null),className:"px-4 py-2 bg-slate-700/50 hover:bg-slate-700/70 border border-slate-600 text-white rounded-lg",children:"Annulla"}),e.jsx("button",{onClick:Fe,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Elimina"})]})]})})})]})})}export{Ht as default};
