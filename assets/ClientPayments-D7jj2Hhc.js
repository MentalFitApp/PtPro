import{r as o,h,g as b,V as u,W as p,X as j,T as f,j as e,q as N,aC as g,v as y,a1 as v,b9 as D}from"./.pnpm-C04Ba0Xq.js";import{d as S}from"./index-DdCoIfwr.js";const w=()=>e.jsx("div",{className:"min-h-screen flex justify-center items-center relative",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-400"})}),C=s=>s&&typeof s.toDate=="function"?s.toDate().toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}):"N/D",q=()=>{const[s,d]=o.useState([]),[m,i]=o.useState(!0),r=h(),n=b().currentUser;return o.useEffect(()=>{if(!n){r("/login");return}const t=u(S,`clients/${n.uid}/payments`),a=p(t,j("paymentDate","desc")),x=f(a,l=>{d(l.docs.map(c=>({id:c.id,...c.data()}))),i(!1)},l=>{console.error("Errore nel caricare i pagamenti:",l),i(!1)});return()=>x()},[n,r]),m?e.jsx(w,{}):e.jsx("div",{className:"min-h-screen text-slate-200 p-4 sm:p-8 relative",children:e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-50",children:"Storico Pagamenti"}),e.jsxs("button",{onClick:()=>r("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-slate-700/50 hover:bg-slate-700/70 border border-slate-600 text-slate-300 text-sm font-semibold rounded-lg transition-colors",children:[e.jsx(g,{size:16}),e.jsx("span",{children:"Dashboard"})]})]}),e.jsx("main",{className:"bg-slate-800/60 backdrop-blur-sm rounded-2xl border border-slate-700 p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b border-white/10",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400 flex items-center gap-2",children:[e.jsx(y,{size:16}),"Data"]}),e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400",children:[e.jsx(v,{size:16,className:"inline mr-2"}),"Importo"]}),e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400",children:[e.jsx(D,{size:16,className:"inline mr-2"}),"Durata"]}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-400 hidden sm:table-cell",children:"Metodo"})]})}),e.jsx("tbody",{children:s.length>0?s.map(t=>{var a;return e.jsxs("tr",{className:"border-b border-white/5 last:border-b-0",children:[e.jsx("td",{className:"p-4 text-slate-300",children:C(t.paymentDate)}),e.jsxs("td",{className:"p-4 font-semibold text-cyan-300",children:["€ ",(a=t.amount)==null?void 0:a.toFixed(2)]}),e.jsx("td",{className:"p-4 text-slate-300",children:t.duration}),e.jsx("td",{className:"p-4 text-slate-400 hidden sm:table-cell",children:t.paymentMethod||"Non specificato"})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center text-slate-500 p-8",children:"Non è stato registrato ancora nessun pagamento."})})})]})})})]})})};export{q as default};
