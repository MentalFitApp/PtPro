import{E as ve,h as fe,r as c,e as D,f as O,j as e,aC as je,aL as Ne,an as ye,F as we,bJ as Ce,aH as E,b9 as Se,q as m,bK as ke,bb as De,bc as ze,au as Pe,a0 as Ae,A as v,a6 as Fe,u as Ee,V as f,ax as q,W as H,X as L,aN as qe,av as Te,aU as G}from"./.pnpm-C04Ba0Xq.js";import{d as u}from"./index-DdCoIfwr.js";import{e as Me}from"./pdfExport-BSG699br.js";const Re=["Definizione","Massa","Mantenimento","Dimagrimento","Sportivo"],T=["Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],I=["Colazione","Spuntino","Pranzo","Spuntino","Cena"],Ge=()=>{const{clientId:p}=ve(),j=fe(),[r,h]=c.useState(!0),[N,x]=c.useState(!1),[M,J]=c.useState(""),[o,d]=c.useState({obiettivo:"",note:"",durataSettimane:"",integrazione:"",giorni:T.reduce((t,s)=>(t[s]={pasti:I.map(l=>({nome:l,alimenti:[]}))},t),{})}),[n,Q]=c.useState("Lunedì"),[V,z]=c.useState({pastoIndex:null}),[K,y]=c.useState(!1),[U,w]=c.useState(!1),[P,A]=c.useState(""),[R,$]=c.useState([]),[B,C]=c.useState(!1),[b,_]=c.useState(null),[X,S]=c.useState(!1),[F,W]=c.useState([]);c.useEffect(()=>{Y()},[p]);const Y=async()=>{try{const t=D(u,"clients",p),s=await O(t);if(s.exists()){J(s.data().name||"N/D");const l=D(u,"schede_alimentazione",p),a=await O(l);a.exists()&&d(a.data())}}catch(t){console.error("Errore caricamento:",t)}h(!1)},Z=async()=>{x(!0);try{const t=D(u,"schede_alimentazione",p);if(await Fe(t,{...o,updatedAt:new Date}),await be(),o.durataSettimane){const s=D(u,"clients",p),l=new Date;l.setDate(l.getDate()+parseInt(o.durataSettimane)*7),await Ee(s,{"schedaAlimentazione.scadenza":l})}alert("Scheda salvata con successo!")}catch(t){console.error("Errore salvataggio:",t),alert("Errore nel salvataggio della scheda")}x(!1)},ee=(t,s)=>{d(l=>{const a={...l};return a.giorni[n].pasti[t].alimenti.push(s),a})},te=(t,s)=>{d(l=>{const a={...l};return a.giorni[n].pasti[t].alimenti.splice(s,1),a})},se=t=>{t!==0&&d(s=>{const l={...s},a=l.giorni[n].pasti;return[a[t-1],a[t]]=[a[t],a[t-1]],l})},ae=t=>{const s=o.giorni[n].pasti;t!==s.length-1&&d(l=>{const a={...l},i=a.giorni[n].pasti;return[i[t],i[t+1]]=[i[t+1],i[t]],a})},le=t=>{d(s=>{const l={...s},a=JSON.parse(JSON.stringify(l.giorni[n].pasti[t]));return l.giorni[n].pasti.splice(t+1,0,a),l})},re=t=>{const s=JSON.parse(JSON.stringify(o.giorni[n]));d(l=>{const a={...l};return t.forEach(i=>{a.giorni[i]=s}),a})},ie=()=>{confirm("Sei sicuro di voler resettare questo giorno?")&&d(t=>{const s={...t};return s.giorni[n]={pasti:I.map(l=>({nome:l,alimenti:[]}))},s})},oe=()=>{const t=o.giorni[n].pasti;let s={kcal:0,proteine:0,carboidrati:0,grassi:0,quantita:0};return t.forEach(l=>{l.alimenti.forEach(a=>{const i=a.quantita/100;s.kcal+=(a.kcal||0)*i,s.proteine+=(a.proteine||0)*i,s.carboidrati+=(a.carboidrati||0)*i,s.grassi+=(a.grassi||0)*i,s.quantita+=a.quantita||0})}),s},ne=t=>{let s={kcal:0,proteine:0,carboidrati:0,grassi:0};return t.alimenti.forEach(l=>{const a=l.quantita/100;s.kcal+=(l.kcal||0)*a,s.proteine+=(l.proteine||0)*a,s.carboidrati+=(l.carboidrati||0)*a,s.grassi+=(l.grassi||0)*a}),s},ce=()=>{Me(o,M)},de=async()=>{try{const t=f(u,"preset_alimentazione"),s=await q(t),l=[];s.forEach(a=>{l.push({id:a.id,...a.data()})}),$(l)}catch(t){console.error("Errore caricamento preset:",t)}},xe=async()=>{if(!P.trim()){alert("Inserisci un nome per il preset");return}try{const t=f(u,"preset_alimentazione");await G(t,{name:P,data:o,createdAt:new Date}),alert("Preset salvato con successo!"),y(!1),A("")}catch(t){console.error("Errore salvataggio preset:",t),alert("Errore nel salvataggio del preset")}},me=t=>{confirm(`Importare il preset "${t.name}"? Questo sovrascriverà tutti i dati correnti.`)&&(d(s=>({...s,...t.data})),w(!1))},pe=async()=>{try{const t=f(u,"schede_alimentazione_storico",p,"history"),s=H(t,L("savedAt","desc"),qe(1)),l=await q(s);if(l.empty)_(null);else{const a=l.docs[0].data();_(a)}}catch(t){console.error("Errore caricamento scheda precedente:",t)}},ue=()=>{if(!b){alert("Nessuna scheda precedente trovata");return}confirm("Copiare la scheda precedente? Questo sovrascriverà tutti i dati correnti.")&&(d(t=>({...t,...b})),C(!1))},he=async()=>{try{const t=f(u,"schede_alimentazione_storico",p,"history"),s=H(t,L("savedAt","desc")),l=await q(s),a=[];l.forEach(i=>{a.push({id:i.id,...i.data()})}),W(a)}catch(t){console.error("Errore caricamento storico:",t)}},be=async()=>{try{const t=f(u,"schede_alimentazione_storico",p,"history");await G(t,{...o,savedAt:new Date})}catch(t){console.error("Errore salvataggio storico:",t)}},ge=t=>{confirm("Visualizzare questa scheda storica? I dati correnti verranno sostituiti (salva prima se necessario).")&&(d(s=>({...s,...t})),S(!1))};if(r)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-rose-500"})});const g=oe();return e.jsx("div",{className:"min-h-screen p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>j("/alimentazione-allenamento"),className:"flex items-center gap-2 text-slate-400 hover:text-slate-200 transition-colors",children:[e.jsx(je,{size:20}),"Torna indietro"]}),e.jsxs("button",{onClick:Z,disabled:N,className:"flex items-center gap-2 px-6 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-slate-600 text-white rounded-lg transition-colors",children:[e.jsx(Ne,{size:18}),N?"Salvataggio...":"Salva Scheda"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(ye,{size:16}),"Scarica PDF"]}),e.jsxs("button",{onClick:()=>{y(!0)},className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(we,{size:16}),"Salva come Preset"]}),e.jsxs("button",{onClick:()=>{de(),w(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(Ce,{size:16}),"Importa Preset"]}),e.jsxs("button",{onClick:()=>{pe(),C(!0)},className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(E,{size:16}),"Copia Precedente"]}),e.jsxs("button",{onClick:()=>{he(),S(!0)},className:"flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(Se,{size:16}),"Storico Schede"]})]})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-100 mb-6",children:["Scheda Alimentazione - ",M]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Obiettivo"}),e.jsxs("select",{value:o.obiettivo,onChange:t=>d({...o,obiettivo:t.target.value}),className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-emerald-500",children:[e.jsx("option",{value:"",children:"Seleziona obiettivo"}),Re.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Durata (settimane)"}),e.jsx("input",{type:"number",value:o.durataSettimane,onChange:t=>d({...o,durataSettimane:t.target.value}),className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-emerald-500",placeholder:"Es. 12"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Note"}),e.jsx("input",{type:"text",value:o.note,onChange:t=>d({...o,note:t.target.value}),className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-emerald-500",placeholder:"Note generali..."})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:T.map(t=>e.jsx("button",{onClick:()=>Q(t),className:`px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${n===t?"bg-emerald-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:t},t))}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>{const t=T.filter(s=>s!==n);confirm(`Duplicare ${n} su tutti gli altri giorni?`)&&re(t)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm flex items-center gap-2",children:[e.jsx(E,{size:16}),"Duplica su altri giorni"]}),e.jsxs("button",{onClick:ie,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm flex items-center gap-2",children:[e.jsx(ke,{size:16}),"Reset giorno"]})]})]}),e.jsx("div",{className:"space-y-4",children:o.giorni[n].pasti.map((t,s)=>{const l=ne(t);return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:t.nome}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>se(s),disabled:s===0,className:"p-2 text-slate-400 hover:text-slate-200 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(De,{size:18})}),e.jsx("button",{onClick:()=>ae(s),disabled:s===o.giorni[n].pasti.length-1,className:"p-2 text-slate-400 hover:text-slate-200 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(ze,{size:18})}),e.jsx("button",{onClick:()=>le(s),className:"p-2 text-blue-400 hover:text-blue-300",children:e.jsx(E,{size:18})})]})]}),t.alimenti.length>0&&e.jsx("div",{className:"mb-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-slate-300",children:"Alimento"}),e.jsx("th",{className:"px-3 py-2 text-left text-slate-300",children:"Quantità (g)"}),e.jsx("th",{className:"px-3 py-2 text-left text-slate-300",children:"Kcal"}),e.jsx("th",{className:"px-3 py-2 text-left text-slate-300",children:"Proteine"}),e.jsx("th",{className:"px-3 py-2 text-left text-slate-300",children:"Carb."}),e.jsx("th",{className:"px-3 py-2 text-left text-slate-300",children:"Grassi"}),e.jsx("th",{className:"px-3 py-2"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-700",children:[t.alimenti.map((a,i)=>{const k=a.quantita/100;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-slate-200",children:a.nome}),e.jsxs("td",{className:"px-3 py-2 text-slate-300",children:[a.quantita,"g"]}),e.jsx("td",{className:"px-3 py-2 text-slate-300",children:((a.kcal||0)*k).toFixed(0)}),e.jsxs("td",{className:"px-3 py-2 text-slate-300",children:[((a.proteine||0)*k).toFixed(1),"g"]}),e.jsxs("td",{className:"px-3 py-2 text-slate-300",children:[((a.carboidrati||0)*k).toFixed(1),"g"]}),e.jsxs("td",{className:"px-3 py-2 text-slate-300",children:[((a.grassi||0)*k).toFixed(1),"g"]}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("button",{onClick:()=>te(s,i),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(Pe,{size:16})})})]},i)}),e.jsxs("tr",{className:"bg-slate-800/50 font-semibold",children:[e.jsxs("td",{className:"px-3 py-2 text-slate-200",children:["Totale ",t.nome]}),e.jsx("td",{className:"px-3 py-2"}),e.jsx("td",{className:"px-3 py-2 text-emerald-400",children:l.kcal.toFixed(0)}),e.jsxs("td",{className:"px-3 py-2 text-emerald-400",children:[l.proteine.toFixed(1),"g"]}),e.jsxs("td",{className:"px-3 py-2 text-emerald-400",children:[l.carboidrati.toFixed(1),"g"]}),e.jsxs("td",{className:"px-3 py-2 text-emerald-400",children:[l.grassi.toFixed(1),"g"]}),e.jsx("td",{})]})]})]})}),e.jsxs("button",{onClick:()=>z({pastoIndex:s}),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors text-sm flex items-center gap-2",children:[e.jsx(Ae,{size:16}),"Aggiungi Alimento"]}),e.jsx(v,{children:V.pastoIndex===s&&e.jsx(_e,{onAdd:a=>{ee(s,a),z({pastoIndex:null})},onCancel:()=>z({pastoIndex:null})})})]},s)})}),e.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-600/50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-emerald-300 mb-4",children:["Totali Giornalieri - ",n]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Quantità Totale"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-300",children:[g.quantita.toFixed(0),"g"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Kcal"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-300",children:g.kcal.toFixed(0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Proteine"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-300",children:[g.proteine.toFixed(1),"g"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Carboidrati"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-300",children:[g.carboidrati.toFixed(1),"g"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Grassi"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-300",children:[g.grassi.toFixed(1),"g"]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Integrazione"}),e.jsx("textarea",{value:o.integrazione,onChange:t=>d({...o,integrazione:t.target.value}),rows:"5",className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-200 focus:outline-none focus:border-emerald-500",placeholder:"Tips sull'integrazione, consigli, note..."})]}),e.jsx(v,{children:K&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>y(!1),children:e.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Salva come Preset"}),e.jsx("input",{type:"text",value:P,onChange:t=>A(t.target.value),placeholder:"Nome del preset (es. Definizione)",className:"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-slate-200 mb-4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:xe,className:"flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Salva"}),e.jsx("button",{onClick:()=>{y(!1),A("")},className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Annulla"})]})]})})}),e.jsx(v,{children:U&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>w(!1),children:e.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Importa Preset"}),R.length===0?e.jsx("p",{className:"text-slate-400 text-center py-8",children:"Nessun preset disponibile"}):e.jsx("div",{className:"space-y-3",children:R.map(t=>{var s,l,a;return e.jsxs("button",{onClick:()=>me(t),className:"w-full p-4 bg-slate-900 hover:bg-slate-700 border border-slate-700 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-bold text-slate-100",children:t.name}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1",children:["Creato: ",((a=(l=(s=t.createdAt)==null?void 0:s.toDate)==null?void 0:l.call(s))==null?void 0:a.toLocaleDateString("it-IT"))||"N/D"]})]},t.id)})}),e.jsx("button",{onClick:()=>w(!1),className:"w-full mt-4 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Chiudi"})]})})}),e.jsx(v,{children:B&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>C(!1),children:e.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Copia Scheda Precedente"}),b?e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-slate-300 mb-2",children:"Scheda trovata:"}),e.jsxs("div",{className:"p-3 bg-slate-900 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-slate-400",children:["Obiettivo: ",b.obiettivo||"N/D"]}),e.jsxs("div",{className:"text-sm text-slate-400",children:["Durata: ",b.durataSettimane||"N/D"," settimane"]})]})]}):e.jsx("p",{className:"text-slate-400 mb-4",children:"Nessuna scheda precedente trovata"}),e.jsxs("div",{className:"flex gap-3",children:[b&&e.jsx("button",{onClick:ue,className:"flex-1 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors",children:"Copia"}),e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Chiudi"})]})]})})}),e.jsx(v,{children:X&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>S(!1),children:e.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-3xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:"Storico Schede"}),F.length===0?e.jsx("p",{className:"text-slate-400 text-center py-8",children:"Nessuna scheda nello storico"}):e.jsx("div",{className:"space-y-3",children:F.map((t,s)=>{var l,a,i;return e.jsx("button",{onClick:()=>ge(t),className:"w-full p-4 bg-slate-900 hover:bg-slate-700 border border-slate-700 rounded-lg text-left transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-slate-100",children:["Scheda #",F.length-s]}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1",children:["Salvata: ",((i=(a=(l=t.savedAt)==null?void 0:l.toDate)==null?void 0:a.call(l))==null?void 0:i.toLocaleDateString("it-IT"))||"N/D"]}),e.jsxs("div",{className:"text-sm text-slate-400",children:["Obiettivo: ",t.obiettivo||"N/D"]})]}),e.jsx("span",{className:"text-emerald-400 text-sm",children:"Visualizza"})]})},t.id)})}),e.jsx("button",{onClick:()=>S(!1),className:"w-full mt-4 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Chiudi"})]})})})]})})},_e=({onAdd:p,onCancel:j})=>{const[r,h]=c.useState({nome:"",quantita:"",kcal:"",proteine:"",carboidrati:"",grassi:""}),N=()=>{if(!r.nome||!r.quantita){alert("Inserisci almeno nome e quantità");return}p({...r,quantita:parseFloat(r.quantita),kcal:parseFloat(r.kcal)||0,proteine:parseFloat(r.proteine)||0,carboidrati:parseFloat(r.carboidrati)||0,grassi:parseFloat(r.grassi)||0})};return e.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 p-4 bg-slate-800 border border-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-slate-100",children:"Aggiungi Alimento"}),e.jsx("button",{onClick:j,className:"text-slate-400 hover:text-slate-200",children:e.jsx(Te,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Nome alimento",value:r.nome,onChange:x=>h({...r,nome:x.target.value}),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm focus:outline-none focus:border-emerald-500"}),e.jsx("input",{type:"number",placeholder:"Quantità (g)",value:r.quantita,onChange:x=>h({...r,quantita:x.target.value}),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm focus:outline-none focus:border-emerald-500"}),e.jsx("input",{type:"number",placeholder:"Kcal (per 100g)",value:r.kcal,onChange:x=>h({...r,kcal:x.target.value}),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm focus:outline-none focus:border-emerald-500"}),e.jsx("input",{type:"number",placeholder:"Proteine (g)",value:r.proteine,onChange:x=>h({...r,proteine:x.target.value}),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm focus:outline-none focus:border-emerald-500"}),e.jsx("input",{type:"number",placeholder:"Carboidrati (g)",value:r.carboidrati,onChange:x=>h({...r,carboidrati:x.target.value}),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm focus:outline-none focus:border-emerald-500"}),e.jsx("input",{type:"number",placeholder:"Grassi (g)",value:r.grassi,onChange:x=>h({...r,grassi:x.target.value}),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm focus:outline-none focus:border-emerald-500"})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{onClick:N,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded text-sm transition-colors",children:"Aggiungi"}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded text-sm transition-colors",children:"Annulla"})]})]})};export{Ge as default};
