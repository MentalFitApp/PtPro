import{r,j as e}from"./react-CrXOBDSJ.js";import{J as xe,I as $,U as he,K as He,H as W,A as v,B as _e,D as ue,N as q,G as We,R as qe,W as Ke,Q as Qe}from"./@firebase-CuwLCerw.js";import{u as Je}from"./firebase-Bp3EI6Ad.js";import{a as u,d as w,s as Ve}from"./index-BqQ4SUJN.js";import{N as Xe}from"./NotificationPanel-Bcs7SGcA.js";import{C as Ze,c as et,b as tt,f as st,p as at,d as rt,e as lt}from"./chart.js-m_wzuIQ6.js";import{B as ot}from"./react-chartjs-2-DgEolIMQ.js";import{a as nt}from"./react-router-BxpCmtJ-.js";import{m,A as P}from"./framer-motion-BAPjnw1b.js";import{j as it,x as ct,a as dt,C as mt,F as xt,G as ht,f as ut,c as pt,X as D,I as K,a4 as gt,p as bt}from"./lucide-react-CCY59hBS.js";import"./core-js-ChGsxLo2.js";import"./idb-Bn1DMRyg.js";import"./tslib-BGVaTf34.js";import"./react-dom-BpmKF3Ga.js";import"./scheduler-DYLXRpC5.js";import"./react-router-dom-9rcY47vU.js";import"./@remix-run-CjG9tKj3.js";import"./jspdf-7Jyqi_bl.js";import"./@babel-Cvov1XSu.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./@kurkle-D8fDXNIl.js";import"./motion-dom-C8PdgYBP.js";import"./motion-utils-DBsP9okC.js";Ze.register(et,tt,st,at,rt,lt);function _t(){var de;const A=nt(),[h,Q]=r.useState(null),[O,pe]=r.useState([]),[j,C]=r.useState({outreachTotale:"",followUpsTotali:"",risposte:"",callPrenotate:""}),[l,N]=r.useState({name:"",source:"",number:"",email:"",note:"",dataPrenotazione:"",oraPrenotazione:""}),[p,T]=r.useState({name:"",photoURL:"",gender:"M"}),[ge,J]=r.useState(""),[R,V]=r.useState(""),[X,Z]=r.useState(""),[be,B]=r.useState(!0),[ee,b]=r.useState(""),[te,g]=r.useState(""),[fe,G]=r.useState(!1),[we,Y]=r.useState(!1),[je,se]=r.useState(!1),[Ne,ae]=r.useState(!1),[ye,H]=r.useState(!1),[L,E]=r.useState([]),[S,re]=r.useState(null),[z,M]=r.useState(null),[ve,Se]=r.useState(""),[ke,le]=r.useState(!1),[ft,Ce]=r.useState(!1),[oe,ne]=r.useState(0);r.useEffect(()=>{const t=()=>{const i=new Date,n=new Date(i);n.setHours(24,0,0,0);const o=n-i,c=Math.floor(o/36e5),a=Math.floor(o%36e5/6e4),d=Math.floor(o%6e4/1e3);Se(`${c}h ${a}m ${d}s`)};t();const s=setInterval(t,1e3);return()=>clearInterval(s)},[]),r.useEffect(()=>{var i;if(console.log("ðŸ CollaboratoreDashboard mounted, user:",(i=u.currentUser)==null?void 0:i.uid),!u.currentUser){console.warn("âš ï¸ No user, redirecting to login"),A("/login");return}(async()=>{var n;try{console.log("ðŸ“¥ Fetching collaboratore doc...");const o=v(w,"collaboratori",u.currentUser.uid),c=await _e(o);if(!c.exists()){console.error("âŒ Collaboratore doc not found"),b("Account non trovato."),B(!1);return}const a=c.data();console.log("âœ… Collaboratore data loaded:",a),Q(a),T({name:(a==null?void 0:a.name)||"",photoURL:(a==null?void 0:a.photoURL)||"",gender:(a==null?void 0:a.gender)||"M"}),Ce((a==null?void 0:a.role)==="Admin");const d=new Date,k=d.getFullYear(),y=String(d.getMonth()+1).padStart(2,"0"),x=String(d.getDate()).padStart(2,"0"),U=`${k}-${y}-${x}`,f=(n=a.dailyReports)==null?void 0:n.find(I=>I.date===U);re(f||null),f&&f.tracker&&C({outreachTotale:f.tracker.outreachTotale||"",followUpsTotali:f.tracker.followUpsTotali||"",risposte:f.tracker.risposte||"",callPrenotate:f.tracker.callPrenotate||""}),B(!1)}catch{b("Errore nel caricamento dei dati."),B(!1)}})();let s=()=>{};try{console.log("ðŸ“Š Setting up leads listener...");const n=xe($(w,"leads"),he("collaboratoreId","==",u.currentUser.uid),He("timestamp","desc"));s=W(n,o=>{console.log("âœ… Leads loaded:",o.size);const c=o.docs.map(a=>({id:a.id,...a.data()}));E(c)},o=>{console.error("âŒ Errore lettura leads:",o),console.error("Error code:",o.code,"Message:",o.message),E([])})}catch(n){console.error("âŒ Errore setup leads listener:",n),E([])}return()=>s()},[A]),r.useEffect(()=>{const t=xe($(w,"collaboratori"),he("role","==","Setter")),s=W(t,i=>{const n=i.docs.map(o=>({id:o.id,...o.data()}));pe(n)});return()=>s()},[]),r.useEffect(()=>{if(!u.currentUser)return;const t=v(w,"collaboratori",u.currentUser.uid),s=W(t,i=>{var n;if(i.exists()){const o=i.data(),c=new Date,a=c.getFullYear(),d=String(c.getMonth()+1).padStart(2,"0"),k=String(c.getDate()).padStart(2,"0"),y=`${a}-${d}-${k}`,x=(n=o.dailyReports)==null?void 0:n.find(U=>U.date===y);re(x||null),x&&x.tracker&&C({outreachTotale:x.tracker.outreachTotale||"",followUpsTotali:x.tracker.followUpsTotali||"",risposte:x.tracker.risposte||"",callPrenotate:x.tracker.callPrenotate||""})}});return()=>s()},[]);const Pe=async()=>{try{await ue(v(w,"collaboratori",u.currentUser.uid),{name:p.name,gender:p.gender}),Q({...h,name:p.name,gender:p.gender}),g("Profilo aggiornato!"),setTimeout(()=>g(""),3e3),H(!1)}catch{b("Errore aggiornamento profilo.")}},De=async()=>{b(""),g("");try{const t=v(w,"collaboratori",u.currentUser.uid),s=new Date,i=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),o=String(s.getDate()).padStart(2,"0"),c=`${i}-${n}-${o}`,a=((h==null?void 0:h.dailyReports)||[]).filter(d=>d.date!==c);a.push({date:c,tracker:j}),await q(t,{dailyReports:a},{merge:!0}),g("Tracker salvato!"),setTimeout(()=>g(""),3e3),G(!1)}catch(t){console.error("Errore Tracker:",t),b("Errore salvataggio Tracker.")}},Te=async()=>{if(!l.name||!l.number||!l.dataPrenotazione||!l.oraPrenotazione){b("Nome, numero, data e ora prenotazione sono obbligatori.");return}try{const t=v($(w,"leads")),s=t.id;await q(t,{...l,collaboratoreId:u.currentUser.uid,collaboratoreNome:h.name||h.email.split("@")[0],chiuso:!1,showUp:!1,timestamp:new Date}),await q(v($(w,"calendarEvents")),{title:`ðŸ“ž ${l.name}`,date:l.dataPrenotazione,time:l.oraPrenotazione,type:"lead",durationMinutes:30,leadId:s,leadData:{name:l.name,number:l.number,email:l.email||"",source:l.source||"",note:l.note||""},createdBy:u.currentUser.uid,participants:[u.currentUser.uid],timestamp:new Date}),g("Lead salvato e aggiunto al calendario!"),setTimeout(()=>g(""),3e3),N({name:"",source:"",number:"",email:"",note:"",dataPrenotazione:"",oraPrenotazione:""}),Y(!1)}catch(t){console.error("Errore salvataggio lead:",t),b("Errore salvataggio lead.")}},ze=async()=>{if(z)try{await We(v(w,"leads",z.id)),E(t=>t.filter(s=>s.id!==z.id)),g("Lead eliminato!"),setTimeout(()=>g(""),3e3)}catch(t){console.error("Errore eliminazione:",t),b("Errore eliminazione lead.")}finally{M(null)}},Ue=async t=>{const s=t.target.files[0];if(s){le(!0);try{const i=qe(Ve,`profilePhotos/${u.currentUser.uid}`);await Ke(i,s);const n=await Qe(i);await ue(v(w,"collaboratori",u.currentUser.uid),{photoURL:n}),T({...p,photoURL:n}),g("Foto caricata!"),setTimeout(()=>g(""),3e3)}catch{b("Errore caricamento foto.")}le(!1)}},Re=async()=>{if(R!==X){b("Le password non corrispondono.");return}if(R.length<6){b("Password troppo corta.");return}try{await Je(u.currentUser,R),g("Password aggiornata!"),setTimeout(()=>g(""),3e3),V(""),Z(""),J("")}catch{b("Errore aggiornamento password. Inserisci la password attuale.")}},F=(h==null?void 0:h.role)==="Setter",_=L.length,Le=L.filter(t=>t.showUp).length,Ee=_>0?(Le/_*100).toFixed(1):0,Me=((de=S==null?void 0:S.tracker)==null?void 0:de.callPrenotate)||0,ie=(S==null?void 0:S.tracker)&&Object.values(S.tracker).some(t=>t!==""&&t!==void 0),Fe=O.map(t=>{var c,a;const s=(c=t.dailyReports)==null?void 0:c.find(d=>d.date===new Date().toISOString().split("T")[0]),i=new Date().getMonth(),n=new Date().getFullYear(),o=(t.dailyReports||[]).reduce((d,k)=>{var x;const y=new Date(k.date);return y.getMonth()===i&&y.getFullYear()===n?d+(((x=k.tracker)==null?void 0:x.callPrenotate)||0):d},0);return{name:t.name,calls:((a=s==null?void 0:s.tracker)==null?void 0:a.callPrenotate)||0,monthTotal:o,photoURL:t.photoURL,gender:t.gender||"M"}}).sort((t,s)=>s.calls-t.calls),Ie=()=>{const t=new Date;t.setDate(t.getDate()-t.getDay()+1+oe*7);const s=new Date(t);s.setDate(s.getDate()+6);const i=Array.from({length:7},(c,a)=>{const d=new Date(t);return d.setDate(d.getDate()+a),d.toLocaleDateString("it-IT",{weekday:"short",day:"numeric"})}),n=O.map((c,a)=>{const d=i.map((k,y)=>{var I,me;const x=new Date(t);x.setDate(x.getDate()+y);const U=x.toISOString().split("T")[0],f=(I=c.dailyReports)==null?void 0:I.find(Ye=>Ye.date===U);return((me=f==null?void 0:f.tracker)==null?void 0:me.callPrenotate)||0});return{label:c.name,data:d,backgroundColor:`hsl(${a*60}, 70%, 55%)`,borderColor:`hsl(${a*60}, 70%, 45%)`,borderWidth:1}}),o=`${t.getDate()} - ${s.getDate()} ${t.toLocaleDateString("it-IT",{month:"short"})} ${t.getFullYear()}`;return{labels:i,datasets:n,period:o}},$e=r.useMemo(()=>Ie(),[O,oe]),{labels:Ae,datasets:Oe,period:Be}=$e,Ge=["Info Storie Prima e Dopo","Info Storie Promo","Info Reel","Inizio Reel","Guida Maniglie","Guida Tartaruga","Guida 90","Altre Guide","Guida Panettone","DM Richiesta","Outreach Nuovi Followers","Outreach Vecchi Followers","Follow-Ups","Facebook","TikTok","Referral"],ce=((h==null?void 0:h.dailyReports)||[]).filter(t=>t.date!==new Date().toISOString().split("T")[0]).sort((t,s)=>s.date.localeCompare(t.date));return be?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-rose-500"})}):e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 sm:p-6",children:[e.jsxs(m.header,{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:p.photoURL||"/default-avatar.png",alt:"Profile",className:"w-12 h-12 rounded-full border-2 border-rose-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-50",children:p.name||"Collaboratore"}),e.jsx("p",{className:"text-sm text-slate-400",children:h==null?void 0:h.role})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{userType:"collaboratore"}),e.jsxs("div",{className:"text-sm text-slate-400 flex items-center gap-1",children:[e.jsx(it,{size:16})," Reset: ",ve]}),e.jsxs("button",{onClick:()=>H(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2",children:[e.jsx(ct,{size:16})," Profilo"]}),e.jsx("button",{onClick:()=>u.signOut().then(()=>A("/login")),className:"px-4 py-2 bg-rose-600 hover:bg-rose-700 text-white rounded-lg",children:"Esci"})]})]}),e.jsxs(m.div,{className:"bg-slate-800/60 backdrop-blur-sm rounded-2xl p-6 space-y-6 border border-white/10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-400 mb-2",children:"Chiamate giornaliere"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Fe.map((t,s)=>e.jsxs(m.div,{className:"bg-slate-800/70 p-3 rounded-lg border border-white/10 text-center",whileHover:{scale:1.05},children:[e.jsx("img",{src:t.photoURL||"/default-avatar.png",alt:t.name,className:"w-10 h-10 rounded-full mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-slate-300 truncate",children:t.name}),e.jsx("p",{className:"text-lg font-bold text-white",children:t.calls}),e.jsxs("p",{className:"text-xs text-emerald-400",children:["Mese: ",t.monthTotal]})]},s))})]}),e.jsxs("div",{className:"bg-slate-800/70 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-300",children:"Chiamate prenotate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ne(t=>t-1),className:"p-1 text-cyan-300 hover:bg-cyan-900/30 rounded",children:e.jsx(dt,{size:18})}),e.jsx("span",{className:"text-sm text-slate-300 font-medium",children:Be}),e.jsx("button",{onClick:()=>ne(t=>t+1),className:"p-1 text-cyan-300 hover:bg-cyan-900/30 rounded",children:e.jsx(mt,{size:18})})]})]}),e.jsx("div",{className:"h-48",children:e.jsx(ot,{data:{labels:Ae,datasets:Oe},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:800},plugins:{legend:{position:"bottom",labels:{font:{size:10},color:"#e2e8f0",padding:12}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#60a5fa",bodyColor:"#e2e8f0",cornerRadius:6,displayColors:!0}},scales:{y:{beginAtZero:!0,ticks:{font:{size:10},color:"#94a3b8"},grid:{color:"rgba(255,255,255,0.05)"}},x:{ticks:{font:{size:10},color:"#94a3b8"},grid:{display:!1}}}}})})]}),F&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-rose-900/50 to-rose-800/30 p-4 rounded-lg border border-rose-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-rose-300 mb-2",children:"Leads Aggiunti"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:_})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/50 to-yellow-800/30 p-4 rounded-lg border border-yellow-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-2",children:"Chiamate Prenotate"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:Me})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/50 to-cyan-800/30 p-4 rounded-lg border border-cyan-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-300 mb-2",children:"Tasso Show-up"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:[Ee,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{onClick:()=>G(!0),className:"bg-slate-800/70 p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(xt,{size:20})," Tracker DMS"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${ie?"bg-green-600":"bg-red-600"} text-white`,children:ie?"Inviato":"Mancante"})]})}),F&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>Y(!0),className:"bg-slate-800/70 p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(ht,{size:20})," Nuovo Lead"]})}),e.jsx("div",{onClick:()=>se(!0),className:"bg-slate-800/70 p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(ut,{size:20})," I miei Lead"]})}),e.jsx("div",{onClick:()=>ae(!0),className:"bg-slate-800/70 p-4 rounded-lg border border-white/10 cursor-pointer hover:border-rose-500 md:col-span-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 flex items-center gap-2",children:[e.jsx(pt,{size:20})," Report Passati"]})})]})]}),te&&e.jsx("p",{className:"text-green-500 text-center",children:te}),ee&&e.jsx("p",{className:"text-red-500 text-center",children:ee})]}),e.jsx(P,{children:ye&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Profilo"}),e.jsx("button",{onClick:()=>H(!1),className:"text-white hover:text-rose-400",children:e.jsx(D,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:p.photoURL||"/default-avatar.png",alt:"Profile",className:"w-24 h-24 rounded-full mb-2"}),e.jsx("input",{type:"file",onChange:Ue,accept:"image/*",className:"text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-rose-50 file:text-rose-700 hover:file:bg-rose-100",disabled:ke})]}),e.jsx("input",{type:"text",value:p.name,onChange:t=>T({...p,name:t.target.value}),placeholder:"Nome",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("label",{className:"flex items-center gap-2 text-white",children:[e.jsx("input",{type:"radio",name:"gender",value:"M",checked:p.gender==="M",onChange:t=>T({...p,gender:t.target.value}),className:"accent-rose-500"}),"Maschio"]}),e.jsxs("label",{className:"flex items-center gap-2 text-white",children:[e.jsx("input",{type:"radio",name:"gender",value:"F",checked:p.gender==="F",onChange:t=>T({...p,gender:t.target.value}),className:"accent-rose-500"}),"Femmina"]})]}),e.jsxs("button",{onClick:Pe,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(K,{size:16})," Salva Profilo"]}),e.jsxs("div",{className:"border-t border-white/10 pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Reimposta Password"}),e.jsx("input",{type:"password",value:ge,onChange:t=>J(t.target.value),placeholder:"Password Attuale",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsx("input",{type:"password",value:R,onChange:t=>V(t.target.value),placeholder:"Nuova Password",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsx("input",{type:"password",value:X,onChange:t=>Z(t.target.value),placeholder:"Conferma Password",className:"p-2 bg-slate-800/70 border border-white/10 rounded w-full mb-2 text-white"}),e.jsxs("button",{onClick:Re,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(gt,{size:16})," Reimposta"]})]})]})]})})}),e.jsx(P,{children:fe&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Tracker DMS"}),e.jsx("button",{onClick:()=>G(!1),className:"text-white hover:text-rose-400",children:e.jsx(D,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"number",value:j.outreachTotale,onChange:t=>C({...j,outreachTotale:t.target.value}),placeholder:"Outreach Totale",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.followUpsTotali,onChange:t=>C({...j,followUpsTotali:t.target.value}),placeholder:"Follow-Ups Totali",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.risposte,onChange:t=>C({...j,risposte:t.target.value}),placeholder:"Risposte",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"}),e.jsx("input",{type:"number",value:j.callPrenotate,onChange:t=>C({...j,callPrenotate:t.target.value}),placeholder:"Call Prenotate",className:"p-3 bg-slate-800/70 border border-white/10 rounded-lg text-white w-full"})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(m.button,{onClick:De,className:"flex items-center gap-2 px-6 py-3 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold rounded-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(K,{size:20})," Salva Tracker"]})})]})})}),e.jsx(P,{children:we&&F&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Nuovo Lead"}),e.jsx("button",{onClick:()=>Y(!1),className:"text-white hover:text-rose-400",children:e.jsx(D,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:l.name,onChange:t=>N({...l,name:t.target.value}),placeholder:"Nome Lead",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsxs("select",{value:l.source,onChange:t=>N({...l,source:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Seleziona Fonte"}),Ge.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("input",{type:"text",value:l.number,onChange:t=>N({...l,number:t.target.value}),placeholder:"Numero",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"text",value:l.email,onChange:t=>N({...l,email:t.target.value}),placeholder:"Email",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"date",value:l.dataPrenotazione,onChange:t=>N({...l,dataPrenotazione:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("input",{type:"time",value:l.oraPrenotazione,onChange:t=>N({...l,oraPrenotazione:t.target.value}),className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white"}),e.jsx("textarea",{value:l.note,onChange:t=>N({...l,note:t.target.value}),placeholder:"Note",className:"p-3 bg-slate-700/70 border border-white/10 rounded-lg text-white col-span-2",rows:"2"}),e.jsxs(m.button,{onClick:Te,className:"col-span-2 bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg flex items-center justify-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(K,{size:20})," Salva Lead"]})]})]})})}),e.jsx(P,{children:je&&F&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"I miei Lead"}),e.jsx("button",{onClick:()=>se(!1),className:"text-white hover:text-rose-400",children:e.jsx(D,{size:24})})]}),e.jsx("div",{className:"overflow-x-auto -mx-2 sm:mx-0",children:e.jsxs("table",{className:"w-full text-xs sm:text-sm text-left text-slate-300",children:[e.jsx("thead",{className:"text-[10px] sm:text-xs uppercase bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Nome"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 hidden sm:table-cell",children:"Fonte"}),e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Numero"}),e.jsx("th",{className:"px-3 sm:px-4 py-2",children:"Prenotato"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 text-center",children:"Show-up"}),e.jsx("th",{className:"px-3 sm:px-4 py-2 text-right",children:"Azioni"})]})}),e.jsxs("tbody",{children:[L.map(t=>e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("td",{className:"px-3 sm:px-4 py-2 font-medium text-slate-100",children:t.name}),e.jsx("td",{className:"px-3 sm:px-4 py-2 hidden sm:table-cell",children:t.source}),e.jsx("td",{className:"px-3 sm:px-4 py-2",children:t.number}),e.jsxs("td",{className:"px-3 sm:px-4 py-2 whitespace-nowrap",children:[t.dataPrenotazione," ",t.oraPrenotazione]}),e.jsx("td",{className:"px-3 sm:px-4 py-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] sm:text-xs ${t.showUp?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:t.showUp?"SÃ¬":"No"})}),e.jsx("td",{className:"px-3 sm:px-4 py-2 text-right",children:e.jsx("button",{onClick:()=>M(t),className:"text-red-400 hover:text-red-300 inline-flex items-center justify-center",title:"Elimina",children:e.jsx(bt,{size:14})})})]},t.id)),L.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-3 sm:px-4 py-8 text-center text-slate-400",children:"Nessun lead"})})]})]})})]})})}),e.jsx(P,{children:Ne&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Report Passati"}),e.jsx("button",{onClick:()=>ae(!1),className:"text-white hover:text-rose-400",children:e.jsx(D,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[ce.map((t,s)=>{var i,n,o,c;return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-white/10",children:[e.jsx("h4",{className:"font-semibold text-cyan-400",children:new Date(t.date).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2 text-sm",children:[e.jsxs("p",{className:"text-slate-400",children:["Outreach: ",e.jsx("span",{className:"text-emerald-400",children:((i=t.tracker)==null?void 0:i.outreachTotale)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Follow-Up: ",e.jsx("span",{className:"text-yellow-400",children:((n=t.tracker)==null?void 0:n.followUpsTotali)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Risposte: ",e.jsx("span",{className:"text-cyan-400",children:((o=t.tracker)==null?void 0:o.risposte)||0})]}),e.jsxs("p",{className:"text-slate-400",children:["Call: ",e.jsx("span",{className:"text-rose-400",children:((c=t.tracker)==null?void 0:c.callPrenotate)||0})]})]})]},s)}),ce.length===0&&e.jsx("p",{className:"text-center text-slate-400 py-8",children:"Nessun report passato"})]})]})})}),e.jsx(P,{children:z&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(m.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-slate-900/80 rounded-2xl border border-white/10 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Elimina Lead"}),e.jsx("button",{onClick:()=>M(null),className:"text-white hover:text-rose-400",children:e.jsx(D,{size:24})})]}),e.jsxs("p",{className:"text-slate-300 mb-4",children:["Sei sicuro di voler eliminare il lead ",e.jsx("strong",{children:z.name}),"?"]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>M(null),className:"px-4 py-2 bg-slate-700/50 hover:bg-slate-700/70 border border-slate-600 text-white rounded-lg",children:"Annulla"}),e.jsx("button",{onClick:ze,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Elimina"})]})]})})})]})}export{_t as default};
