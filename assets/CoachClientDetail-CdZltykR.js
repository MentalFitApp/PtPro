import{r,j as e}from"./react-FJB7Hj_2.js";import{y,z as C,G as I,D as L,H as T,B as $}from"./@firebase-D5dUFubL.js";import{d as b,t as k}from"./index-C1w-7Ivh.js";import{g as F,a as G}from"./react-router-DF4cN2Hx.js";import{m as i,A as O}from"./framer-motion-Bo7GrDk8.js";import{U as B,A as R,v as U,C as V}from"./lucide-react-BYK_Rxhn.js";import"./papaparse-BHXrM2Hc.js";import"./idb-BXWtuYvb.js";import"./react-dom-BrtcLnxQ.js";import"./scheduler-DYLXRpC5.js";import"./react-router-dom-udQfSOCw.js";import"./@remix-run-CjG9tKj3.js";import"./firebase-CiybzbB3.js";import"./tslib-BGVaTf34.js";import"./motion-dom-C8PdgYBP.js";import"./motion-utils-DBsP9okC.js";const q=()=>e.jsx("div",{className:"min-h-screen flex justify-center items-center relative",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-400"})}),c=({title:s,data:n,variants:o})=>e.jsxs(i.div,{variants:o,className:"bg-zinc-950/60 backdrop-blur-xl rounded-2xl gradient-border p-6",children:[e.jsx("h4",{className:"font-bold mb-4 text-lg text-rose-300 border-b border-rose-400/20 pb-2",children:s}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(n).map(([l,t])=>e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-slate-400",children:[l.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase()),":"]}),e.jsx("p",{className:"text-sm text-slate-200",children:t||"N/D"})]},l))})]}),H=({check:s,variants:n})=>e.jsxs(i.div,{variants:n,className:"p-3 rounded-lg bg-slate-500/5 hover:bg-slate-500/10 transition-colors",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("p",{className:"text-sm font-semibold text-slate-200",children:["Check del ",k(s.createdAt).toLocaleDateString("it-IT")]})}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1 flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{size:14})," Data: ",k(s.createdAt).toLocaleString("it-IT")]}),s.weight&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{size:14})," Peso: ",s.weight," kg"]})]})]});function oe(){const{clientId:s}=F(),n=G(),[o,l]=r.useState(null),[t,d]=r.useState(null),[u,A]=r.useState([]),[w,f]=r.useState(!0),[j,m]=r.useState(null);r.useEffect(()=>{(async()=>{try{const h=y(b,"clients",s),v=await C(h);if(!v.exists())throw new Error("Cliente non trovato.");l(v.data());const S=y(b,`clients/${s}/anamnesi`,"initial"),N=await C(S);d(N.exists()?N.data():null);const E=I(L(b,`clients/${s}/checks`),T("createdAt","desc")),P=$(E,p=>{try{const g=p.docs.map(D=>({id:D.id,...D.data()}));A(g)}catch(g){console.error("Errore snapshot checks:",g),m("Errore nel caricamento dei checks.")}},p=>{console.error("Errore snapshot checks:",p),m("Errore nel caricamento dei checks.")});return f(!1),()=>P()}catch(h){console.error("Errore nel fetch dati cliente:",h),m("Errore nel caricamento dei dati del cliente."),f(!1)}})()},[s]);const z={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return j?e.jsx("div",{className:"min-h-screen bg-zinc-950 text-red-400 flex justify-center items-center",children:j}):w?e.jsx(q,{}):e.jsx("div",{className:"min-h-screen text-slate-200 p-4 sm:p-8 relative",children:e.jsxs(i.div,{initial:"hidden",animate:"visible",variants:z,children:[e.jsxs(i.header,{variants:a,className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-50 flex items-center gap-2",children:[e.jsx(B,{size:28})," Dettagli Cliente: ",(o==null?void 0:o.name)||"N/D"]}),e.jsxs("button",{onClick:()=>n("/coach/clients"),className:"flex items-center gap-2 px-3 py-2 bg-zinc-800 hover:bg-zinc-700 text-slate-300 text-sm font-semibold rounded-lg transition-colors",children:[e.jsx(R,{size:16}),e.jsx("span",{children:"Torna ai Clienti"})]})]}),e.jsxs(i.div,{variants:a,className:"space-y-6",children:[t?e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Dati Anagrafici e Misure",data:{Nome:t.firstName,Cognome:t.lastName,"Data di Nascita":t.birthDate,Lavoro:t.job,Peso:t.weight?`${t.weight} kg`:"N/D",Altezza:t.height?`${t.height} cm`:"N/D"},variants:a}),e.jsx(c,{title:"Abitudini Alimentari",data:{"Pasti al Giorno":t.mealsPerDay,"Tipo Colazione":t.breakfastType,"Alimenti Preferiti":t.desiredFoods,"Alimenti Non Graditi":t.dislikedFoods,Intolleranze:t.intolerances,"Problemi Digestivi":t.digestionIssues},variants:a}),e.jsx(c,{title:"Allenamento",data:{"Allenamenti a Settimana":t.workoutsPerWeek,"Dettagli Allenamento":t.trainingDetails,"Orario e Durata":t.trainingTime},variants:a}),e.jsx(c,{title:"Salute e Obiettivi",data:{Infortuni:t.injuries,Farmaci:t.medications,Integratori:t.supplements,Obiettivo:t.mainGoal,"Durata Programma":t.programDuration},variants:a})]}):e.jsx(i.div,{variants:a,className:"bg-zinc-950/60 backdrop-blur-xl rounded-2xl gradient-border p-6 text-center text-slate-400",children:"Nessuna anamnesi disponibile."}),e.jsxs(i.div,{variants:a,className:"bg-zinc-950/60 backdrop-blur-xl rounded-2xl gradient-border p-6",children:[e.jsx("h4",{className:"font-bold mb-4 text-lg text-rose-300 border-b border-rose-400/20 pb-2",children:"Checks"}),e.jsx("div",{className:"space-y-3 max-h-[90vh] overflow-y-auto pr-2",children:e.jsx(O,{children:u.length>0?u.map(x=>e.jsx(H,{check:x,variants:a},x.id)):e.jsx("p",{className:"text-slate-400 text-center p-4",children:"Nessun check disponibile."})})})]})]})]})})}export{oe as default};
