import{r,a as y,q as b,j as e,J as j,h as N,f as S,D as P}from"./index-anlJ2MEK.js";import{c as z,m as l}from"./proxy-QSBDSPTy.js";import{L as k}from"./lock-CfMEKJsa.js";import{C}from"./circle-check-FTy3amIH.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=z("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),L=()=>e.jsx("div",{className:"absolute inset-0 -z-10 overflow-hidden bg-zinc-950",children:e.jsx("div",{className:"aurora-background"})}),F=()=>{const[i,g]=r.useState(""),[d,v]=r.useState(""),[u,s]=r.useState(""),[o,m]=r.useState(""),[p,t]=r.useState(!1),x=y(),n=b().currentUser,w=async a=>{if(a.preventDefault(),s(""),m(""),t(!0),!n){s("Utente non autenticato. Effettua nuovamente il login."),setTimeout(()=>x("/client-login"),3e3),t(!1);return}if(i.length<6){s("La nuova password deve contenere almeno 6 caratteri."),t(!1);return}if(i!==d){s("Le password non coincidono. Riprova."),t(!1);return}try{await j(n,i);const c=N(S,"clients",n.uid);await P(c,{firstLogin:!1}),m("Password aggiornata! Sarai reindirizzato alla dashboard."),setTimeout(()=>x("/client/dashboard"),3e3)}catch(c){s("Si Ã¨ verificato un errore. Riprova."),console.error("Errore aggiornamento password:",c),t(!1)}},f="w-full pl-10 pr-3 py-2.5 mt-1 bg-zinc-900/70 border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500 text-slate-200 placeholder:text-slate-500",h="block text-sm font-medium text-slate-300";return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative",children:[e.jsx(L,{}),e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md bg-zinc-950/60 backdrop-blur-xl rounded-2xl gradient-border p-8 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-50",children:"Imposta la tua Password"}),e.jsx("p",{className:"mt-2 text-slate-400",children:"Scegli una password personale per i futuri accessi."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:h,children:"Nuova Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{id:"new-password",type:"password",required:!0,value:i,onChange:a=>g(a.target.value),className:f})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:h,children:"Conferma Nuova Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{id:"confirm-password",type:"password",required:!0,value:d,onChange:a=>v(a.target.value),className:f})]})]}),e.jsxs(AnimatePresence,{children:[u&&e.jsx(l.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-red-400 text-sm text-center",children:u}),o&&e.jsxs(l.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-emerald-400 text-sm text-center flex items-center justify-center gap-2",children:[e.jsx(C,{size:16}),o]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full px-4 py-2.5 font-bold text-white bg-cyan-600 rounded-lg hover:bg-cyan-700 disabled:opacity-50 transition-colors",disabled:p||!!o,children:o?"Reindirizzamento...":p?"Salvataggio...":"Imposta Nuova Password"})})]})]})]})};export{F as default};
