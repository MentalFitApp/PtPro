import{a as N,z as y,r as m,j as e,h as p,f,l as S,D as z}from"./index-anlJ2MEK.js";import{u as w}from"./index.esm-C6pMzoLS.js";import{m as D}from"./proxy-QSBDSPTy.js";import{A as C}from"./arrow-left-BEeMmgf1.js";import{S as E}from"./save-D4sO7FbU.js";const $=s=>{if(!s)return"";const t=typeof s.toDate=="function"?s.toDate():new Date(s);if(isNaN(t))return"";const a=t.getFullYear(),c=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${a}-${c}-${o}`};function M(){const s=N(),{clientId:t}=y(),{register:a,handleSubmit:c,reset:o,formState:{isSubmitting:x}}=w(),[b,h]=m.useState(""),[g,j]=m.useState(!0);m.useEffect(()=>{(async()=>{try{const n=p(f,"clients",t),u=await S(n);if(u.exists()){const d=u.data();h(d.name),o({...d,scadenza:$(d.scadenza)})}else s("/clients")}catch(n){console.error("Errore nel caricamento del cliente:",n)}finally{j(!1)}})()},[t,o,s]);const v=async r=>{try{const n=p(f,"clients",t);await z(n,{...r,scadenza:r.scadenza?new Date(r.scadenza):null}),s(`/client/${t}`)}catch(n){console.error("Errore nell'aggiornamento del cliente: ",n)}},i="w-full p-2.5 bg-zinc-900/70 border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-rose-500 transition-all text-slate-200",l="block mb-1.5 text-sm font-medium text-slate-400";return g?e.jsx("div",{className:"text-center p-8 text-slate-400",children:"Caricamento dati cliente..."}):e.jsxs(D.div,{className:"w-full max-w-2xl mx-auto bg-zinc-950/60 backdrop-blur-xl rounded-xl gradient-border p-6 sm:p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-50",children:"Modifica Cliente"}),e.jsx("p",{className:"text-rose-500 font-semibold",children:b})]}),e.jsxs("button",{onClick:()=>s(`/client/${t}`),className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-800/80 hover:bg-zinc-700/80 rounded-lg text-sm text-slate-300 transition-colors",children:[e.jsx(C,{size:16})," Annulla"]})]}),e.jsxs("form",{onSubmit:c(v),className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Nome e Cognome"}),e.jsx("input",{...a("name",{required:"Il nome è obbligatorio"}),className:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Email"}),e.jsx("input",{type:"email",...a("email",{required:"L'email è obbligatoria"}),className:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Telefono (Opzionale)"}),e.jsx("input",{...a("phone"),className:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 pt-5 border-t border-white/10",children:[e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Stato Cliente"}),e.jsxs("select",{...a("status"),className:i,children:[e.jsx("option",{value:"attivo",children:"Attivo"}),e.jsx("option",{value:"in prova",children:"In Prova"}),e.jsx("option",{value:"sospeso",children:"Sospeso"}),e.jsx("option",{value:"scaduto",children:"Scaduto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:l,children:"Data Scadenza"}),e.jsx("input",{type:"date",...a("scadenza"),className:i})]})]}),e.jsx("div",{className:"flex justify-end pt-5",children:e.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-rose-600 hover:bg-rose-700 text-white font-semibold rounded-lg transition-colors disabled:bg-rose-900 disabled:cursor-not-allowed",children:[e.jsx(E,{size:18})," ",x?"Salvataggio...":"Salva Modifiche"]})})]})]})}export{M as default};
