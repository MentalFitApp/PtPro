import{r as l,a as u,q as p,d as b,f,x as j,y as N,o as g,j as e}from"./index-anlJ2MEK.js";import{c as y,m as v}from"./proxy-QSBDSPTy.js";import{A as D}from"./arrow-left-BEeMmgf1.js";import{C as z}from"./calendar-Bva6_DFN.js";import{D as w}from"./dollar-sign-t49DdLVO.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=y("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),d=()=>e.jsx("div",{className:"absolute inset-0 -z-10 overflow-hidden bg-zinc-950",children:e.jsx("div",{className:"aurora-background"})}),k=()=>e.jsxs("div",{className:"min-h-screen flex justify-center items-center relative",children:[e.jsx(d,{}),e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-400"})]}),L=s=>s&&typeof s.toDate=="function"?s.toDate().toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}):"N/D",P=()=>{const[s,m]=l.useState([]),[x,o]=l.useState(!0),n=u(),r=p().currentUser;return l.useEffect(()=>{if(!r){n("/client-login");return}const t=b(f,`clients/${r.uid}/payments`),a=j(t,N("paymentDate","desc")),h=g(a,i=>{m(i.docs.map(c=>({id:c.id,...c.data()}))),o(!1)},i=>{console.error("Errore nel caricare i pagamenti:",i),o(!1)});return()=>h()},[r,n]),x?e.jsx(k,{}):e.jsxs("div",{className:"min-h-screen text-slate-200 p-4 sm:p-8 relative",children:[e.jsx(d,{}),e.jsxs(v.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-50",children:"Storico Pagamenti"}),e.jsxs("button",{onClick:()=>n("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-zinc-800 hover:bg-zinc-700 text-slate-300 text-sm font-semibold rounded-lg transition-colors",children:[e.jsx(D,{size:16}),e.jsx("span",{children:"Dashboard"})]})]}),e.jsx("main",{className:"bg-zinc-950/60 backdrop-blur-xl rounded-2xl gradient-border p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b border-white/10",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400 flex items-center gap-2",children:[e.jsx(z,{size:16}),"Data"]}),e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400",children:[e.jsx(w,{size:16,className:"inline mr-2"}),"Importo"]}),e.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-400",children:[e.jsx(S,{size:16,className:"inline mr-2"}),"Durata"]}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-400 hidden sm:table-cell",children:"Metodo"})]})}),e.jsx("tbody",{children:s.length>0?s.map(t=>{var a;return e.jsxs("tr",{className:"border-b border-white/5 last:border-b-0",children:[e.jsx("td",{className:"p-4 text-slate-300",children:L(t.paymentDate)}),e.jsxs("td",{className:"p-4 font-semibold text-cyan-300",children:["€ ",(a=t.amount)==null?void 0:a.toFixed(2)]}),e.jsx("td",{className:"p-4 text-slate-300",children:t.duration}),e.jsx("td",{className:"p-4 text-slate-400 hidden sm:table-cell",children:t.paymentMethod||"Non specificato"})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center text-slate-500 p-8",children:"Non è stato registrato ancora nessun pagamento."})})})]})})})]})]})};export{P as default};
